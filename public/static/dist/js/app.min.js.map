{"version":3,"sources":["node_modules/.6.0.1@browser-pack/_prelude.js","public/static/src/js/app.js","public/static/src/js/module/config.js","public/static/src/js/module/const.js","public/static/src/js/module/index.js","public/static/src/js/module/other.js","public/static/src/js/module/post.js","public/static/src/js/module/public.js","public/static/src/js/module/read.js","public/static/src/js/module/util.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_util","_const","_config","_public","Public","_index","Index","_read","Read","_post","Post","_other","Other","window","pageId","$","attr","validateRegisterField","read","handleMainMenu","handleRollToTopOrBottomBtn","handleSearchDialog","handleAtTipsBtn","handleIndexThreadPanel","handleSelectBgImage","handleSelectBgColor","handleCustomBgStyle","handlePageNav","fastGotoFloor","tuiThread","showFloorLink","handleFastReplyBtn","handleBlockFloorBtn","handleBuyThreadBtn","copyBuyThreadList","handleFloorImage","checkPostForm","bindFastSubmitShortcutKey","copyCode","bindMultiQuoteCheckClick","handleClearMultiQuoteDataBtn","addSmileCode","highlightUnReadAtTipsMsg","handleGameIntroSearchArea","tuiGameIntro","randomSelectSmBox","bindFavorPageBtnsClick","bindFriendPageBtnsClick","syncPerPageFloorNum","assignBirthdayField","handleUploadAvatarFileBtn","transferKfbAlert","bindMessageActionBtnsClick","handleEditorBtns","handleAttachBtns","tooltip","container","configName","options","localStorage","JSON","parse","ex","type","isEmptyObject","Config","write","stringify","Const","multiQuoteStorageName","atTipsTimeCookieName","prevAtTipsTimeCookieName","bgStyleCookieName","Util","click","$this","this","time","data","cookieValue","getCookie","_const2","default","setCookie","currentDate","Date","getDate","removeClass","addClass","pageInfo","gjc","userName","timeString","test","prevString","each","index","curString","trim","text","document","on","deleteCookie","activeNewReplyPanel","tab","activeTopRecommendPanel","$target","target","targetPanel","typeName","includes","id","fileName","path","parent","confirm","css","alert","color","value","parseInt","prompt","location","reload","toLowerCase","replace","val","keyword","searchType","cookieName","url","makeUrl","preventDefault","ajax","success","$num","find","num","setTimeout","error","complete","removeData","dataType","$boxes","number","Math","floor","random","html","off","href","eq","$form","submit","action","selectAll","selectReverse","$checked","change","matches","exec","year","month","day","syncConfig","perPageFloorNum","isNaN","transferKfb","fixedDeposit","currentDeposit","_ret","title","prop","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","split","Symbol","iterator","next","done","key","err","return","v","_typeof","_$checked","name","showValidationMsg","post","_ref","msg","username","fail","trigger","textArea","get","selText","getSelText","addCode","focus","size","codeType","is","$postType","$postTitle","getStrByteLen","$voteItemContent","$postContent","_length","$postGjc","$area","closest","after","blur","remove","$newAttachArea","totalNum","$lastAttachArea","insertAfter","$node","$relatedTarget","relatedTarget","documentElement","clientHeight","scroll","$btn","scrollTop","height","animate","$searchDialog","select","$searchKeyword","$method","getTime","fid","$current","handleForumPanel","activeForumPanel1","activeForumPanel2","maxPageNum","currentPageNum","keydown","keyCode","ctrlKey","getCheckedMultiQuoteData","getHostNameUrl","$article","postContent","selectionStart","selectionEnd","pid","price","tid","verify","_this","list","map","join","selectedIndex","modal","naturalWidth","width","floorNum","hashName","prev","hash","safeId","$pre","decodeHtmlSpecialChar","quoteList","push","handleMultiQuote","removeItem","arguments","_data","Object","values","_data2","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","quote","keywords","Set","content","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_quote","add","concat","_toConsumableArray","date","prefix","cookiePrefix","cookie","encodeURI","toUTCString","regex","RegExp","match","decodeURI","flag","increment","unit","setFullYear","getFullYear","setMonth","getMonth","setDate","setHours","getHours","setMinutes","getMinutes","setSeconds","getSeconds","setMilliseconds","getMilliseconds","extractQueryStr","str","len","sLen","cLen","charCodeAt","protocol","host","startPos","indexOf","prePos","substr","param","Map","arr","set","buildQueryStr","queryStr","_step2$value","_slicedToArray","includeOtherParam","paramList","urlParam","entries","pathname","startsWith","baseFile","rootPath","urlType","$nodes","$parent","inArray","$feedback"],"mappings":"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","file":"app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\r\nimport * as Util from './module/util';\r\nimport Const from './module/const';\r\nimport {read as readConfig, write as writeConfig} from './module/config';\r\nimport * as Public from './module/public';\r\nimport * as Index from './module/index';\r\nimport * as Read from './module/read';\r\nimport * as Post from './module/post';\r\nimport * as Other from './module/other';\r\n\r\n// 页面ID\r\nwindow.pageId = $('body').attr('id');\r\n\r\n/**\r\n * 初始化\r\n */\r\n$(function () {\r\n    if (pageId === 'loginPage') return;\r\n    else if (pageId === 'registerPage') {\r\n        Other.validateRegisterField();\r\n        return;\r\n    }\r\n    readConfig();\r\n\r\n    Public.handleMainMenu();\r\n    Public.handleRollToTopOrBottomBtn();\r\n    Public.handleSearchDialog();\r\n    //Public.handleForumPanel();\r\n    if (pageId === 'indexPage') {\r\n        Index.handleAtTipsBtn();\r\n        Index.handleIndexThreadPanel();\r\n        Index.handleSelectBgImage();\r\n        Index.handleSelectBgColor();\r\n        Index.handleCustomBgStyle();\r\n    }\r\n    else if (pageId === 'threadPage') {\r\n        Public.handlePageNav('thread/index');\r\n    }\r\n    else if (pageId === 'readPage') {\r\n        Read.fastGotoFloor();\r\n        Public.handlePageNav('read/index');\r\n        Read.tuiThread();\r\n        Read.showFloorLink();\r\n        Read.handleFastReplyBtn();\r\n        Read.handleBlockFloorBtn();\r\n        Read.handleBuyThreadBtn();\r\n        Read.copyBuyThreadList();\r\n        Read.handleFloorImage();\r\n        Post.checkPostForm();\r\n        Public.bindFastSubmitShortcutKey($('#postContent'));\r\n        Read.copyCode();\r\n        Read.bindMultiQuoteCheckClick();\r\n        Read.handleClearMultiQuoteDataBtn(1);\r\n        Post.addSmileCode($('#postContent'));\r\n    }\r\n    else if (pageId === 'searchPage') {\r\n        Public.handlePageNav('search/index');\r\n    }\r\n    else if (pageId === 'gjcPage') {\r\n        Index.highlightUnReadAtTipsMsg();\r\n    }\r\n    else if (pageId === 'myReplyPage') {\r\n        Public.handlePageNav('personal/reply');\r\n    }\r\n    else if (pageId === 'gameIntroSearchPage') {\r\n        Public.handlePageNav('game_intro/search');\r\n        Other.handleGameIntroSearchArea();\r\n    }\r\n    else if (pageId === 'gameIntroPage') {\r\n        Other.tuiGameIntro('game');\r\n    }\r\n    else if (pageId === 'gameIntroCompanyPage') {\r\n        Other.tuiGameIntro('company');\r\n    }\r\n    else if (pageId === 'gameIntroTypePage') {\r\n        Other.tuiGameIntro('type');\r\n    }\r\n    else if (pageId === 'gameIntroPropertyPage') {\r\n        Other.tuiGameIntro('property');\r\n    }\r\n    else if (pageId === 'smBoxPage') {\r\n        Other.randomSelectSmBox();\r\n    }\r\n    else if (pageId === 'favorPage') {\r\n        Other.bindFavorPageBtnsClick();\r\n    }\r\n    else if (pageId === 'friendPage') {\r\n        Other.bindFriendPageBtnsClick();\r\n    }\r\n    else if (pageId === 'modifyPage') {\r\n        Other.syncPerPageFloorNum();\r\n        Other.assignBirthdayField();\r\n        Other.handleUploadAvatarFileBtn();\r\n    }\r\n    else if (pageId === 'bankPage') {\r\n        Other.transferKfbAlert();\r\n    }\r\n    else if (pageId === 'bankLogPage') {\r\n        Public.handlePageNav('bank/log');\r\n    }\r\n    else if (pageId === 'messagePage') {\r\n        Public.handlePageNav('message/index');\r\n        Other.bindMessageActionBtnsClick();\r\n    }\r\n    else if (pageId === 'readMessagePage') {\r\n        Read.handleFloorImage();\r\n        Read.copyCode();\r\n    }\r\n    else if (pageId === 'writeMessagePage') {\r\n        Public.bindFastSubmitShortcutKey($('#msgContent'));\r\n        Post.addSmileCode($('#msgContent'));\r\n    }\r\n    else if (pageId === 'messageBannedPage') {\r\n        Public.bindFastSubmitShortcutKey($('#banidinfo'));\r\n    }\r\n    else if (pageId === 'selfRateLatestPage') {\r\n        Public.handlePageNav('self_rate/latest');\r\n    }\r\n    else if (pageId === 'selfRateCompletePage') {\r\n        Public.handlePageNav('self_rate/complete');\r\n    }\r\n    else if (pageId === 'postPage') {\r\n        Post.checkPostForm();\r\n        Public.bindFastSubmitShortcutKey($('#postContent'));\r\n        Post.handleEditorBtns();\r\n        Post.addSmileCode($('#postContent'));\r\n        Post.handleAttachBtns();\r\n    }\r\n\r\n    //let tooltipStartTime = new Date();\r\n    $('[data-toggle=\"tooltip\"]').tooltip({'container': 'body'});\r\n    //console.log(`tooltip初始化耗时：${new Date() - tooltipStartTime}ms`);\r\n});\r\n","'use strict';\r\n\r\n// 配置名称\r\nconst configName = 'kf_config';\r\n\r\n/**\r\n * 配置类\r\n */\r\nlet Config = {};\r\n\r\n/**\r\n * 读取设置\r\n */\r\nexport const read = function () {\r\n    let options = localStorage[configName];\r\n    if (!options) return;\r\n    try {\r\n        options = JSON.parse(options);\r\n    }\r\n    catch (ex) {\r\n        return;\r\n    }\r\n    if (!options || $.type(options) !== 'object' || $.isEmptyObject(options)) return;\r\n    window.Config = options;\r\n};\r\n\r\n/**\r\n * 写入设置\r\n */\r\nexport const write = function () {\r\n    localStorage[configName] = JSON.stringify(window.Config);\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * 配置常量类\r\n */\r\nconst Const = {\r\n    // 存储多重引用数据的LocalStorage名称\r\n    multiQuoteStorageName: 'kf_multi_quote',\r\n    // at提醒时间的Cookie名称\r\n    atTipsTimeCookieName: 'at_tips_time',\r\n    // 上一次at提醒时间的Cookie名称\r\n    prevAtTipsTimeCookieName: 'prev_at_tips_time',\r\n    // 背景样式的Cookie名称\r\n    bgStyleCookieName: 'bg_style',\r\n};\r\n\r\nexport default Const;\r\n","'use strict';\r\nimport * as Util from './util';\r\nimport Const from './const';\r\nimport {read as readConfig, write as writeConfig} from './config';\r\n\r\n/**\r\n * 处理首页的@提醒按钮\r\n */\r\nexport const handleAtTipsBtn = function () {\r\n    $('#atTips').click(function () {\r\n        let $this = $(this);\r\n        let time = $this.data('time');\r\n        let cookieValue = Util.getCookie(Const.atTipsTimeCookieName);\r\n        if (!time || time === cookieValue) return;\r\n        if (!cookieValue) {\r\n            let currentDate = (new Date()).getDate();\r\n            Util.setCookie(Const.prevAtTipsTimeCookieName, (currentDate < 10 ? '0' + currentDate : currentDate) + '日00时00分');\r\n        }\r\n        else if (cookieValue !== time) {\r\n            Util.setCookie(Const.prevAtTipsTimeCookieName, cookieValue);\r\n        }\r\n        Util.setCookie(Const.atTipsTimeCookieName, time, Util.getDate('+3d'));\r\n        $this.removeClass('btn-outline-danger').addClass('btn-outline-primary');\r\n    });\r\n};\r\n\r\n/**\r\n * 高亮关键词页面中未读的消息\r\n */\r\nexport const highlightUnReadAtTipsMsg = function () {\r\n    if (pageInfo.gjc !== pageInfo.userName) return;\r\n    let timeString = Util.getCookie(Const.prevAtTipsTimeCookieName);\r\n    if (!timeString || !/^\\d+日\\d+时\\d+分$/.test(timeString)) return;\r\n    let prevString = '';\r\n    $('.thread-list-item time').each(function (index) {\r\n        let $this = $(this);\r\n        let curString = $.trim($this.text());\r\n        if (index === 0) prevString = curString;\r\n        if (timeString < curString && prevString >= curString) {\r\n            $this.addClass('text-danger');\r\n            prevString = curString;\r\n        }\r\n        else return false;\r\n    });\r\n\r\n    $(document).on('click', '.thread-list-item .thread-link-item a', function () {\r\n        Util.deleteCookie(Const.prevAtTipsTimeCookieName);\r\n    });\r\n};\r\n\r\n/**\r\n * 处理首页主题链接面板\r\n */\r\nexport const handleIndexThreadPanel = function () {\r\n    if (Config.activeNewReplyPanel) {\r\n        $(`a[data-toggle=\"tab\"][href=\"${Config.activeNewReplyPanel}\"]`).tab('show');\r\n    }\r\n    if (Config.activeTopRecommendPanel) {\r\n        $(`a[data-toggle=\"tab\"][href=\"${Config.activeTopRecommendPanel}\"]`).tab('show');\r\n    }\r\n\r\n    $(document).on('shown.bs.tab', 'a[data-toggle=\"tab\"]', function (e) {\r\n        let $target = $(e.target);\r\n        let targetPanel = $target.attr('href');\r\n        let typeName = '';\r\n        if (targetPanel.includes('NewReplyPanel')) typeName = 'activeNewReplyPanel';\r\n        else if (targetPanel.includes('TopRecommendPanel')) typeName = 'activeTopRecommendPanel';\r\n        if (typeName) {\r\n            readConfig();\r\n            Config[typeName] = $target.attr('href');\r\n            writeConfig();\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * 处理选择页面背景图片\r\n */\r\nexport const handleSelectBgImage = function () {\r\n    $('#selectBgImage').on('click', '[data-id]', function () {\r\n        let $this = $(this);\r\n        let id = $this.data('id');\r\n        let fileName = $this.data('filename');\r\n        let path = $this.parent().data('path');\r\n        if (!id || !fileName || !path) return;\r\n        if (confirm('是否选择此背景图片？')) {\r\n            Util.setCookie(Const.bgStyleCookieName, id, Util.getDate('+1y'));\r\n            $('body, .modal-content').css('background-image', 'url(\"' + path + fileName + '\")');\r\n            alert('背景已更换');\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * 处理选择页面背景颜色\r\n */\r\nexport const handleSelectBgColor = function () {\r\n    $('#selectBgImage').on('click', '[data-color]', function () {\r\n        let $this = $(this);\r\n        let color = $this.data('color');\r\n        if (!color) return;\r\n        if (confirm('是否选择此背景颜色？')) {\r\n            Util.setCookie(Const.bgStyleCookieName, color, Util.getDate('+1y'));\r\n            $('body, .modal-content').css('background', color);\r\n            alert('背景已更换');\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * 处理自定义背景样式\r\n */\r\nexport const handleCustomBgStyle = function () {\r\n    $('#customBgStyle').click(function () {\r\n        let value = Util.getCookie(Const.bgStyleCookieName);\r\n        if (!value || parseInt(value)) value = '';\r\n        value = prompt(\r\n            '请输入背景图片URL、颜色代码或CSS样式：\\n（例：http://xxx.com/abc.jpg 或 #fcfcfc，留空表示恢复默认背景）\\n' +\r\n            '（注：建议选择简洁、不花哨、偏浅色系的背景图片或颜色）',\r\n            value\r\n        );\r\n        if (value === null) return;\r\n        if ($.trim(value) === '') {\r\n            Util.setCookie(Const.bgStyleCookieName, '', Util.getDate('-1d'));\r\n            alert('背景已恢复默认');\r\n            location.reload();\r\n        }\r\n        else if (/^https?:\\/\\/[^\"\\']+/.test(value)) {\r\n            Util.setCookie(Const.bgStyleCookieName, value, Util.getDate('+1y'));\r\n            $('body, .modal-content').css('background-image', 'url(\"' + value + '\")');\r\n            alert('背景已更换');\r\n        }\r\n        else if (/^#[0-9a-f]{6}$/i.test(value)) {\r\n            Util.setCookie(Const.bgStyleCookieName, value, Util.getDate('+1y'));\r\n            $('body, .modal-content').css('background', value.toLowerCase());\r\n            alert('背景已更换');\r\n        }\r\n        else if (!/[<>{}]/.test(value)) {\r\n            value = value.replace(';', '');\r\n            Util.setCookie(Const.bgStyleCookieName, value, Util.getDate('+1y'));\r\n            $('body, .modal-content').css('background', value);\r\n            alert('背景已更换');\r\n        }\r\n        else {\r\n            alert('格式不正确');\r\n        }\r\n    });\r\n};\r\n","'use strict';\r\nimport * as Util from './util';\r\nimport {read as readConfig, write as writeConfig} from './config';\r\n\r\n/**\r\n * 处理游戏搜索区域\r\n */\r\nexport const handleGameIntroSearchArea = function () {\r\n    $('#gameSearchKeyword').val(pageInfo.keyword);\r\n    $('#gameSearchType').val(pageInfo.searchType);\r\n};\r\n\r\n/**\r\n * 推游戏介绍\r\n * @param {string} type 页面类型\r\n */\r\nexport const tuiGameIntro = function (type) {\r\n    let cookieName = '';\r\n    if (type === 'company') cookieName = 'g_intro_inc_tui_';\r\n    else if (type === 'type') cookieName = 'g_intro_adv_tui_';\r\n    else if (type === 'property') cookieName = 'g_intro_moe_tui_';\r\n    else cookieName = 'g_intro_tui_';\r\n    cookieName += pageInfo.id;\r\n    let url = Util.makeUrl('game_intro/' + type, `id=${pageInfo.id}&tui=1`);\r\n\r\n    $('.tui-btn').click(function (e) {\r\n        e.preventDefault();\r\n        let $this = $(this);\r\n        if ($this.data('wait')) return;\r\n        if (Util.getCookie(cookieName, '')) {\r\n            alert('你在48小时内已经推过');\r\n            return;\r\n        }\r\n        $this.data('wait', true);\r\n        $.ajax({\r\n            type: 'GET',\r\n            url: url,\r\n            success: function () {\r\n                let $num = $this.find('span:first');\r\n                let num = parseInt($num.text());\r\n                $num.text('+1');\r\n                setTimeout(function () {\r\n                    $num.text(++num);\r\n                }, 1000);\r\n            },\r\n            error: function () {\r\n                alert('操作失败');\r\n            },\r\n            complete: function () {\r\n                $this.removeData('wait');\r\n            },\r\n            dataType: 'html'\r\n        });\r\n    });\r\n};\r\n\r\n/**\r\n * 随机选择神秘盒子\r\n */\r\nexport const randomSelectSmBox = function () {\r\n    $('#smBoxRandom').click(function () {\r\n        let $boxes = $('#smBoxPanel .table a');\r\n        let number = Math.floor(Math.random() * $boxes.length);\r\n        $(this).html(`你选择了<b>No. ${number}</b>`).off('click');\r\n        setTimeout(() => {\r\n            location.href = $boxes.eq(number).attr('href');\r\n        }, 1000);\r\n    });\r\n};\r\n\r\n/**\r\n * 绑定收藏夹页面按钮点击事件\r\n */\r\nexport const bindFavorPageBtnsClick = function () {\r\n    let $form = $('form[name=\"favorForm\"]');\r\n\r\n    $(document).on('click', '.remove-catalog', () => {\r\n        return confirm('是否删除该目录？');\r\n    });\r\n\r\n    $('#addCatalog').click(function (e) {\r\n        e.preventDefault();\r\n        let type = $.trim(prompt('请输入收藏夹目录名称：'));\r\n        if (!type) return;\r\n        $form.find('[name=\"job\"]').val('addtype');\r\n        $form.find('[name=\"type\"]').val(type);\r\n        $form.submit();\r\n    });\r\n\r\n    $('#favorActionBtns').on('click', 'button', function () {\r\n        let action = $(this).data('action');\r\n        if (action === 'selectAll') {\r\n            Util.selectAll($('[name=\"delid[]\"]'));\r\n        }\r\n        else if (action === 'selectReverse') {\r\n            Util.selectReverse($('[name=\"delid[]\"]'));\r\n        }\r\n        else if (action === 'delete') {\r\n            let $checked = $('[name=\"delid[]\"]:checked');\r\n            if ($checked.length > 0 && confirm(`是否删除这${$checked.length}项？`)) {\r\n                $form.find('[name=\"job\"]').val('clear');\r\n                $form.submit();\r\n            }\r\n        }\r\n    });\r\n\r\n    $('#convertCatalogDropdownMenu').on('click', 'a', function (e) {\r\n        e.preventDefault();\r\n        let type = $(this).data('type');\r\n        let $checked = $('[name=\"delid[]\"]:checked');\r\n        if ($checked.length > 0 && confirm(`是否将这${$checked.length}项转换到指定目录？`)) {\r\n            $form.find('[name=\"job\"]').val('change');\r\n            $form.find('[name=\"type\"]').val(type);\r\n            $form.submit();\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * 绑定好友列表页面按钮点击事件\r\n */\r\nexport const bindFriendPageBtnsClick = function () {\r\n    $('#friendActionBtns').on('click', '[type=\"button\"]', function () {\r\n        let action = $(this).data('action');\r\n        if (action === 'selectAll') {\r\n            Util.selectAll($('[name=\"selid[]\"]'));\r\n        }\r\n        else if (action === 'selectReverse') {\r\n            Util.selectReverse($('[name=\"selid[]\"]'));\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * 在账号设置页面里为生日字段赋值\r\n */\r\nexport const assignBirthdayField = function () {\r\n    $('#birthday').change(function () {\r\n        let value = $(this).val().trim();\r\n        let matches = /(\\d{4})-(\\d{1,2})-(\\d{1,2})/.exec(value);\r\n        let year = '', month = '', day = '';\r\n        if (matches) {\r\n            year = parseInt(matches[1]);\r\n            month = parseInt(matches[2]);\r\n            day = parseInt(matches[3]);\r\n        }\r\n        $('[name=\"proyear\"]').val(year);\r\n        $('[name=\"promonth\"]').val(month);\r\n        $('[name=\"proday\"]').val(day);\r\n    });\r\n};\r\n\r\n/**\r\n * 同步主题每页楼层数量的设置\r\n */\r\nexport const syncPerPageFloorNum = function () {\r\n    /**\r\n     * 同步设置\r\n     */\r\n    const syncConfig = function () {\r\n        let perPageFloorNum = parseInt($('[name=\"p_num\"]').val());\r\n        if (perPageFloorNum === 0) perPageFloorNum = 10;\r\n        if (!isNaN(perPageFloorNum) && perPageFloorNum !== Config.perPageFloorNum) {\r\n            Config.perPageFloorNum = perPageFloorNum;\r\n            writeConfig();\r\n        }\r\n    };\r\n\r\n    syncConfig();\r\n    $('#creator').submit(function () {\r\n        readConfig();\r\n        syncConfig();\r\n    });\r\n};\r\n\r\n/**\r\n * 处理上传头像文件浏览按钮\r\n */\r\nexport const handleUploadAvatarFileBtn = function () {\r\n    $('#browseAvatar').change(function () {\r\n        let $this = $(this);\r\n        let matches = /\\.(\\w+)$/.exec($this.val());\r\n        if (!matches || !['jpg', 'gif', 'png'].includes(matches[1].toLowerCase())) {\r\n            alert('头像图片类型不匹配');\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * 转账提醒\r\n */\r\nexport const transferKfbAlert = function () {\r\n    $('#transferKfbForm').submit(function () {\r\n        let $this = $(this);\r\n        let transferKfb = parseInt($this.find('[name=\"to_money\"]').val());\r\n        let fixedDeposit = parseInt($('#fixedDeposit').text());\r\n        let currentDeposit = parseInt($('#currentDeposit').text());\r\n        if (transferKfb > 0 && fixedDeposit > 0 && transferKfb > currentDeposit) {\r\n            if (!confirm('你的活期存款不足，转账金额将从定期存款里扣除，是否继续？')) {\r\n                return false;\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * 绑定短消息页面操作按钮点击事件\r\n */\r\nexport const bindMessageActionBtnsClick = function () {\r\n    $('#messageActionBtns').on('click', 'button', function () {\r\n        let $form = $('#messageListForm');\r\n        let action = $(this).data('action');\r\n        if (action === 'selectAll') {\r\n            Util.selectAll($('[name=\"delid[]\"]'));\r\n        }\r\n        else if (action === 'selectReverse') {\r\n            Util.selectReverse($('[name=\"delid[]\"]'));\r\n        }\r\n        else if (action === 'selectCustom') {\r\n            let title = $.trim(\r\n                prompt('请填写所要选择的包含指定字符串的短消息标题（可用|符号分隔多个标题）', '收到了他人转账的KFB|银行汇款通知|您的文章被评分|您的文章被删除')\r\n            );\r\n            if (!title) return;\r\n            $('[name=\"delid[]\"]').prop('checked', false);\r\n            $('a.thread-link').each(function () {\r\n                let $this = $(this);\r\n                for (let key of title.split('|')) {\r\n                    if ($this.text().toLowerCase().includes(key.toLowerCase())) {\r\n                        $this.parent().find('[name=\"delid[]\"]').prop('checked', true);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else if (action === 'download') {\r\n            let $checked = $('[name=\"delid[]\"]:checked');\r\n            if ($checked.length > 0 && confirm(`是否下载这${$checked.length}项？`)) {\r\n                $form.attr('action', '/message.php').find('[name=\"action\"]').val('down');\r\n                $form.submit();\r\n            }\r\n        }\r\n        else if (action === 'delete') {\r\n            let $checked = $('[name=\"delid[]\"]:checked');\r\n            if ($checked.length > 0 && confirm(`是否删除这${$checked.length}项？`)) {\r\n                $form.attr('action', Util.makeUrl('message/job')).find('[name=\"action\"]').val('del');\r\n                $form.submit();\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * 验证注册页面字段\r\n */\r\nexport const validateRegisterField = function () {\r\n    $(document).on('change', 'input[name]', function () {\r\n        let $this = $(this);\r\n        let name = $this.attr('name');\r\n        let value = $this.val();\r\n        if (!value) {\r\n            Util.showValidationMsg($this, 'clear');\r\n            return;\r\n        }\r\n        if (name === 'regemail') {\r\n            Util.showValidationMsg($this, 'wait', '检查中，请稍等&hellip;');\r\n            $.post(Util.makeUrl('register/check'), 'username=' + value, ({type, msg, username}) => {\r\n                if ($this.val() === username) {\r\n                    Util.showValidationMsg($this, type, msg);\r\n                }\r\n            }).fail(() => {\r\n                Util.showValidationMsg($this, 'error', '响应失败');\r\n            });\r\n        }\r\n        else if (name === 'regpwd') {\r\n            if (value.length > 16 || value.length < 6) {\r\n                Util.showValidationMsg($this, 'error', '密码长度不正确');\r\n            }\r\n            else {\r\n                Util.showValidationMsg($this, 'clear');\r\n                $('[name=\"regpwdrepeat\"]').trigger('change');\r\n            }\r\n        }\r\n        else if (name === 'regpwdrepeat') {\r\n            if (value !== $('[name=\"regpwd\"]').val()) Util.showValidationMsg($this, 'error', '两次输入的密码不相符');\r\n            else Util.showValidationMsg($this, 'clear');\r\n        }\r\n    });\r\n\r\n    $('#registerForm').submit(function () {\r\n        if ($(this).find('.has-danger').length > 0) {\r\n            alert('请正确填写表单');\r\n            return false;\r\n        }\r\n    });\r\n};\r\n","'use strict';\r\nimport * as Util from './util';\r\n\r\n/**\r\n * 处理编辑器按钮\r\n */\r\nexport const handleEditorBtns = function () {\r\n    let textArea = $('#postContent').get(0);\r\n\r\n    // 编辑器按钮\r\n    $(document).on('click', '.editor-btn-group button[data-action]', function () {\r\n        let action = $(this).data('action');\r\n        let value = '';\r\n        let matches = null;\r\n        switch (action) {\r\n            case 'link':\r\n                value = prompt('请输入链接URL：', 'http://');\r\n                break;\r\n            case 'img':\r\n                value = prompt('请输入图片URL：', 'http://');\r\n                break;\r\n            case 'sell':\r\n                value = prompt('请输入出售金额：', 1);\r\n                break;\r\n            case 'hide':\r\n                value = prompt('请输入神秘等级：', 1);\r\n                break;\r\n            case 'audio':\r\n                value = prompt('请输入HTML5音频实际地址：\\n（可直接输入网易云音乐或虾米的单曲地址，将自动转换为外链地址）', 'http://');\r\n                matches = /^https?:\\/\\/music\\.163\\.com\\/(?:#\\/)?song\\?id=(\\d+)/i.exec(value);\r\n                if (matches) value = `http://music.miaola.info/163/${matches[1]}.mp3`;\r\n                matches = /^https?:\\/\\/www\\.xiami\\.com\\/song\\/(\\d+)/i.exec(value);\r\n                if (matches) value = `http://music.miaola.info/xiami/${matches[1]}.mp3`;\r\n                break;\r\n            case 'video':\r\n                value = prompt('请输入HTML5视频实际地址：\\n（可直接输入YouTube视频页面的地址，将自动转换为外链地址）', 'http://');\r\n                matches = /^https?:\\/\\/(?:www\\.)?youtube\\.com\\/watch\\?v=([\\w\\-]+)/i.exec(value);\r\n                if (matches) value = `http://video.miaola.info/youtube/${matches[1]}`;\r\n                matches = /^https?:\\/\\/youtu\\.be\\/([\\w\\-]+)$/i.exec(value);\r\n                if (matches) value = `http://video.miaola.info/youtube/${matches[1]}`;\r\n                break;\r\n        }\r\n        if (value === null) return;\r\n\r\n        let selText = '';\r\n        let code = '';\r\n        switch (action) {\r\n            case 'link':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[url=${value}]${selText}[/url]`;\r\n                break;\r\n            case 'img':\r\n                code = `[img]${value}[/img]`;\r\n                break;\r\n            case 'quote':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[quote]${selText}[/quote]`;\r\n                break;\r\n            case 'code':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[code]${selText}[/code]`;\r\n                break;\r\n            case 'sell':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[sell=${value}]${selText}[/sell]`;\r\n                break;\r\n            case 'hide':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[hide=${value}]${selText}[/hide]`;\r\n                break;\r\n            case 'bold':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[b]${selText}[/b]`;\r\n                break;\r\n            case 'italic':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[i]${selText}[/i]`;\r\n                break;\r\n            case 'underline':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[u]${selText}[/u]`;\r\n                break;\r\n            case 'strike':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[strike]${selText}[/strike]`;\r\n                break;\r\n            case 'super':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[sup]${selText}[/sup]`;\r\n                break;\r\n            case 'sub':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[sub]${selText}[/sub]`;\r\n                break;\r\n            case 'horizontal':\r\n                code = `[hr]`;\r\n                break;\r\n            case 'align-left':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[align=left]${selText}[/align]`;\r\n                break;\r\n            case 'align-center':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[align=center]${selText}[/align]`;\r\n                break;\r\n            case 'align-right':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[align=right]${selText}[/align]`;\r\n                break;\r\n            case 'fly':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[fly]${selText}[/fly]`;\r\n                break;\r\n            case 'audio':\r\n                code = `[audio]${value}[/audio]`;\r\n                break;\r\n            case 'video':\r\n                code = `[video]${value}[/video]`;\r\n                break;\r\n        }\r\n        if (!code) return;\r\n        Util.addCode(textArea, code, selText);\r\n        textArea.focus();\r\n    });\r\n\r\n    // 字号下拉菜单\r\n    $('#fontSizeDropdownMenu').on('click', 'a', function (e) {\r\n        e.preventDefault();\r\n        let size = $(this).data('size');\r\n        let selText = Util.getSelText(textArea);\r\n        let code = `[size=${size}]${selText}[/size]`;\r\n        Util.addCode(textArea, code, selText);\r\n        textArea.focus();\r\n    });\r\n\r\n    // 颜色、背景颜色下拉菜单\r\n    $('#colorDropdownMenu, #bgColorDropdownMenu').on('click', 'span', function () {\r\n        let $this = $(this);\r\n        let codeType = $this.parent().is('#bgColorDropdownMenu') ? 'backcolor' : 'color';\r\n        let color = $this.data('color');\r\n        let selText = Util.getSelText(textArea);\r\n        let code = `[${codeType}=${color}]${selText}[/${codeType}]`;\r\n        Util.addCode(textArea, code, selText);\r\n        textArea.focus();\r\n    });\r\n};\r\n\r\n/**\r\n * 检查发帖表单\r\n */\r\nexport const checkPostForm = function () {\r\n    $('#postForm').submit(function () {\r\n        let $postType = $('#postType');\r\n        if ($postType.length > 0 && !$postType.val()) {\r\n            alert('没有选择主题分类');\r\n            $postType.focus();\r\n            return false;\r\n        }\r\n\r\n        let $postTitle = $('#postTitle');\r\n        if ($postTitle.length > 0) {\r\n            let length = Util.getStrByteLen($postTitle.val());\r\n            if (!length) {\r\n                alert('标题不能为空');\r\n                $postTitle.focus();\r\n                return false;\r\n            }\r\n            else if (length > 100) {\r\n                alert('标题超过最大长度 100 个字节');\r\n                $postTitle.focus();\r\n                return false;\r\n            }\r\n        }\r\n\r\n        let $voteItemContent = $('#voteItemContent');\r\n        if ($voteItemContent.length > 0) {\r\n            if (!$voteItemContent.val().trim()) {\r\n                alert('投票选项不能为空');\r\n                $voteItemContent.focus();\r\n                return false;\r\n            }\r\n        }\r\n\r\n        let $postContent = $('#postContent');\r\n        if ($postContent.length > 0) {\r\n            let length = Util.getStrByteLen($postContent.val().trim());\r\n            if (length < 12) {\r\n                alert('文章内容少于 12 个字节');\r\n                $postContent.focus();\r\n                return false;\r\n            }\r\n            else if (length > 50000) {\r\n                alert('文章内容大于 50000 个字节');\r\n                $postContent.focus();\r\n                return false;\r\n            }\r\n        }\r\n\r\n        let $postGjc = $('#postGjc');\r\n        if ($postGjc.length > 0 && pageInfo.action === 'new' && !$postGjc.val().trim()) {\r\n            alert('请在内容文本框的下方填写关键词，以方便搜索，也可以在标题中选择任意一个词填入');\r\n            $postGjc.focus();\r\n            return false;\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * 处理附件按钮\r\n */\r\nexport const handleAttachBtns = function () {\r\n    $(document).on('click', '.attach-area a[data-action]', function (e) {\r\n        e.preventDefault();\r\n        let $this = $(this);\r\n        let $area = $this.closest('.attach-area');\r\n        let action = $this.data('action');\r\n        let id = $area.data('id');\r\n        if (!id) return;\r\n        if (action === 'insert') {\r\n            let type = $this.data('type');\r\n            let textArea = $('#postContent').get(0);\r\n            let code = `[${type === 'new' ? 'upload' : 'attachment'}=${id}]`;\r\n            Util.addCode(textArea, code);\r\n            textArea.focus();\r\n        }\r\n        else if (action === 'update') {\r\n            $area.find('.attach-info').prop('hidden', true).after(\r\n                `<label><input name=\"replace_${id}\" type=\"file\" aria-label=\"选择附件\"></label>`\r\n            );\r\n            $this.data('action', 'cancel').text('取消').blur();\r\n            if (!$(document).data('attachUpdateAlert')) {\r\n                alert('本反向代理服务器为了提高性能对图片设置了缓存，更新附件图片后可能需等待最多30分钟才能看到效果');\r\n                $(document).data('attachUpdateAlert', true);\r\n            }\r\n        }\r\n        else if (action === 'cancel') {\r\n            $area.find('.attach-info').prop('hidden', false).next('label').remove();\r\n            $this.data('action', 'update').text('更新').blur();\r\n        }\r\n        else if (action === 'delete') {\r\n            $area.remove();\r\n        }\r\n    });\r\n\r\n    $(document).on('change', '[type=\"file\"]', function () {\r\n        let $this = $(this);\r\n        let matches = /\\.(\\w+)$/.exec($this.val());\r\n        if (!matches || !['jpg', 'gif', 'png', 'torrent'].includes(matches[1].toLowerCase())) {\r\n            alert('附件类型不匹配');\r\n            return;\r\n        }\r\n\r\n        let type = $this.data('type');\r\n        if (type === 'new') {\r\n            $this.removeData('type').parent().next().prop('hidden', false);\r\n\r\n            let $newAttachArea = $('#newAttachArea');\r\n            let totalNum = $newAttachArea.find('[type=\"file\"]').length;\r\n            if (totalNum >= 5) return;\r\n            let $lastAttachArea = $newAttachArea.find('[type=\"file\"]:last').closest('.attach-area');\r\n            let id = parseInt($lastAttachArea.data('id'));\r\n            if (!id) return;\r\n            id++;\r\n            $(`\r\n<div class=\"form-group row font-size-sm attach-area\" data-id=\"${id}\">\r\n  <div class=\"col-xs-12 col-form-label\">\r\n    <label>\r\n      <input name=\"attachment_${id}\" data-type=\"new\" type=\"file\" aria-label=\"选择附件\">\r\n    </label>\r\n    <span hidden>\r\n      <a data-action=\"insert\" data-type=\"new\" href=\"#\">插入</a>&nbsp;\r\n      <a data-action=\"delete\" href=\"#\">删除</a>\r\n    </span>\r\n  </div>\r\n  <div class=\"col-xs-4\">\r\n    <label class=\"sr-only\" for=\"atc_downrvrc${id}\">神秘系数</label>\r\n    <input class=\"form-control form-control-sm\" id=\"atc_downrvrc${id}\" name=\"atc_downrvrc${id}\" data-toggle=\"tooltip\" \r\ntype=\"number\" value=\"0\" min=\"0\" title=\"神秘系数\" placeholder=\"神秘系数\">\r\n  </div>\r\n  <div class=\"col-xs-8\">\r\n    <label class=\"sr-only\" for=\"atc_desc${id}\">描述</label>\r\n    <input class=\"form-control form-control-sm\" id=\"atc_desc${id}\" name=\"atc_desc${id}\" data-toggle=\"tooltip\" type=\"text\" \r\ntitle=\"描述\" placeholder=\"描述\">\r\n  </div>\r\n</div>\r\n`).insertAfter($lastAttachArea).find('[data-toggle=\"tooltip\"]').tooltip({'container': 'body'});\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * 插入表情代码\r\n * @param {jQuery} $node 想要绑定的节点的jQuery对象\r\n */\r\nexport const addSmileCode = function ($node) {\r\n    $('.smile-panel').on('click', 'img', function () {\r\n        $('.smile-panel').addClass('open');\r\n        let textArea = $node.get(0);\r\n        if (!textArea) return;\r\n        let code = `[s:${$(this).data('id')}]`;\r\n        Util.addCode(textArea, code, '');\r\n        textArea.blur();\r\n    }).parent().on('shown.bs.dropdown', function () {\r\n        $('.smile-panel img').each(function () {\r\n            let $this = $(this);\r\n            if (!$this.attr('src')) {\r\n                $this.attr('src', $this.data('src'));\r\n            }\r\n        });\r\n    }).on('hide.bs.dropdown', function (e) {\r\n        let $relatedTarget = $(e.relatedTarget);\r\n        if (!$relatedTarget.data('open')) $relatedTarget.removeData('open');\r\n        else return e.preventDefault();\r\n    });\r\n\r\n    $('#smileDropdownBtn').click(function () {\r\n        let $this = $(this);\r\n        $this.data('open', !$this.data('open'));\r\n    });\r\n};\r\n","'use strict';\r\nimport * as Util from './util';\r\nimport {read as readConfig, write as writeConfig} from './config';\r\n\r\n/**\r\n * 处理主菜单\r\n */\r\nexport const handleMainMenu = function () {\r\n    $('#mainMenuTogglerBtn').click(function () {\r\n        $('#mainMenu').css('max-height', document.documentElement.clientHeight - 49 + 'px');\r\n    });\r\n};\r\n\r\n/**\r\n * 处理滚动到页顶/页底按钮\r\n */\r\nexport const handleRollToTopOrBottomBtn = function () {\r\n    $(window).scroll(function () {\r\n        let $btn = $('#rollToTopOrBottom');\r\n        if ($(window).scrollTop() > 640) {\r\n            if ($btn.data('direction') === 'top') return;\r\n            $btn.data('direction', 'top').attr('aria-label', '滚动到页顶')\r\n                .find('i').removeClass('fa-chevron-down').addClass('fa-chevron-up');\r\n        }\r\n        else {\r\n            if ($btn.data('direction') === 'bottom') return;\r\n            $btn.data('direction', 'bottom').attr('aria-label', '滚动到页底')\r\n                .find('i').removeClass('fa-chevron-up').addClass('fa-chevron-down');\r\n        }\r\n    });\r\n\r\n    $('#rollToTopOrBottom').click(function () {\r\n        let scrollTop = $(this).data('direction') === 'bottom' ? $('body').height() : 0;\r\n        $('body, html').animate({scrollTop: scrollTop});\r\n    });\r\n};\r\n\r\n/**\r\n * 处理搜索对话框\r\n */\r\nexport const handleSearchDialog = function () {\r\n    let $searchDialog = $('#searchDialog');\r\n\r\n    $searchDialog.on('shown.bs.modal', function () {\r\n        $('#searchKeyword').select().focus();\r\n    }).find('form').submit(function () {\r\n        let $this = $(this);\r\n        let $searchKeyword = $this.find('#searchKeyword');\r\n        let searchType = $this.find('#searchType').val();\r\n        let keyword = $.trim($searchKeyword.val());\r\n        if (searchType === 'gjc') {\r\n            $this.attr('action', Util.makeUrl('gjc/' + keyword));\r\n        }\r\n        else if (searchType === 'username') {\r\n            $this.attr('action', Util.makeUrl('user/username/' + keyword));\r\n        }\r\n        else {\r\n            $this.attr('action', Util.makeUrl('search'));\r\n            $searchKeyword.attr('name', searchType === 'author' ? 'pwuser' : 'keyword');\r\n            if (searchType === 'title') {\r\n                if (keyword.length && Util.getStrByteLen(keyword) <= 2) {\r\n                    let $method = $this.find('input[name=\"method\"]');\r\n                    $method.val('OR');\r\n                    $searchKeyword.val(keyword + ' ' + Math.floor(new Date().getTime() / 1000));\r\n                    setTimeout(function () {\r\n                        $searchKeyword.val(keyword);\r\n                        $method.val('AND');\r\n                    }, 200);\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    $searchDialog.find('[name=\"searchRange\"]').on('click', function () {\r\n        let value = 'all';\r\n        if ($(this).val() === 'current') value = pageInfo.fid;\r\n        $searchDialog.find('[name=\"f_fid\"]').val(value);\r\n    });\r\n\r\n    let $current = $searchDialog.find('[name=\"searchRange\"][value=\"current\"]');\r\n    $searchDialog.find('#searchType').change(function () {\r\n        let searchType = $(this).val();\r\n        if (!$current.data('enabled')) return;\r\n        $current.prop('disabled', searchType === 'gjc' || searchType === 'username');\r\n    });\r\n\r\n    if (pageId === 'threadPage' || pageId === 'readPage') {\r\n        $current.prop('disabled', false).data('enabled', true).click();\r\n    }\r\n};\r\n\r\n\r\n/**\r\n * 处理版块列表面板\r\n */\r\nexport const handleForumPanel = function () {\r\n    if (Config.activeForumPanel1) {\r\n        $(`a[data-toggle=\"tab\"][href=\"${Config.activeForumPanel1}\"]`).tab('show');\r\n    }\r\n    if (Config.activeForumPanel2) {\r\n        $(`a[data-toggle=\"tab\"][href=\"${Config.activeForumPanel2}\"]`).tab('show');\r\n    }\r\n\r\n    $(document).on('shown.bs.tab', 'a[data-toggle=\"tab\"]', function (e) {\r\n        let $target = $(e.target);\r\n        let targetPanel = $target.attr('href');\r\n        if (!targetPanel.includes('ForumPanel')) return;\r\n        let typeName = '';\r\n        if (targetPanel === '#galgameForumPanel' || targetPanel === '#resourceForumPanel') typeName = 'activeForumPanel1';\r\n        else if (targetPanel === '#discussForumPanel' || targetPanel === '#acgForumPanel') typeName = 'activeForumPanel2';\r\n        if (typeName) {\r\n            readConfig();\r\n            Config[typeName] = $target.attr('href');\r\n            writeConfig();\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * 处理分页导航\r\n * @param {string} action 控制器\r\n */\r\nexport const handlePageNav = function (action) {\r\n    $(document).on('click', '.page-item.active > .page-link', function (e) {\r\n        e.preventDefault();\r\n        if (pageInfo.maxPageNum && pageInfo.maxPageNum <= 1) return;\r\n        let num = parseInt(\r\n            prompt(`要跳转到第几页？${pageInfo.maxPageNum ? `（共${pageInfo.maxPageNum}页）` : ''}`, pageInfo.currentPageNum)\r\n        );\r\n        if (num && num > 0) {\r\n            location.href = Util.makeUrl(action, 'page=' + num, true);\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * 绑定快速提交的快捷键\r\n * @param {jQuery} $node 想要绑定的节点的jQuery对象\r\n */\r\nexport const bindFastSubmitShortcutKey = function ($node) {\r\n    $node.keydown(function (e) {\r\n        if (e.keyCode === 13 && e.ctrlKey) {\r\n            $(this).closest('form').submit();\r\n        }\r\n    });\r\n};\r\n","'use strict';\r\nimport * as Util from './util';\r\nimport Const from './const';\r\nimport {read as readConfig, write as writeConfig} from './config';\r\n\r\n/**\r\n * 显示楼层跳转链接\r\n */\r\nexport const showFloorLink = function () {\r\n    $(document).on('click', '.floor-num', function (e) {\r\n        e.preventDefault();\r\n        prompt('本楼的跳转链接：', Util.getHostNameUrl() + $(this).attr('href'));\r\n    });\r\n};\r\n\r\n/**\r\n * 处理快速回复按钮\r\n */\r\nexport const handleFastReplyBtn = function () {\r\n    $(document).on('click', '.fast-reply-btn', function (e) {\r\n        e.preventDefault();\r\n        let $article = $(this).closest('article');\r\n        let floor = $article.data('floor');\r\n        let userName = $article.data('username');\r\n        $('#postGjc').val(userName);\r\n        let postContent = $('#postContent').get(0);\r\n        postContent.value = `[quote]回 ${floor}楼(${userName}) 的帖子[/quote]\\n`;\r\n        postContent.selectionStart = postContent.value.length;\r\n        postContent.selectionEnd = postContent.value.length;\r\n        postContent.focus();\r\n    });\r\n};\r\n\r\n/**\r\n * 处理屏蔽回帖按钮\r\n */\r\nexport const handleBlockFloorBtn = function () {\r\n    $(document).on('click', '.block-floor', () => confirm('确认要屏蔽该回帖？本操作不可恢复！（屏蔽后该回帖将对大家不可见）'));\r\n};\r\n\r\n/**\r\n * 处理购买帖子按钮\r\n */\r\nexport const handleBuyThreadBtn = function () {\r\n    $(document).on('click', '.buy-thread-btn', function (e) {\r\n        e.preventDefault();\r\n        let $this = $(this);\r\n        let pid = $this.data('pid');\r\n        let price = $this.data('price');\r\n        if (price > 5 && !confirm(`此贴售价${price}KFB，是否购买？`)) return;\r\n        location.href = Util.makeUrl('job/buytopic', `tid=${pageInfo.tid}&pid=${pid}&verify=${pageInfo.verify}`);\r\n    });\r\n};\r\n\r\n/**\r\n * 复制购买人名单\r\n */\r\nexport const copyBuyThreadList = function () {\r\n    $(document).on('change', '.buy-thread-list', function () {\r\n        let $this = $(this);\r\n        if ($this.val() !== 'copyList') return;\r\n        let list = $this.find('option').map(index => {\r\n            let name = $(this).text();\r\n            if (index === 0 || index === 1 || name === '-----------') return null;\r\n            else return name;\r\n        }).get().join('\\n');\r\n        if (!list) {\r\n            alert('暂时无人购买');\r\n            $this.get(0).selectedIndex = 0;\r\n            return;\r\n        }\r\n        $('#buyThreadListContent').val(list);\r\n        $('#buyThreadListDialog').modal('show');\r\n        $this.get(0).selectedIndex = 0;\r\n    });\r\n\r\n    $('#buyThreadListDialog').on('shown.bs.modal', function () {\r\n        $('#buyThreadListContent').select().focus();\r\n    });\r\n};\r\n\r\n/**\r\n * 处理楼层内的图片\r\n */\r\nexport const handleFloorImage = function () {\r\n    $(document).on('click', '.img', function () {\r\n        let $this = $(this);\r\n        if ($this.parent().is('a') || this.naturalWidth <= $this.closest('.read-content').width()) return;\r\n        location.href = $this.attr('src');\r\n    });\r\n};\r\n\r\n/**\r\n * 快速跳转到指定楼层\r\n */\r\nexport const fastGotoFloor = function () {\r\n    $('.fast-goto-floor').click(function (e) {\r\n        e.preventDefault();\r\n        if (!Config.perPageFloorNum) {\r\n            let floorNum = parseInt(\r\n                prompt('你的论坛设置里“文章列表每页个数”为多少（10、20、30）？\\n注：如修改了论坛中的此项设置，请访问账号设置页面即可自动同步本地设置', 10)\r\n            );\r\n            if ([10, 20, 30].includes(floorNum)) {\r\n                Config.perPageFloorNum = floorNum;\r\n                writeConfig();\r\n            }\r\n            else return;\r\n        }\r\n        let floor = parseInt(prompt('你要跳转到哪一层楼？'));\r\n        if (!floor || floor <= 0) return;\r\n        location.href = Util.makeUrl(\r\n            'read/index',\r\n            `tid=${pageInfo.tid}&page=${Math.floor(floor / Config.perPageFloorNum) + 1}&floor=${floor}`\r\n        );\r\n    });\r\n\r\n    if (pageInfo.floor && pageInfo.floor > 0) {\r\n        let hashName = $(`article[data-floor=\"${pageInfo.floor}\"]`).prev('a').attr('name');\r\n        if (hashName) {\r\n            location.hash = '#' + hashName;\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * 推帖子\r\n */\r\nexport const tuiThread = function () {\r\n    $('.tui-btn').click(function (e) {\r\n        e.preventDefault();\r\n        let $this = $(this);\r\n        if ($this.data('wait')) return;\r\n        $this.data('wait', true);\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: '/diy_read_tui.php',\r\n            data: `tid=${pageInfo.tid}&safeid=${pageInfo.safeId}`,\r\n            success: function (msg) {\r\n                let matches = /<span.+?\\+\\d+!<\\/span>\\s*(\\d+)/i.exec(msg);\r\n                if (matches) {\r\n                    let $num = $this.find('span:first');\r\n                    $num.text('+1');\r\n                    setTimeout(function () {\r\n                        $num.text(matches[1]);\r\n                    }, 1000);\r\n                }\r\n                else if (/已推过/.test(msg)) {\r\n                    alert('已推过');\r\n                }\r\n                else {\r\n                    alert('操作失败');\r\n                }\r\n            },\r\n            error: function () {\r\n                alert('操作失败');\r\n            },\r\n            complete: function () {\r\n                $this.removeData('wait');\r\n            }\r\n        });\r\n    });\r\n};\r\n\r\n/**\r\n * 复制代码\r\n */\r\nexport const copyCode = function () {\r\n    $(document).on('click', '.copy-code', function (e) {\r\n        e.preventDefault();\r\n        let $this = $(this);\r\n        let code = $this.data('code');\r\n        if (code) {\r\n            $this.text('复制代码').removeData('code');\r\n            $this.next('textarea').remove();\r\n            $this.after(`<pre class=\"pre-scrollable\">${code}</pre>`);\r\n        }\r\n        else {\r\n            let $pre = $this.next('pre');\r\n            let html = $pre.html();\r\n            $this.text('还原代码').data('code', html);\r\n            html = Util.decodeHtmlSpecialChar(html);\r\n            let height = $pre.height();\r\n            if (height < 50) height = 50;\r\n            if (height > 340) height = 340;\r\n            $pre.remove();\r\n            $(`<textarea class=\"form-control code-textarea\" style=\"height: ${height}px\" wrap=\"off\">${html}</textarea>`)\r\n                .insertAfter($this).select().focus();\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * 获取当前页面选中的多重引用数据\r\n * @returns {{}[]} 多重引用数据列表\r\n */\r\nconst getCheckedMultiQuoteData = function () {\r\n    let quoteList = [];\r\n    $('.multi-quote-check:checked').each(function () {\r\n        let $article = $(this).closest('article');\r\n        quoteList.push({floor: $article.data('floor'), pid: $article.data('pid'), userName: $article.data('username')});\r\n    });\r\n    return quoteList;\r\n};\r\n\r\n/**\r\n * 绑定多重引用复选框点击事件\r\n */\r\nexport const bindMultiQuoteCheckClick = function () {\r\n    $(document).on('click', '.multi-quote-check', function () {\r\n        let data = localStorage[Const.multiQuoteStorageName];\r\n        if (data) {\r\n            try {\r\n                data = JSON.parse(data);\r\n                if (!data || $.type(data) !== 'object' || $.isEmptyObject(data)) data = null;\r\n                else if (!('tid' in data) || data.tid !== pageInfo.tid || $.type(data.quoteList) !== 'object') data = null;\r\n            }\r\n            catch (ex) {\r\n                data = null;\r\n            }\r\n        }\r\n        else {\r\n            data = null;\r\n        }\r\n        let quoteList = getCheckedMultiQuoteData();\r\n        if (!data) {\r\n            localStorage.removeItem(Const.multiQuoteStorageName);\r\n            data = {tid: pageInfo.tid, quoteList: {}};\r\n        }\r\n        if (quoteList.length > 0) data.quoteList[pageInfo.currentPageNum] = quoteList;\r\n        else delete data.quoteList[pageInfo.currentPageNum];\r\n        localStorage[Const.multiQuoteStorageName] = JSON.stringify(data);\r\n    });\r\n\r\n    $('.multi-reply-btn').click(function (e) {\r\n        e.preventDefault();\r\n        handleMultiQuote(1);\r\n    });\r\n};\r\n\r\n/**\r\n * 处理多重回复和多重引用\r\n * @param {number} type 处理类型，1：多重回复；2：多重引用\r\n */\r\nconst handleMultiQuote = function (type = 1) {\r\n    let data = localStorage[Const.multiQuoteStorageName];\r\n    if (!data) return;\r\n    try {\r\n        data = JSON.parse(data);\r\n    }\r\n    catch (ex) {\r\n        return;\r\n    }\r\n    if (!data || $.type(data) !== 'object' || $.isEmptyObject(data)) return;\r\n    let {tid, quoteList} = data;\r\n    if (!pageInfo.tid || tid !== pageInfo.tid || $.type(quoteList) !== 'object') return;\r\n    if (type === 2 && !pageInfo.fid) return;\r\n    let list = [];\r\n    for (let data of Object.values(quoteList)) {\r\n        if ($.type(data) !== 'array') continue;\r\n        for (let quote of data) {\r\n            list.push(quote);\r\n        }\r\n    }\r\n    if (!list.length) {\r\n        localStorage.removeItem(Const.multiQuoteStorageName);\r\n        return;\r\n    }\r\n\r\n    let keywords = new Set();\r\n    let content = '';\r\n    if (type === 2) {\r\n        // 显示多重引用等待消息\r\n    }\r\n    for (let quote of list) {\r\n        if (!('floor' in quote) || !('pid' in quote)) continue;\r\n        keywords.add(quote.userName);\r\n        if (type === 2) {\r\n            // 处理多重引用\r\n        }\r\n        else {\r\n            content += `[quote]回 ${quote.floor}楼(${quote.userName}) 的帖子[/quote]\\n`;\r\n        }\r\n    }\r\n    $('input[name=\"diy_guanjianci\"]').val([...keywords].join(','));\r\n    $('#postForm').submit(function () {\r\n        localStorage.removeItem(Const.multiQuoteStorageName);\r\n    });\r\n    if (type === 1) $('#postContent').val(content).focus();\r\n};\r\n\r\n/**\r\n * 处理清除多重引用数据按钮\r\n * @param {number} type 处理类型，1：多重回复；2：多重引用\r\n */\r\nexport const handleClearMultiQuoteDataBtn = function (type = 1) {\r\n    $('.clear-multi-quote-data-btn').click(function (e) {\r\n        e.preventDefault();\r\n        localStorage.removeItem(Const.multiQuoteStorageName);\r\n        $('[name=\"diy_guanjianci\"]').val('');\r\n        if (type === 2) $('#textarea').val('');\r\n        else $('#postContent').val('');\r\n        alert('多重引用数据已被清除');\r\n    });\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * 设置Cookie\r\n * @param {string} name Cookie名称\r\n * @param {*} value Cookie值\r\n * @param {?Date} date Cookie有效期，留空则表示有效期为浏览器进程\r\n * @param {string} prefix Cookie名称前缀\r\n */\r\nexport const setCookie = function (name, value, date = null, prefix = pageInfo.cookiePrefix) {\r\n    document.cookie = `${prefix}${name}=${encodeURI(value)}${!date ? '' : ';expires=' + date.toUTCString()};path=/;`;\r\n};\r\n\r\n/**\r\n * 获取Cookie\r\n * @param {string} name Cookie名称\r\n * @param {string} prefix Cookie名称前缀\r\n * @returns {?string} Cookie值\r\n */\r\nexport const getCookie = function (name, prefix = pageInfo.cookiePrefix) {\r\n    let regex = new RegExp(`(^| )${prefix}${name}=([^;]*)(;|$)`);\r\n    let matches = document.cookie.match(regex);\r\n    if (!matches) return null;\r\n    else return decodeURI(matches[2]);\r\n};\r\n\r\n/**\r\n * 删除Cookie\r\n * @param {string} name Cookie名称\r\n * @param {string} prefix Cookie名称前缀\r\n */\r\nexport const deleteCookie = function (name, prefix = pageInfo.cookiePrefix) {\r\n    document.cookie = `${prefix}${name}=;expires=${getDate('-1d').toUTCString()};path=/;`;\r\n};\r\n\r\n/**\r\n * 获取在当前时间的基础上的指定（相对）时间量的Date对象\r\n * @param {string} value 指定（相对）时间量，+或-：之后或之前（相对于当前时间）；无符号：绝对值；Y：完整年份；y：年；M：月；d：天；h：小时；m：分；s：秒；ms：毫秒\r\n * @returns {?Date} 指定（相对）时间量的Date对象\r\n * @example\r\n * Tools.getDate('+2y') 获取2年后的Date对象\r\n * Tools.getDate('+3M') 获取3个月后的Date对象\r\n * Tools.getDate('-4d') 获取4天前的Date对象\r\n * Tools.getDate('5h') 获取今天5点的Date对象（其它时间量与当前时间一致）\r\n * Tools.getDate('2015Y') 获取年份为2015年的Date对象\r\n */\r\nexport const getDate = function (value) {\r\n    let date = new Date();\r\n    let matches = /^(-|\\+)?(\\d+)([a-zA-Z]{1,2})$/.exec(value);\r\n    if (!matches) return null;\r\n    let flag = typeof matches[1] === 'undefined' ? 0 : (matches[1] === '+' ? 1 : -1);\r\n    let increment = flag === -1 ? -parseInt(matches[2]) : parseInt(matches[2]);\r\n    let unit = matches[3];\r\n    switch (unit) {\r\n        case 'Y':\r\n            date.setFullYear(increment);\r\n            break;\r\n        case 'y':\r\n            date.setFullYear(flag === 0 ? increment : date.getFullYear() + increment);\r\n            break;\r\n        case 'M':\r\n            date.setMonth(flag === 0 ? increment : date.getMonth() + increment);\r\n            break;\r\n        case 'd':\r\n            date.setDate(flag === 0 ? increment : date.getDate() + increment);\r\n            break;\r\n        case 'h':\r\n            date.setHours(flag === 0 ? increment : date.getHours() + increment);\r\n            break;\r\n        case 'm':\r\n            date.setMinutes(flag === 0 ? increment : date.getMinutes() + increment);\r\n            break;\r\n        case 's':\r\n            date.setSeconds(flag === 0 ? increment : date.getSeconds() + increment);\r\n            break;\r\n        case 'ms':\r\n            date.setMilliseconds(flag === 0 ? increment : date.getMilliseconds() + increment);\r\n            break;\r\n        default:\r\n            return null;\r\n    }\r\n    return date;\r\n};\r\n\r\n/**\r\n * 获取指定字符串的字节长度（1个GBK字符按2个字节来算）\r\n * @param {string} str 指定字符串\r\n * @returns {number} 字符串的长度\r\n */\r\nexport const getStrByteLen = function (str) {\r\n    let len = 0;\r\n    let sLen = str.includes('\\n') ? str.replace(/\\r?\\n/g, '_').length : str.length;\r\n    let cLen = 2;\r\n    for (let i = 0; i < sLen; i++) {\r\n        len += str.charCodeAt(i) < 0 || str.charCodeAt(i) > 255 ? cLen : 1;\r\n    }\r\n    return len;\r\n};\r\n\r\n/**\r\n * 获取当前域名的URL\r\n * @returns {string} 当前域名的URL\r\n */\r\nexport const getHostNameUrl = function () {\r\n    return location.protocol + '//' + location.host;\r\n};\r\n\r\n/**\r\n * 添加BBCode\r\n * @param textArea 文本框\r\n * @param {string} code BBCode\r\n * @param {string} selText 选择文本\r\n */\r\nexport const addCode = function (textArea, code, selText = '') {\r\n    let startPos = selText === '' ? code.indexOf(']') + 1 : code.indexOf(selText);\r\n    if (typeof textArea.selectionStart !== 'undefined') {\r\n        let prePos = textArea.selectionStart;\r\n        textArea.value = textArea.value.substr(0, prePos) + code + textArea.value.substr(textArea.selectionEnd);\r\n        textArea.selectionStart = prePos + startPos;\r\n        textArea.selectionEnd = prePos + startPos + selText.length;\r\n    }\r\n    else {\r\n        textArea.value += code;\r\n    }\r\n};\r\n\r\n/**\r\n * 获取选择文本\r\n * @param textArea 文本框\r\n * @returns {string} 选择文本\r\n */\r\nexport const getSelText = function (textArea) {\r\n    return textArea.value.substr(textArea.selectionStart, textArea.selectionEnd - textArea.selectionStart);\r\n};\r\n\r\n/**\r\n * 从URL查询字符串提取参数对象\r\n * @param {string} str URL查询字符串\r\n * @returns {Map} 参数集合\r\n */\r\nexport const extractQueryStr = function (str) {\r\n    let param = new Map();\r\n    for (let value of str.split('&')) {\r\n        if (!value) continue;\r\n        let arr = value.split('=');\r\n        param.set(arr[0], arr[1] !== undefined ? arr[1] : '');\r\n    }\r\n    return param;\r\n};\r\n\r\n/**\r\n * 从参数对象中创建URL查询字符串\r\n * @param {Map} map 参数集合\r\n * @returns {string} URL查询字符串\r\n */\r\nexport const buildQueryStr = function (map) {\r\n    let queryStr = '';\r\n    for (let [key, value] of map) {\r\n        queryStr += '/' + key + '/' + value;\r\n    }\r\n    return queryStr;\r\n};\r\n\r\n/**\r\n * 生成指定的URL\r\n * @param {string} action 控制器（小写）\r\n * @param {string} param 查询参数\r\n * @param {boolean} includeOtherParam 是否包括当前页面的其它查询参数\r\n * @returns {string} URL 最终的URL\r\n */\r\nexport const makeUrl = function (action, param = '', includeOtherParam = false) {\r\n    let url = '';\r\n    let paramList = extractQueryStr(param);\r\n    if (includeOtherParam) {\r\n        paramList = new Map([...extractQueryStr(pageInfo.urlParam).entries(), ...paramList.entries()]);\r\n    }\r\n    if (location.pathname.startsWith(pageInfo.baseFile)) url = pageInfo.baseFile;\r\n    else url = pageInfo.rootPath.substr(0, pageInfo.rootPath.length - 1);\r\n    let queryStr = '';\r\n    if (paramList.size > 0) queryStr = buildQueryStr(paramList);\r\n    if (pageInfo.urlType === 2) url += '?s=/' + action + queryStr;\r\n    else url += '/' + action + queryStr;\r\n    return url;\r\n};\r\n\r\n/**\r\n * 解码HTML特殊字符\r\n * @param {string} str 待解码的字符串\r\n * @returns {string} 解码后的字符串\r\n */\r\nexport const decodeHtmlSpecialChar = function (str) {\r\n    if (!str.length) return '';\r\n    return str.replace(/<br\\s*\\/?>/gi, '\\n')\r\n        .replace(/&quot;/gi, '\\\"')\r\n        .replace(/&#39;/gi, '\\'')\r\n        .replace(/&nbsp;/gi, ' ')\r\n        .replace(/&gt;/gi, '>')\r\n        .replace(/&lt;/gi, '<')\r\n        .replace(/&amp;/gi, '&');\r\n};\r\n\r\n/**\r\n * 全选\r\n * @param {jQuery} $nodes 想要全选的节点的jQuery对象\r\n */\r\nexport const selectAll = function ($nodes) {\r\n    $nodes.prop('checked', true);\r\n};\r\n\r\n/**\r\n * 反选\r\n * @param {jQuery} $nodes 想要反选的节点的jQuery对象\r\n */\r\nexport const selectReverse = function ($nodes) {\r\n    $nodes.each(function () {\r\n        let $this = $(this);\r\n        $this.prop('checked', !$this.prop('checked'));\r\n    });\r\n};\r\n\r\n/**\r\n * 显示字段验证消息\r\n * @param {jQuery} $node 验证字段的jQuery对象\r\n * @param {string} type 验证类型\r\n * @param {string} msg 验证消息\r\n */\r\nexport const showValidationMsg = function ($node, type, msg = '') {\r\n    if (type === 'error') type = 'danger';\r\n    $node.removeClass('form-control-success form-control-warning form-control-danger');\r\n    let $parent = $node.parent();\r\n    $parent.removeClass('has-success has-warning has-danger');\r\n    if ($.inArray(type, ['success', 'warning', 'danger'] > -1)) {\r\n        $node.addClass('form-control-' + type).parent().addClass('has-' + type);\r\n    }\r\n    let $feedback = $parent.find('.form-control-feedback');\r\n    if (type === 'wait') {\r\n        $feedback.html(`<span class=\"text-muted\"><i class=\"fa fa-spinner fa-spin\" aria-hidden=\"true\"></i> ${msg}</span>`);\r\n    }\r\n    else {\r\n        $feedback.text(msg);\r\n    }\r\n};\r\n"]}
{"version":3,"sources":["/public/static/dist/js/node_modules/.6.0.2@browser-pack/_prelude.js","/public/static/dist/js/public/static/src/js/app.js","/public/static/dist/js/public/static/src/js/module/config.js","/public/static/dist/js/public/static/src/js/module/configDialog.js","/public/static/dist/js/public/static/src/js/module/const.js","/public/static/dist/js/public/static/src/js/module/dialog.js","/public/static/dist/js/public/static/src/js/module/index.js","/public/static/dist/js/public/static/src/js/module/msg.js","/public/static/dist/js/public/static/src/js/module/other.js","/public/static/dist/js/public/static/src/js/module/post.js","/public/static/dist/js/public/static/src/js/module/public.js","/public/static/dist/js/public/static/src/js/module/read.js","/public/static/dist/js/public/static/src/js/module/script.js","/public/static/dist/js/public/static/src/js/module/util.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_config","_util","_const","_msg","_dialog","_script","_public","Public","_index","Index","_read","Read","_post","Post","_other","Other","_configDialog","window","pageId","$","attr","exportModule","Util","Const","default","Msg","Dialog","Script","Conf","readConfig","read","writeConfig","write","ex","console","log","init","startTime","Date","validateRegisterField","Config","customCssEnabled","customCssContent","append","preventCloseWindow","handleMainMenu","handleMainMenuLink","showSidebarBtnGroupEnabled","showSidebarBtnGroup","handleSidebarRollBtn","handleSearchDialog","fillCommonForumPanel","showEditCommonForumDialog","handlePageInput","handleAtTipsBtn","handleIndexThreadPanel","handleSelectBgImage","handleSelectBgColor","handleCustomBgStyle","gotoFloor","threadContentFontSize","handleFastGotoFloorBtn","handleTuiThreadBtn","handleCopyFloorLinkBtn","handleFastReplyBtn","handleBlockFloorBtn","handleBuyThreadBtn","copyBuyThreadList","handleFloorImage","checkPostForm","bindFastSubmitShortcutKey","handleCopyCodeBtn","addSmileCode","bindMultiQuoteCheckClick","handleClearMultiQuoteDataBtn","click","handleMultiQuote","userMemoEnabled","addUserMemo","handleEditorBtns","handleAttachBtns","Info","multiQuote","highlightUnReadAtTipsMsg","handleUserPageBtns","handleGameIntroSearchArea","tuiGameIntro","bindFavorPageBtnsClick","bindFriendPageBtnsClick","syncPerPageFloorNum","assignBirthdayField","handleUploadAvatarFileBtn","transferKfbAlert","bindMessageActionBtnsClick","blockUserEnabled","blockUsers","blockThreadEnabled","blockThread","followUserEnabled","followUsers","kfSmileEnhanceExtensionEnabled","includes","resTimestamp","tooltip","container","document","ready","name","activeNewReplyPanel","activeTopRecommendPanel","commonForumList","showSidebarRollBtnEnabled","showSidebarMainMenuBtnEnabled","showSidebarForumListBtnEnabled","showSidebarSearchBtnEnabled","showSidebarHomePageBtnEnabled","perPageFloorNum","userMemoList","defShowMsgDuration","followUserList","highlightFollowUserThreadInHPEnabled","highlightFollowUserThreadLinkEnabled","blockUserDefaultType","blockUserAtTipsEnabled","blockUserForumType","blockUserFidList","blockUserList","blockThreadDefForumType","blockThreadDefFidList","blockThreadList","extend","options","localStorage","JSON","parse","type","isEmptyObject","normalize","getDifferenceSetOfObject","stringify","clear","removeItem","settings","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Object","entries","Symbol","iterator","next","done","_step$value","_slicedToArray","value","key","err","return","show","dialogName","bodyContent","footerContent","$dialog","create","submit","preventDefault","getMainConfigValue","close","on","$this","this","hasClass","data","showRunCommandDialog","showUserMemoDialog","showCustomCssDialog","showFollowUserDialog","showBlockUserDialog","showBlockThreadDialog","find","prompt","parseInt","isNaN","clearTmpData","alert","end","confirm","location","reload","showImportOrExportSettingDialog","setMainConfigValue","each","is","prop","val","Boolean","trim","arguments","_const2","test","deleteCookie","multiQuoteStorageName","$cmd","$result","content","_Script$runCmd","runCmd","response","focus","keydown","ctrlKey","keyCode","select","$userMemoList","split","line","_line$split","_line$split2","user","_line$split2$","memo","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_step2$value","$content","$followUserList","addFollowUser","appendTo","inFollowOrBlockUserList","push","$checked","remove","$addUser","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","showCommonImportOrExportConfigDialog","selectAll","selectInverse","closest","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","$blockUserList","addBlockUser","Set","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","fid","add","concat","_toConsumableArray","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","change","triggerHandler","join","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","$blockThreadList","addBlockThread","keyWord","userType","userList","fidType","fidList","verify","flag","$txtKeyWord","eval","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","newObj","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","size","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","html","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_iterator11","_step11","includeUser","excludeUser","includeFid","excludeFid","storagePrefix","atTipsTimeCookieName","prevAtTipsTimeCookieName","bgStyleCookieName","availableForumList","resize","id","title","checked","isOpera","isEdge","not","removeClass","addClass","$focus","fadeIn","css","height","outerHeight","fadeOut","parent","off","$atTips","getCookie","time","cookieValue","setCookie","currentDate","getDate","tab","$target","target","targetPanel","typeName","fileName","path","color","$bg","toLowerCase","replace","duration","msg","clickable","preventable","$container","isFirst","destroy","$msg","text","hide","stopPropagation","slideDown","setTimeout","wait","slideUp","gjc","userName","timeString","prevString","index","curString","keyword","searchType","cookieName","url","makeUrl","ajax","success","$num","num","error","complete","removeData","dataType","$form","action","matches","exec","year","month","day","syncConfig","transferKfb","fixedDeposit","currentDeposit","_ret","v","_typeof","_$checked","showValidationMsg","post","_ref","username","fail","trigger","$area","str","splice","textArea","get","_matches","selText","getSelText","addCode","codeType","$postType","$postTitle","getStrByteLen","$voteItemContent","$postContent","_length","$postGjc","after","blur","$newAttachArea","totalNum","$lastAttachArea","insertAfter","$node","$relatedTarget","relatedTarget","_data","tid","quoteList","list","values","_data2","Array","isArray","quote","keywords","clearQueue","floor","pid","queue","getTime","postContent","$countdownNum","dequeue","ConfigDialog","maxHeight","documentElement","clientHeight","scroll","$btn","scrollTop","animate","$searchDialog","$searchKeyword","$method","Math","$current","$currentBox","disabled","maxPageNum","excludeParams","currentPageNum","href","commonForumListHtml","availableForumListHtml","_loop","elem","$dragulaScriptPath","dragulaScriptPath","getScript","dragula","revertOnSpill","children","_step3$value","_step3$value$","_fid","addEventListener","returnValue","configName","callback","callbackAfterSubmit","regex1","RegExp","regex2","isBlock","_step5$value","regex","$topFloor","getCheckedMultiQuoteData","link","getHostNameUrl","copyText","$article","selectionStart","selectionEnd","price","$wait","map","repeat","selectedIndex","modal","naturalWidth","width","hashName","prev","hash","safeId","$pre","decodeHtmlSpecialChar","keys","cmd","isOutput","isError","String","date","prefix","uid","cookie","encodeURI","toUTCString","match","decodeURI","increment","unit","setFullYear","getFullYear","setMonth","getMonth","setDate","setHours","getHours","setMinutes","getMinutes","setSeconds","getSeconds","setMilliseconds","getMilliseconds","extractQueryStr","len","cLen","charCodeAt","protocol","host","startPos","indexOf","prePos","substring","params","Map","param","_param$split","_param$split2","set","buildQueryStr","queryStr","urlType","deepEqual","includeOtherParam","paramList","urlParam","delete","startsWith","pathname","baseFile","rootPath","getQueryParam","$nodes","$parent","inArray","$feedback","b","c","$source","getSelection","selectAllChildren","result","execCommand","removeAllRanges","findIndex","opera","navigator","appVersion"],"mappings":"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","file":"app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\r\nimport {init as initConfig} from './module/config';\r\nimport * as Util from './module/util';\r\nimport Const from './module/const';\r\nimport * as Msg from './module/msg';\r\nimport * as Dialog from './module/dialog';\r\nimport * as Script from './module/script';\r\nimport * as Public from './module/public';\r\nimport * as Index from './module/index';\r\nimport * as Read from './module/read';\r\nimport * as Post from './module/post';\r\nimport * as Other from './module/other';\r\nimport * as ConfigDialog from './module/configDialog';\r\n\r\n// ID\r\nwindow.pageId = $('body').attr('id');\r\n\r\n/**\r\n * \r\n */\r\nconst exportModule = function () {\r\n    try {\r\n        window.Util = require('./module/util');\r\n        window.Const = require('./module/const').default;\r\n        window.Msg = require('./module/msg');\r\n        window.Dialog = require('./module/dialog');\r\n        window.Script = require('./module/script');\r\n        window.Public = require('./module/public');\r\n        window.Index = require('./module/index');\r\n        window.Read = require('./module/read');\r\n        window.Post = require('./module/post');\r\n        window.Other = require('./module/other');\r\n        const Conf = require('./module/config');\r\n        window.readConfig = Conf.read;\r\n        window.writeConfig = Conf.write;\r\n    }\r\n    catch (ex) {\r\n        console.log(ex);\r\n    }\r\n};\r\n\r\n/**\r\n * \r\n */\r\nconst init = function () {\r\n    if (pageId === 'loginPage') return;\r\n    let startTime = new Date();\r\n    exportModule();\r\n    if (pageId === 'registerPage') {\r\n        Other.validateRegisterField();\r\n        return;\r\n    }\r\n    initConfig();\r\n\r\n    if (Config.customCssEnabled && Config.customCssContent) $('head').append(`<style>${Config.customCssContent}</style>`);\r\n    Public.preventCloseWindow();\r\n    Public.handleMainMenu();\r\n    Public.handleMainMenuLink();\r\n    if (Config.showSidebarBtnGroupEnabled) Public.showSidebarBtnGroup();\r\n    Public.handleSidebarRollBtn();\r\n    Public.handleSearchDialog();\r\n    Public.fillCommonForumPanel();\r\n    Public.showEditCommonForumDialog();\r\n    if ($('.page-input').length > 0) {\r\n        Public.handlePageInput();\r\n    }\r\n    if (pageId === 'indexPage') {\r\n        Index.handleAtTipsBtn();\r\n        Index.handleIndexThreadPanel();\r\n        Index.handleSelectBgImage();\r\n        Index.handleSelectBgColor();\r\n        Index.handleCustomBgStyle();\r\n    }\r\n    else if (pageId === 'readPage') {\r\n        Read.gotoFloor();\r\n        if (Config.threadContentFontSize > 0)\r\n            $('head').append(`<style>.read-content { font-size: ${Config.threadContentFontSize}px; }</style>`);\r\n        Read.handleFastGotoFloorBtn();\r\n        Read.handleTuiThreadBtn();\r\n        Read.handleCopyFloorLinkBtn();\r\n        Read.handleFastReplyBtn();\r\n        Read.handleBlockFloorBtn();\r\n        Read.handleBuyThreadBtn();\r\n        Read.copyBuyThreadList();\r\n        Read.handleFloorImage();\r\n        Post.checkPostForm();\r\n        Public.bindFastSubmitShortcutKey($('#postContent'));\r\n        Read.handleCopyCodeBtn();\r\n        Post.addSmileCode($('#postContent'));\r\n        Read.bindMultiQuoteCheckClick();\r\n        Post.handleClearMultiQuoteDataBtn();\r\n        $('.multi-reply-btn').click(() => Post.handleMultiQuote(1));\r\n        if (Config.userMemoEnabled) Read.addUserMemo();\r\n    }\r\n    else if (pageId === 'postPage') {\r\n        Post.checkPostForm();\r\n        Public.bindFastSubmitShortcutKey($('#postContent'));\r\n        Post.handleEditorBtns();\r\n        Post.addSmileCode($('#postContent'));\r\n        Post.handleAttachBtns();\r\n        Post.handleClearMultiQuoteDataBtn();\r\n        if (Info.multiQuote) Post.handleMultiQuote(2);\r\n    }\r\n    else if (pageId === 'gjcPage') {\r\n        Other.highlightUnReadAtTipsMsg();\r\n    }\r\n    else if (pageId === 'userPage') {\r\n        Other.handleUserPageBtns();\r\n    }\r\n    else if (pageId === 'gameIntroSearchPage') {\r\n        Other.handleGameIntroSearchArea();\r\n    }\r\n    else if (pageId === 'gameIntroPage') {\r\n        Other.tuiGameIntro('game');\r\n    }\r\n    else if (pageId === 'gameIntroCompanyPage') {\r\n        Other.tuiGameIntro('company');\r\n    }\r\n    else if (pageId === 'gameIntroTypePage') {\r\n        Other.tuiGameIntro('type');\r\n    }\r\n    else if (pageId === 'gameIntroPropertyPage') {\r\n        Other.tuiGameIntro('property');\r\n    }\r\n    else if (pageId === 'favorPage') {\r\n        Other.bindFavorPageBtnsClick();\r\n    }\r\n    else if (pageId === 'friendPage') {\r\n        Other.bindFriendPageBtnsClick();\r\n    }\r\n    else if (pageId === 'modifyPage') {\r\n        Other.syncPerPageFloorNum();\r\n        Other.assignBirthdayField();\r\n        Other.handleUploadAvatarFileBtn();\r\n    }\r\n    else if (pageId === 'bankPage') {\r\n        Other.transferKfbAlert();\r\n    }\r\n    else if (pageId === 'messagePage') {\r\n        Other.bindMessageActionBtnsClick();\r\n    }\r\n    else if (pageId === 'readMessagePage') {\r\n        Read.handleFloorImage();\r\n        Read.handleCopyCodeBtn();\r\n    }\r\n    else if (pageId === 'writeMessagePage') {\r\n        Public.bindFastSubmitShortcutKey($('#msgContent'));\r\n        Post.addSmileCode($('#msgContent'));\r\n    }\r\n    else if (pageId === 'messageBannedPage') {\r\n        Public.bindFastSubmitShortcutKey($('[name=\"banidinfo\"]'));\r\n    }\r\n    if (Config.blockUserEnabled) Public.blockUsers();\r\n    if (Config.blockThreadEnabled) Public.blockThread();\r\n    if (Config.followUserEnabled) Public.followUsers();\r\n    if (Config.kfSmileEnhanceExtensionEnabled && ['readPage', 'postPage', 'writeMessagePage'].includes(pageId)) {\r\n        $('body').append(\r\n            `<script src=\"/static/dist/js/userScript/KfEmotion.min.user.js?ts=${Info.resTimestamp}\"></script>`\r\n        );\r\n    }\r\n\r\n    $('[data-toggle=\"tooltip\"]').tooltip({'container': 'body'});\r\n    console.log(`${new Date() - startTime}ms`);\r\n};\r\n\r\n$(document).ready(init);\r\n","/*  */\r\n'use strict';\r\nimport * as Util from './util';\r\n\r\n// \r\nconst name = 'kf_config';\r\n\r\n/**\r\n * \r\n */\r\nexport const Config = {\r\n    // \r\n    activeNewReplyPanel: '#galgameNewReplyPanel',\r\n    // \r\n    activeTopRecommendPanel: '#galgameTopRecommendPanel',\r\n    // \r\n    commonForumList: [],\r\n\r\n    // truefalse\r\n    showSidebarBtnGroupEnabled: true,\r\n    // /truefalse\r\n    showSidebarRollBtnEnabled: true,\r\n    // truefalse\r\n    showSidebarMainMenuBtnEnabled: false,\r\n    // truefalse\r\n    showSidebarForumListBtnEnabled: true,\r\n    // truefalse\r\n    showSidebarSearchBtnEnabled: false,\r\n    // truefalse\r\n    showSidebarHomePageBtnEnabled: true,\r\n\r\n    // \r\n    perPageFloorNum: 10,\r\n    // 014px\r\n    threadContentFontSize: 0,\r\n    // truefalse\r\n    userMemoEnabled: false,\r\n    // {'':''}{'':'','':''}\r\n    userMemoList: {},\r\n    // truefalse\r\n    kfSmileEnhanceExtensionEnabled: false,\r\n\r\n    // -1\r\n    defShowMsgDuration: -1,\r\n    // CSStruefalse\r\n    customCssEnabled: false,\r\n    // CSS\r\n    customCssContent: '',\r\n\r\n    // truefalse\r\n    followUserEnabled: false,\r\n    // [{name:''}][{name:''}, {name:''}]\r\n    followUserList: [],\r\n    // truefalse\r\n    highlightFollowUserThreadInHPEnabled: true,\r\n    // truefalse\r\n    highlightFollowUserThreadLinkEnabled: true,\r\n    // truefalse\r\n    blockUserEnabled: false,\r\n    // 012\r\n    blockUserDefaultType: 0,\r\n    // @truefalse\r\n    blockUserAtTipsEnabled: true,\r\n    // 012\r\n    blockUserForumType: 0,\r\n    // ID[16, 41, 67, 57, 84, 92, 127, 68, 163, 182, 9]\r\n    blockUserFidList: [],\r\n    // [{name:'', type:}][{name:'', type:0}, {name:'', type:1}]\r\n    blockUserList: [],\r\n    // truefalse\r\n    blockThreadEnabled: false,\r\n    // 012\r\n    blockThreadDefForumType: 0,\r\n    // ID[16, 41, 67, 57, 84, 92, 127, 68, 163, 182, 9]\r\n    blockThreadDefFidList: [],\r\n    // [{keyWord:'', includeUser:[''], excludeUser:[''], includeFid:[ID], excludeFid:[ID]}]\r\n    // '/abc/'includeUserexcludeUserincludeFidexcludeFid\r\n    // [{keyWord: '1'}, {keyWord: '2', includeUser:['1', '2'], includeFid: [5, 56]}, {keyWord: '/A.*B/i', excludeFid: [92, 127, 68]}]\r\n    blockThreadList: [],\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const init = function () {\r\n    window.Config = $.extend(true, {}, Config);\r\n    read();\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const read = function () {\r\n    let options = localStorage[name];\r\n    if (!options) return;\r\n    try {\r\n        options = JSON.parse(options);\r\n    }\r\n    catch (ex) {\r\n        return;\r\n    }\r\n    if (!options || $.type(options) !== 'object' || $.isEmptyObject(options)) return;\r\n    options = normalize(options);\r\n    window.Config = $.extend(true, {}, Config, options);\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const write = function () {\r\n    let options = Util.getDifferenceSetOfObject(Config, window.Config);\r\n    localStorage[name] = JSON.stringify(options);\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const clear = function () {\r\n    localStorage.removeItem(name);\r\n};\r\n\r\n/**\r\n * Config\r\n * @param {{}} options Config\r\n * @returns {{}} Config\r\n */\r\nexport const normalize = function (options) {\r\n    let settings = {};\r\n    if ($.type(options) !== 'object') return settings;\r\n    for (let [key, value] of Object.entries(options)) {\r\n        if (key in Config && $.type(value) === $.type(Config[key])) {\r\n            settings[key] = value;\r\n        }\r\n    }\r\n    return settings;\r\n};\r\n","/*  */\r\n'use strict';\r\nimport * as Util from './util';\r\nimport Const from './const';\r\nimport * as Dialog from './dialog';\r\nimport {\r\n    read as readConfig,\r\n    write as writeConfig,\r\n    clear as clearConfig,\r\n    normalize as normalizeConfig,\r\n    Config as defConfig,\r\n} from './config';\r\nimport * as Script from './script';\r\nimport * as Public from './public';\r\n\r\n/**\r\n * \r\n */\r\nexport const show = function () {\r\n    const dialogName = 'configDialog';\r\n    if ($('#' + dialogName).length > 0) return;\r\n    readConfig();\r\n    let bodyContent = `\r\n<div class=\"btn-group-sm text-right mb-1\">\r\n  <a class=\"btn btn-link text-danger\" data-name=\"clearTmpData\" href=\"#\"></a>\r\n  <a class=\"btn btn-link\" data-name=\"openRunCommandDialog\" href=\"#\"></a>\r\n</div>\r\n<fieldset class=\"fieldset mb-3 py-2\">\r\n  <legend class=\"form-check\">\r\n    <label class=\"form-check-label\">\r\n      <input class=\"form-check-input\" name=\"showSidebarBtnGroupEnabled\" type=\"checkbox\"> \r\n      <span class=\"tips\" data-toggle=\"tooltip\" title=\"\">[?]</span>\r\n    </label>\r\n  </legend>\r\n  <div class=\"mb-2 d-sm-inline-block\">\r\n    <div class=\"form-check form-check-inline\">\r\n      <label class=\"form-check-label\">\r\n        <input class=\"form-check-input\" name=\"showSidebarRollBtnEnabled\" type=\"checkbox\"> /\r\n      </label>\r\n    </div>\r\n    <div class=\"form-check form-check-inline\">\r\n      <label class=\"form-check-label\">\r\n        <input class=\"form-check-input\" name=\"showSidebarMainMenuBtnEnabled\" type=\"checkbox\"> \r\n      </label>\r\n    </div>\r\n  </div>\r\n  <div class=\"mb-2 d-sm-inline-block ml-sm-3\">\r\n    <div class=\"form-check form-check-inline\">\r\n      <label class=\"form-check-label\">\r\n        <input class=\"form-check-input\" name=\"showSidebarForumListBtnEnabled\" type=\"checkbox\"> \r\n      </label>\r\n    </div>\r\n    <div class=\"form-check form-check-inline\">\r\n      <label class=\"form-check-label\">\r\n        <input class=\"form-check-input\" name=\"showSidebarSearchBtnEnabled\" type=\"checkbox\"> \r\n      </label>\r\n    </div>\r\n    <div class=\"form-check form-check-inline\">\r\n      <label class=\"form-check-label\">\r\n        <input class=\"form-check-input\" name=\"showSidebarHomePageBtnEnabled\" type=\"checkbox\"> \r\n      </label>\r\n    </div>\r\n  </div>\r\n</fieldset>\r\n\r\n<fieldset class=\"fieldset mb-3 py-2\">\r\n  <legend></legend>\r\n  <div class=\"form-group mb-2\">\r\n    <label for=\"perPageFloorNum\"></label>\r\n    <select class=\"custom-select custom-select-sm\" id=\"perPageFloorNum\" name=\"perPageFloorNum\">\r\n      <option value=\"10\">10</option><option value=\"20\">20</option><option value=\"30\">30</option>\r\n    </select>\r\n    <span class=\"tips\" data-toggle=\"tooltip\" title=\"\">[?]</span>\r\n  </div>\r\n  <div class=\"input-group mb-2\">\r\n    <span class=\"input-group-addon\"></span>\r\n    <input class=\"form-control\" name=\"threadContentFontSize\" data-toggle=\"tooltip\" type=\"number\" min=\"8\" max=\"72\"\r\n           title=\"14px\">\r\n    <span class=\"input-group-addon\">px</span>\r\n  </div>\r\n  <div class=\"form-check\">\r\n    <label class=\"form-check-label\">\r\n      <input class=\"form-check-input\" name=\"userMemoEnabled\" type=\"checkbox\" data-disabled=\"[data-name=openUserMemoDialog]\"> \r\n    </label>\r\n    <span class=\"tips\" data-toggle=\"tooltip\" title=\"\">[?]</span>\r\n    <a class=\"ml-3\" data-name=\"openUserMemoDialog\" href=\"#\" role=\"button\">&raquo;</a>\r\n  </div>\r\n  <div class=\"form-check\">\r\n    <label class=\"form-check-label\">\r\n      <input class=\"form-check-input\" name=\"kfSmileEnhanceExtensionEnabled\" type=\"checkbox\"> \r\n    </label>\r\n    <span class=\"tips\" data-toggle=\"tooltip\" title=\"eddie32\">[?]</span>\r\n  </div>\r\n</fieldset>\r\n\r\n<fieldset class=\"fieldset mb-3 py-2\">\r\n  <legend></legend>\r\n  <div class=\"input-group mb-2\">\r\n    <span class=\"input-group-addon\"></span>\r\n    <input class=\"form-control\" name=\"defShowMsgDuration\" data-toggle=\"tooltip\" type=\"number\" min=\"-1\" required\r\n           title=\"-115\">\r\n    <span class=\"input-group-addon\"></span>\r\n  </div>\r\n  <div class=\"form-check\">\r\n    <label class=\"form-check-label\">\r\n      <input class=\"form-check-input\" name=\"customCssEnabled\" type=\"checkbox\" data-disabled=\"[data-name=openCustomCssDialog]\"> CSS\r\n    </label>\r\n    <span class=\"tips\" data-toggle=\"tooltip\" title=\"CSSCSS\">[?]</span>\r\n    <a class=\"ml-3\" data-name=\"openCustomCssDialog\" href=\"#\" role=\"button\">&raquo;</a>\r\n  </div>\r\n</fieldset>\r\n\r\n<fieldset class=\"fieldset mb-3 py-2\">\r\n  <legend></legend>\r\n  <div class=\"form-check\">\r\n    <label class=\"form-check-label\">\r\n      <input class=\"form-check-input\" name=\"followUserEnabled\" type=\"checkbox\" data-disabled=\"[data-name=openFollowUserDialog]\"> \r\n    </label>\r\n    <span class=\"tips\" data-toggle=\"tooltip\" title=\"\">[?]</span>\r\n    <a class=\"ml-3\" data-name=\"openFollowUserDialog\" href=\"#\" role=\"button\">&raquo;</a>\r\n  </div>\r\n  <div class=\"form-check\">\r\n    <label class=\"form-check-label\">\r\n      <input class=\"form-check-input\" name=\"blockUserEnabled\" type=\"checkbox\" data-disabled=\"[data-name=openBlockUserDialog]\"> \r\n    </label>\r\n    <span class=\"tips\" data-toggle=\"tooltip\" title=\"\">[?]</span>\r\n    <a class=\"ml-3\" data-name=\"openBlockUserDialog\" href=\"#\" role=\"button\">&raquo;</a>\r\n  </div>\r\n  <div class=\"form-check\">\r\n    <label class=\"form-check-label\">\r\n      <input class=\"form-check-input\" name=\"blockThreadEnabled\" type=\"checkbox\" data-disabled=\"[data-name=openBlockThreadDialog]\"> \r\n    </label>\r\n    <span class=\"tips\" data-toggle=\"tooltip\" title=\"\">[?]</span>\r\n    <a class=\"ml-3\" data-name=\"openBlockThreadDialog\" href=\"#\" role=\"button\">&raquo;</a>\r\n  </div>\r\n</fieldset>`;\r\n    let footerContent = `\r\n<button class=\"btn btn-warning mr-auto\" name=\"openImportOrExportSettingDialog\" type=\"button\">/</button>\r\n<button class=\"btn btn-primary\" type=\"submit\"></button>\r\n<button class=\"btn btn-secondary\" data-dismiss=\"dialog\" type=\"button\"></button>\r\n<button class=\"btn btn-danger\" name=\"reset\" type=\"button\"></button>`;\r\n    let $dialog = Dialog.create(dialogName, '', bodyContent, footerContent);\r\n\r\n    $dialog.submit(function (e) {\r\n        e.preventDefault();\r\n        readConfig();\r\n        let options = getMainConfigValue($dialog);\r\n        options = normalizeConfig(options);\r\n        $.extend(Config, options);\r\n        writeConfig();\r\n        Dialog.close(dialogName);\r\n    }).on('click', 'a[data-name^=\"open\"][href=\"#\"]', function (e) {\r\n        e.preventDefault();\r\n        let $this = $(this);\r\n        if ($this.hasClass('disabled-link')) return;\r\n        let name = $this.data('name');\r\n        if (name === 'openRunCommandDialog') showRunCommandDialog();\r\n        else if (name === 'openUserMemoDialog') showUserMemoDialog();\r\n        else if (name === 'openCustomCssDialog') showCustomCssDialog();\r\n        else if (name === 'openFollowUserDialog') showFollowUserDialog();\r\n        else if (name === 'openBlockUserDialog') showBlockUserDialog();\r\n        else if (name === 'openBlockThreadDialog') showBlockThreadDialog();\r\n    }).find('[data-name=\"clearTmpData\"]').click(function (e) {\r\n        e.preventDefault();\r\n        let type = prompt(\r\n            'Cookies\\n01Cookies2', 0\r\n        );\r\n        if (type === null) return;\r\n        type = parseInt(type);\r\n        if (!isNaN(type) && type >= 0) {\r\n            clearTmpData(type);\r\n            alert('');\r\n        }\r\n    }).end().find('[name=\"reset\"]').click(function () {\r\n        if (confirm('')) {\r\n            clearConfig();\r\n            alert('');\r\n            Dialog.close(dialogName);\r\n            location.reload();\r\n        }\r\n    }).end().find('[name=\"openImportOrExportSettingDialog\"]').click(showImportOrExportSettingDialog);\r\n\r\n    setMainConfigValue($dialog);\r\n    Dialog.show(dialogName);\r\n};\r\n\r\n/**\r\n * \r\n * @param {jQuery} $dialog \r\n */\r\nconst setMainConfigValue = function ($dialog) {\r\n    $dialog.find('input[name], select[name]').each(function () {\r\n        let $this = $(this);\r\n        let name = $this.attr('name');\r\n        if (name in Config) {\r\n            if ($this.is('[type=\"checkbox\"]') && typeof Config[name] === 'boolean') $this.prop('checked', Config[name] === true);\r\n            else $this.val(Config[name]);\r\n        }\r\n    });\r\n    $dialog.find('[name=\"threadContentFontSize\"]').val(Config.threadContentFontSize > 0 ? Config.threadContentFontSize : '');\r\n};\r\n\r\n/**\r\n * Config\r\n * @param {jQuery} $dialog \r\n * @returns {{}} Config\r\n */\r\nconst getMainConfigValue = function ($dialog) {\r\n    let options = {};\r\n    $dialog.find('input[name], select[name]').each(function () {\r\n        let $this = $(this);\r\n        let name = $this.attr('name');\r\n        if (name in Config) {\r\n            if ($this.is('[type=\"checkbox\"]') && typeof Config[name] === 'boolean')\r\n                options[name] = Boolean($this.prop('checked'));\r\n            else if (typeof Config[name] === 'number') {\r\n                options[name] = parseInt($this.val());\r\n                if (name === 'threadContentFontSize' && isNaN(options[name])) options[name] = 0;\r\n            }\r\n            else options[name] = $.trim($this.val());\r\n        }\r\n    });\r\n    return options;\r\n};\r\n\r\n/**\r\n * \r\n * @param {number} type 01Cookies2\r\n */\r\nconst clearTmpData = function (type = 0) {\r\n    if (type === 0 || type === 1) {\r\n        for (let key in Const) {\r\n            if (/CookieName$/.test(key)) {\r\n                Util.deleteCookie(Const[key]);\r\n            }\r\n        }\r\n    }\r\n    if (type === 0 || type === 2) {\r\n        //TmpLog.clear();\r\n        localStorage.removeItem(Const.multiQuoteStorageName);\r\n    }\r\n};\r\n\r\n/**\r\n * \r\n */\r\nconst showRunCommandDialog = function () {\r\n    const dialogName = 'runCommandDialog';\r\n    if ($('#' + dialogName).length > 0) return;\r\n    let bodyContent = `\r\n<p class=\"font-size-sm\">\r\n  <kbd>Ctrl+Enter</kbd><kbd>Ctrl+</kbd>\r\n</p>\r\n<div class=\"form-group\">\r\n  <label for=\"cfgCmd\"></label>\r\n  <textarea class=\"form-control\" name=\"cmd\" id=\"cfgCmd\" rows=\"6\" wrap=\"off\" aria-label=\"\" style=\"white-space: pre;\"></textarea>\r\n</div>\r\n<div class=\"form-group\">\r\n  <label for=\"cfgResult\"></label>\r\n  <textarea class=\"form-control\" name=\"result\" id=\"cfgResult\" rows=\"6\" wrap=\"off\" aria-label=\"\" style=\"white-space: pre;\"></textarea>\r\n</div>`;\r\n    let footerContent = `\r\n<button class=\"btn btn-primary\" type=\"submit\"></button>\r\n<button class=\"btn btn-danger\" name=\"clear\" type=\"button\"></button>\r\n<button class=\"btn btn-secondary\" data-dismiss=\"dialog\" type=\"button\"></button>`;\r\n    let $dialog = Dialog.create(dialogName, '', bodyContent, footerContent);\r\n    let $cmd = $dialog.find('[name=\"cmd\"]');\r\n    let $result = $dialog.find('[name=\"result\"]');\r\n\r\n    $dialog.submit(function (e) {\r\n        e.preventDefault();\r\n        let content = $cmd.val();\r\n        if (!$.trim(content)) return;\r\n        let {response} = Script.runCmd(content, true);\r\n        $result.val(response);\r\n    }).end().find('[name=\"clear\"]').click(function () {\r\n        $cmd.val('').focus();\r\n    });\r\n\r\n    $cmd.keydown(function (e) {\r\n        if (e.ctrlKey && e.keyCode === 13) {\r\n            $dialog.submit();\r\n        }\r\n        else if (e.ctrlKey && e.keyCode === 8) {\r\n            $dialog.find('[name=\"clear\"]').click();\r\n        }\r\n    });\r\n\r\n    Dialog.show(dialogName);\r\n    $cmd.focus();\r\n};\r\n\r\n/**\r\n * \r\n */\r\nconst showImportOrExportSettingDialog = function () {\r\n    const dialogName = 'imOrExSettingDialog';\r\n    if ($('#' + dialogName).length > 0) return;\r\n    readConfig();\r\n    let bodyContent = `\r\n<p class=\"font-size-sm\">\r\n  <b></b><br>\r\n  <b></b><br>\r\n  <span class=\"text-danger\">KFOL</span>\r\n</p>\r\n<div class=\"form-group\">\r\n  <textarea class=\"form-control\" name=\"setting\" rows=\"10\" aria-label=\"\" style=\"word-break: break-all;\"></textarea>\r\n</div>`;\r\n    let footerContent = `\r\n<button class=\"btn btn-primary\" type=\"submit\"></button>\r\n<button class=\"btn btn-secondary\" data-dismiss=\"dialog\" type=\"button\"></button>`;\r\n    let $dialog = Dialog.create(dialogName, '', bodyContent, footerContent);\r\n\r\n    $dialog.submit(function (e) {\r\n        e.preventDefault();\r\n        if (!confirm('')) return;\r\n        let options = $.trim($dialog.find('[name=\"setting\"]').val());\r\n        if (!options) return;\r\n        try {\r\n            options = JSON.parse(options);\r\n        }\r\n        catch (ex) {\r\n            alert('');\r\n            return;\r\n        }\r\n        if (!options || $.type(options) !== 'object') {\r\n            alert('');\r\n            return;\r\n        }\r\n        options = normalizeConfig(options);\r\n        window.Config = $.extend(true, {}, defConfig, options);\r\n        writeConfig();\r\n        alert('');\r\n        location.reload();\r\n    });\r\n    Dialog.show(dialogName);\r\n    $dialog.find('[name=\"setting\"]').val(JSON.stringify(Util.getDifferenceSetOfObject(defConfig, Config))).select().focus();\r\n};\r\n\r\n/**\r\n * \r\n */\r\nconst showUserMemoDialog = function () {\r\n    const dialogName = 'userMemoDialog';\r\n    if ($('#' + dialogName).length > 0) return;\r\n    readConfig();\r\n    let bodyContent = `\r\n<p class=\"font-size-sm\"><code>:</code></p>\r\n<div class=\"form-group\">\r\n  <textarea class=\"form-control\" name=\"userMemoList\" rows=\"13\" wrap=\"off\" aria-label=\"\" style=\"white-space: pre;\"></textarea>\r\n</div>`;\r\n    let footerContent = `\r\n<button class=\"btn btn-primary\" type=\"submit\"></button>\r\n<button class=\"btn btn-secondary\" data-dismiss=\"dialog\" type=\"button\"></button>`;\r\n    let $dialog = Dialog.create(dialogName, '', bodyContent, footerContent);\r\n    let $userMemoList = $dialog.find('[name=\"userMemoList\"]');\r\n\r\n    $dialog.submit(function (e) {\r\n        e.preventDefault();\r\n        let content = $.trim($userMemoList.val());\r\n        Config.userMemoList = {};\r\n        for (let line of content.split('\\n')) {\r\n            line = $.trim(line);\r\n            if (!line) continue;\r\n            if (!/.+?:.+/.test(line)) {\r\n                alert('');\r\n                $userMemoList.focus();\r\n                return;\r\n            }\r\n            let [user, memo = ''] = line.split(':');\r\n            if (!memo) continue;\r\n            Config.userMemoList[user.trim()] = memo.trim();\r\n        }\r\n        writeConfig();\r\n        Dialog.close(dialogName);\r\n    });\r\n\r\n    let content = '';\r\n    for (let [user, memo] of Object.entries(Config.userMemoList)) {\r\n        content += `${user}:${memo}\\n`;\r\n    }\r\n    Dialog.show(dialogName);\r\n    $userMemoList.val(content).focus();\r\n};\r\n\r\n/**\r\n * CSS\r\n */\r\nconst showCustomCssDialog = function () {\r\n    const dialogName = 'customCssDialog';\r\n    if ($('#' + dialogName).length > 0) return;\r\n    readConfig();\r\n    let bodyContent = `\r\n<div class=\"form-group\">\r\n  <textarea class=\"form-control\" name=\"customCssContent\" rows=\"15\" wrap=\"off\" aria-label=\"CSS\" style=\"white-space: pre;\"></textarea>\r\n</div>`;\r\n    let footerContent = `\r\n<button class=\"btn btn-primary\" type=\"submit\"></button>\r\n<button class=\"btn btn-secondary\" data-dismiss=\"dialog\" type=\"button\"></button>`;\r\n    let $dialog = Dialog.create(dialogName, 'CSS', bodyContent, footerContent);\r\n    let $content = $dialog.find('[name=\"customCssContent\"]');\r\n\r\n    $dialog.submit(function (e) {\r\n        e.preventDefault();\r\n        Config.customCssContent = $.trim($content.val());\r\n        writeConfig();\r\n        Dialog.close(dialogName);\r\n        alert('CSS');\r\n    });\r\n    Dialog.show(dialogName);\r\n    $content.val(Config.customCssContent).focus();\r\n};\r\n\r\n/**\r\n * \r\n */\r\nconst showFollowUserDialog = function () {\r\n    const dialogName = 'followUserDialog';\r\n    if ($('#' + dialogName).length > 0) return;\r\n    let bodyContent = `\r\n<div class=\"form-check\">\r\n  <label class=\"form-check-label\">\r\n    <input class=\"form-check-input\" name=\"highlightFollowUserThreadInHpEnabled\" type=\"checkbox\"> \r\n    <span class=\"tips\" data-toggle=\"tooltip\" title=\"\">[?]</span>\r\n  </label>\r\n</div>\r\n<div class=\"form-check mb-3\">\r\n  <label class=\"form-check-label\">\r\n    <input class=\"form-check-input\" name=\"highlightFollowUserThreadLinkEnabled\" type=\"checkbox\"> \r\n    <span class=\"tips\" data-toggle=\"tooltip\" title=\"\">[?]</span>\r\n  </label>\r\n</div>\r\n<ul class=\"list-unstyled\" id=\"followUserList\"></ul>\r\n<div class=\"btn-group btn-group-sm mb-3\" role=\"group\">\r\n  <button class=\"btn btn-secondary\" name=\"selectAll\" type=\"button\"></button>\r\n  <button class=\"btn btn-secondary\" name=\"selectInverse\" type=\"button\"></button>\r\n  <button class=\"btn btn-danger\" name=\"deleteSelect\" type=\"button\"></button>\r\n</div>\r\n<div class=\"input-group mb-3\">\r\n  <input class=\"form-control\" name=\"addUser\" data-toggle=\"tooltip\" type=\"text\" title=\"\" aria-label=\"\">\r\n  <span class=\"input-group-btn\">\r\n    <button class=\"btn btn-success\" name=\"add\" type=\"button\"></button>\r\n  </span>\r\n</div>\r\n`;\r\n    let footerContent = `\r\n<button class=\"btn btn-warning mr-auto\" name=\"openImOrExFollowUserListDialog\" type=\"button\">/</button>\r\n<button class=\"btn btn-primary\" type=\"submit\"></button>\r\n<button class=\"btn btn-secondary\" data-dismiss=\"dialog\" type=\"button\"></button>`;\r\n    let $dialog = Dialog.create(dialogName, '', bodyContent, footerContent);\r\n    let $followUserList = $dialog.find('#followUserList');\r\n\r\n    /**\r\n     * \r\n     * @param {string} name \r\n     */\r\n    const addFollowUser = function (name) {\r\n        $(`\r\n<li class=\"input-group input-group-sm mb-2\">\r\n  <span class=\"input-group-addon\">\r\n    <input type=\"checkbox\" aria-label=\"\">\r\n  </span>\r\n  <input class=\"form-control\" name=\"userName\" type=\"text\" value=\"${name}\" maxlength=\"12\" aria-label=\"\">\r\n  <span class=\"input-group-btn\">\r\n    <button class=\"btn btn-danger\" name=\"delete\" type=\"button\" aria-label=\"\">\r\n      <i class=\"fa fa-trash\" aria-hidden=\"true\"></i>\r\n    </button>\r\n  </span>\r\n</li>\r\n`).appendTo($followUserList);\r\n    };\r\n\r\n    $dialog.submit(function (e) {\r\n        e.preventDefault();\r\n        Config.highlightFollowUserThreadInHPEnabled = $dialog.find('[name=\"highlightFollowUserThreadInHpEnabled\"]').prop('checked');\r\n        Config.highlightFollowUserThreadLinkEnabled = $dialog.find('[name=\"highlightFollowUserThreadLinkEnabled\"]').prop('checked');\r\n        Config.followUserList = [];\r\n        $followUserList.find('li').each(function () {\r\n            let $this = $(this);\r\n            let name = $.trim($this.find('[name=\"userName\"]').val());\r\n            if (name !== '' && Util.inFollowOrBlockUserList(name, Config.followUserList) === -1) {\r\n                Config.followUserList.push({name});\r\n            }\r\n        });\r\n        writeConfig();\r\n        Dialog.close(dialogName);\r\n    }).find('[name=\"deleteSelect\"]').click(function () {\r\n        let $checked = $followUserList.find('li:has([type=\"checkbox\"]:checked)');\r\n        if (!$checked.length) return;\r\n        if (confirm('')) $checked.remove();\r\n    }).end().find('[name=\"addUser\"]').keydown(function (e) {\r\n        if (e.keyCode === 13) {\r\n            e.preventDefault();\r\n            $(this).next().find('button').click();\r\n        }\r\n    }).end().find('[name=\"add\"]').click(function () {\r\n        let $addUser = $dialog.find('[name=\"addUser\"]');\r\n        for (let name of $.trim($addUser.val()).split(',')) {\r\n            name = $.trim(name);\r\n            if (!name) continue;\r\n            if (Util.inFollowOrBlockUserList(name, Config.followUserList) === -1) addFollowUser(name);\r\n        }\r\n        $addUser.val('');\r\n        $followUserList.find('li:last-child [type=\"checkbox\"]').focus();\r\n    }).end().find('[name=\"openImOrExFollowUserListDialog\"]').click(function (e) {\r\n        e.preventDefault();\r\n        Public.showCommonImportOrExportConfigDialog('', 'followUserList');\r\n    }).end().find('[name=\"selectAll\"]').click(() => Util.selectAll($followUserList.find('[type=\"checkbox\"]')))\r\n        .end().find('[name=\"selectInverse\"]').click(() => Util.selectInverse($followUserList.find('[type=\"checkbox\"]')));\r\n\r\n    $followUserList.on('click', '[name=\"delete\"]', function () {\r\n        $(this).closest('li').remove();\r\n    });\r\n\r\n    $dialog.find('[name=\"highlightFollowUserThreadInHpEnabled\"]').prop('checked', Config.highlightFollowUserThreadInHPEnabled);\r\n    $dialog.find('[name=\"highlightFollowUserThreadLinkEnabled\"]').prop('checked', Config.highlightFollowUserThreadLinkEnabled);\r\n    for (let user of Config.followUserList) {\r\n        addFollowUser(user.name);\r\n    }\r\n    Dialog.show(dialogName);\r\n};\r\n\r\n/**\r\n * \r\n */\r\nconst showBlockUserDialog = function () {\r\n    const dialogName = 'blockUserDialog';\r\n    if ($('#' + dialogName).length > 0) return;\r\n    let bodyContent = `\r\n<div class=\"form-group mb-2\">\r\n  <label for=\"blockUserDefaultType\"></label>\r\n  <select class=\"custom-select custom-select-sm\" id=\"blockUserDefaultType\" name=\"blockUserDefaultType\">\r\n    <option value=\"0\"></option><option value=\"1\"></option><option value=\"2\"></option>\r\n  </select>\r\n  <div class=\"form-check form-check-inline ml-3\">\r\n    <label class=\"form-check-label\">\r\n      <input class=\"form-check-input\" name=\"blockUserAtTipsEnabled\" type=\"checkbox\"> @\r\n      <span class=\"tips\" data-toggle=\"tooltip\" title=\"@\">[?]</span>\r\n    </label>\r\n  </div>\r\n</div>\r\n<div class=\"form-group mb-2\">\r\n  <label for=\"blockUserForumType\"></label>\r\n  <select class=\"custom-select custom-select-sm\" id=\"blockUserForumType\" name=\"blockUserForumType\">\r\n    <option value=\"0\"></option><option value=\"1\"></option><option value=\"2\"></option>\r\n  </select>\r\n</div>\r\n<div class=\"form-group\">\r\n  <label>ID</label>\r\n  <span class=\"tips\" data-toggle=\"tooltip\" title=\"URLfidID\">[?]</span>\r\n  <input class=\"form-control form-control-sm\" name=\"blockUserFidList\" type=\"text\">\r\n</div>\r\n<ul class=\"list-unstyled\" id=\"blockUserList\"></ul>\r\n<div class=\"btn-group btn-group-sm mb-3\" role=\"group\">\r\n  <button class=\"btn btn-secondary\" name=\"selectAll\" type=\"button\"></button>\r\n  <button class=\"btn btn-secondary\" name=\"selectInverse\" type=\"button\"></button>\r\n  <div class=\"btn-group btn-group-sm dropup\">\r\n    <button class=\"btn btn-info dropdown-toggle\" data-toggle=\"dropdown\" type=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n      \r\n    </button>\r\n    <div class=\"dropdown-menu\" data-name=\"modifyMenu\">\r\n      <a class=\"dropdown-item\" data-value=\"0\" href=\"#\"></a>\r\n      <a class=\"dropdown-item\" data-value=\"1\" href=\"#\"></a>\r\n      <a class=\"dropdown-item\" data-value=\"2\" href=\"#\"></a>\r\n    </div>\r\n  </div>\r\n  <button class=\"btn btn-danger\" name=\"deleteSelect\" type=\"button\"></button>\r\n</div>\r\n<div class=\"input-group mb-3\">\r\n  <input class=\"form-control\" name=\"addUser\" data-toggle=\"tooltip\" type=\"text\" title=\"\" aria-label=\"\">\r\n  <span class=\"input-group-btn\">\r\n    <button class=\"btn btn-success\" name=\"add\" type=\"button\"></button>\r\n  </span>\r\n</div>`;\r\n    let footerContent = `\r\n<button class=\"btn btn-warning mr-auto\" name=\"openImOrExBlockUserListDialog\" type=\"button\">/</button>\r\n<button class=\"btn btn-primary\" type=\"submit\"></button>\r\n<button class=\"btn btn-secondary\" data-dismiss=\"dialog\" type=\"button\"></button>`;\r\n    let $dialog = Dialog.create(dialogName, '', bodyContent, footerContent);\r\n    let $blockUserList = $dialog.find('#blockUserList');\r\n\r\n    /**\r\n     * \r\n     * @param {string} name \r\n     * @param {number} type \r\n     */\r\n    const addBlockUser = function (name, type) {\r\n        $(`\r\n<li class=\"form-group row no-gutters mb-2\">\r\n  <div class=\"col-7 input-group input-group-sm\">\r\n    <span class=\"input-group-addon\">\r\n      <input type=\"checkbox\" aria-label=\"\">\r\n    </span>\r\n    <input class=\"form-control\" name=\"userName\" type=\"text\" value=\"${name}\" maxlength=\"12\" aria-label=\"\">\r\n  </div>\r\n  <div class=\"col-5 input-group input-group-sm\">\r\n    <select class=\"form-control\" name=\"blockType\">\r\n      <option value=\"0\"></option><option value=\"1\"></option><option value=\"2\"></option>\r\n    </select>\r\n    <span class=\"input-group-btn\">\r\n      <button class=\"btn btn-danger\" name=\"delete\" type=\"button\" aria-label=\"\">\r\n        <i class=\"fa fa-trash\" aria-hidden=\"true\"></i>\r\n      </button>\r\n    </span>\r\n  </div>\r\n</li>\r\n`).appendTo($blockUserList).find('[name=\"blockType\"]').val(type);\r\n    };\r\n\r\n    $dialog.submit(function (e) {\r\n        e.preventDefault();\r\n        Config.blockUserDefaultType = parseInt($dialog.find('[name=\"blockUserDefaultType\"]').val());\r\n        Config.blockUserAtTipsEnabled = $dialog.find('[name=\"blockUserAtTipsEnabled\"]').prop('checked');\r\n        Config.blockUserForumType = parseInt($dialog.find('[name=\"blockUserForumType\"]').val());\r\n        let blockUserFidList = new Set();\r\n        for (let fid of $.trim($dialog.find('[name=\"blockUserFidList\"]').val()).split(',')) {\r\n            fid = parseInt(fid);\r\n            if (!isNaN(fid) && fid > 0) blockUserFidList.add(fid);\r\n        }\r\n        Config.blockUserFidList = [...blockUserFidList];\r\n        Config.blockUserList = [];\r\n        $blockUserList.find('li').each(function () {\r\n            let $this = $(this);\r\n            let name = $.trim($this.find('[name=\"userName\"]').val());\r\n            if (name && Util.inFollowOrBlockUserList(name, Config.blockUserList) === -1) {\r\n                let type = parseInt($this.find('[name=\"blockType\"]').val());\r\n                Config.blockUserList.push({name, type});\r\n            }\r\n        });\r\n        writeConfig();\r\n        Dialog.close(dialogName);\r\n    }).find('[data-name=\"modifyMenu\"]').on('click', 'a', function (e) {\r\n        e.preventDefault();\r\n        let value = parseInt($(this).data('value'));\r\n        $blockUserList.find('li:has([type=\"checkbox\"]:checked) select').val(value);\r\n    }).end().find('[name=\"deleteSelect\"]').click(function () {\r\n        let $checked = $blockUserList.find('li:has([type=\"checkbox\"]:checked)');\r\n        if (!$checked.length) return;\r\n        if (confirm('')) $checked.remove();\r\n    }).end().find('[name=\"addUser\"]').keydown(function (e) {\r\n        if (e.keyCode === 13) {\r\n            e.preventDefault();\r\n            $(this).next().find('button').click();\r\n        }\r\n    }).end().find('[name=\"add\"]').click(function () {\r\n        let $addUser = $dialog.find('[name=\"addUser\"]');\r\n        let type = parseInt($dialog.find('[name=\"blockUserDefaultType\"]').val());\r\n        for (let name of $.trim($addUser.val()).split(',')) {\r\n            name = $.trim(name);\r\n            if (!name) continue;\r\n            if (Util.inFollowOrBlockUserList(name, Config.blockUserList) === -1) addBlockUser(name, type);\r\n        }\r\n        $addUser.val('');\r\n        $blockUserList.find('li:last-child [type=\"checkbox\"]').focus();\r\n    }).end().find('[name=\"blockUserForumType\"]').change(function () {\r\n        $dialog.find('[name=\"blockUserFidList\"]').prop('disabled', parseInt($(this).val()) === 0);\r\n    }).end().find('[name=\"openImOrExBlockUserListDialog\"]').click(function (e) {\r\n        e.preventDefault();\r\n        Public.showCommonImportOrExportConfigDialog('', 'blockUserList');\r\n    }).end().find('[name=\"selectAll\"]').click(() => Util.selectAll($blockUserList.find('[type=\"checkbox\"]')))\r\n        .end().find('[name=\"selectInverse\"]').click(() => Util.selectInverse($blockUserList.find('[type=\"checkbox\"]')));\r\n\r\n    $blockUserList.on('click', '[name=\"delete\"]', function () {\r\n        $(this).closest('li').remove();\r\n    });\r\n\r\n    $dialog.find('[name=\"blockUserDefaultType\"]').val(Config.blockUserDefaultType);\r\n    $dialog.find('[name=\"blockUserAtTipsEnabled\"]').prop('checked', Config.blockUserAtTipsEnabled);\r\n    $dialog.find('[name=\"blockUserForumType\"]').val(Config.blockUserForumType).triggerHandler('change');\r\n    $dialog.find('[name=\"blockUserFidList\"]').val(Config.blockUserFidList.join(','));\r\n    for (let user of Config.blockUserList) {\r\n        addBlockUser(user.name, user.type);\r\n    }\r\n    Dialog.show(dialogName);\r\n};\r\n\r\n/**\r\n * \r\n */\r\nconst showBlockThreadDialog = function () {\r\n    const dialogName = 'blockThreadDialog';\r\n    if ($('#' + dialogName).length > 0) return;\r\n    let bodyContent = `\r\n<p class=\"font-size-sm\">\r\n  <code>/abc/</code><code>/A.*B/i</code><br>\r\n  IDID<br>\r\n</p>\r\n<div class=\"form-group mb-2\">\r\n  <label for=\"blockThreadDefForumType\"></label>\r\n  <select class=\"custom-select custom-select-sm\" id=\"blockThreadDefForumType\" name=\"blockThreadDefForumType\">\r\n    <option value=\"0\"></option><option value=\"1\"></option><option value=\"2\"></option>\r\n  </select>\r\n</div>\r\n<div class=\"form-group\">\r\n  <label for=\"blockThreadDefFidList\">ID</label>\r\n  <input class=\"form-control form-control-sm\" id=\"blockThreadDefFidList\" name=\"blockThreadDefFidList\" type=\"text\">\r\n</div>\r\n<div class=\"table-responsive\">\r\n  <table class=\"table table-sm table-hover table-center text-nowrap\">\r\n    <thead>\r\n      <tr>\r\n        <th>()</th>\r\n        <th></th>\r\n        <th></th>\r\n        <th></th>\r\n        <th>ID</th>\r\n        <th></th>\r\n      </tr>\r\n    </thead>\r\n    <tbody id=\"blockThreadList\"></tbody>\r\n  </table>\r\n</div>\r\n<div class=\"btn-group btn-group-sm mb-3\" role=\"group\">\r\n  <button class=\"btn btn-success\" name=\"add\" type=\"button\"></button>\r\n  <button class=\"btn btn-danger\" name=\"clear\" type=\"button\"></button>\r\n</div>`;\r\n    let footerContent = `\r\n<button class=\"btn btn-warning mr-auto\" name=\"openImOrExBlockThreadListDialog\" type=\"button\">/</button>\r\n<button class=\"btn btn-primary\" type=\"submit\"></button>\r\n<button class=\"btn btn-secondary\" data-dismiss=\"dialog\" type=\"button\"></button>`;\r\n    let $dialog = Dialog.create(dialogName, '', bodyContent, footerContent);\r\n    let $blockThreadList = $dialog.find('#blockThreadList');\r\n\r\n    /**\r\n     * \r\n     * @param {string} keyWord \r\n     * @param {number} userType 012\r\n     * @param {string[]} userList \r\n     * @param {number} fidType 012\r\n     * @param {number[]} fidList ID\r\n     */\r\n    const addBlockThread = function (keyWord, userType, userList, fidType, fidList) {\r\n        $(`\r\n<tr>\r\n  <td>\r\n    <input class=\"form-control form-control-sm\" name=\"keyWord\" type=\"text\" value=\"${keyWord}\" aria-label=\"\" style=\"min-width: 12rem;\">\r\n  </td>\r\n  <td>\r\n    <select class=\"form-control form-control-sm\" name=\"userType\" aria-label=\"\" style=\"min-width: 4.5rem;\">\r\n      <option value=\"0\"></option><option value=\"1\"></option><option value=\"2\"></option>\r\n    </select>\r\n  </td>\r\n  <td>\r\n    <input class=\"form-control form-control-sm\" name=\"userList\" type=\"text\" value=\"${userList.join(',')}\" aria-label=\"\"\r\n           ${userType === 0 ? 'disabled' : ''} style=\"min-width: 12rem;\">\r\n  </td>\r\n  <td>\r\n    <select class=\"form-control form-control-sm\" name=\"fidType\" aria-label=\"\" style=\"min-width: 4.5rem;\">\r\n      <option value=\"0\"></option><option value=\"1\"></option><option value=\"2\"></option>\r\n    </select>\r\n  </td>\r\n  <td>\r\n    <input class=\"form-control form-control-sm\" name=\"fidList\" type=\"text\" value=\"${fidList.join(',')}\" aria-label=\"ID\"\r\n           ${fidType === 0 ? 'disabled' : ''} style=\"min-width: 9rem;\">\r\n  </td>\r\n  <td class=\"text-left\">\r\n    <button class=\"btn btn-danger btn-sm\" name=\"delete\" type=\"button\" aria-label=\"\">\r\n      <i class=\"fa fa-trash\" aria-hidden=\"true\"></i>\r\n    </button>\r\n  </td>\r\n</tr>\r\n`).appendTo($blockThreadList).find('[name=\"userType\"]').val(userType)\r\n            .end().find('[name=\"fidType\"]').val(fidType);\r\n    };\r\n\r\n    /**\r\n     * \r\n     * @returns {boolean} \r\n     */\r\n    const verify = function () {\r\n        let flag = true;\r\n        $blockThreadList.find('tr').each(function () {\r\n            let $this = $(this);\r\n            let $txtKeyWord = $this.find('[name=\"keyWord\"]');\r\n            let keyWord = $txtKeyWord.val();\r\n            if (!$.trim(keyWord)) return;\r\n            if (/^\\/.+\\/[gimuy]*$/.test(keyWord)) {\r\n                try {\r\n                    eval(keyWord);\r\n                }\r\n                catch (ex) {\r\n                    alert('');\r\n                    $txtKeyWord.select().focus();\r\n                    flag = false;\r\n                    return false;\r\n                }\r\n            }\r\n        });\r\n        return flag;\r\n    };\r\n\r\n    $dialog.submit(function (e) {\r\n        e.preventDefault();\r\n        if (!verify()) return;\r\n        Config.blockThreadDefForumType = parseInt($dialog.find('[name=\"blockThreadDefForumType\"]').val());\r\n        let blockThreadDefFidList = new Set();\r\n        for (let fid of $.trim($dialog.find('[name=\"blockThreadDefFidList\"]').val()).split(',')) {\r\n            fid = parseInt(fid);\r\n            if (!isNaN(fid) && fid > 0) blockThreadDefFidList.add(fid);\r\n        }\r\n        Config.blockThreadDefFidList = [...blockThreadDefFidList];\r\n        Config.blockThreadList = [];\r\n        $blockThreadList.find('tr').each(function () {\r\n            let $this = $(this);\r\n            let keyWord = $this.find('[name=\"keyWord\"]').val();\r\n            if (!$.trim(keyWord)) return;\r\n            let newObj = {keyWord};\r\n\r\n            let userType = parseInt($this.find('[name=\"userType\"]').val());\r\n            if (userType > 0) {\r\n                let userList = new Set();\r\n                for (let user of $.trim($this.find('[name=\"userList\"]').val()).split(',')) {\r\n                    user = $.trim(user);\r\n                    if (user) userList.add(user);\r\n                }\r\n                if (userList.size > 0) newObj[userType === 2 ? 'excludeUser' : 'includeUser'] = [...userList];\r\n            }\r\n\r\n            let fidType = parseInt($this.find('[name=\"fidType\"]').val());\r\n            if (fidType > 0) {\r\n                let fidList = new Set();\r\n                for (let fid of $.trim($this.find('[name=\"fidList\"]').val()).split(',')) {\r\n                    fid = parseInt(fid);\r\n                    if (!isNaN(fid) && fid > 0) fidList.add(fid);\r\n                }\r\n                if (fidList.size > 0) newObj[fidType === 2 ? 'excludeFid' : 'includeFid'] = [...fidList];\r\n            }\r\n            Config.blockThreadList.push(newObj);\r\n        });\r\n        writeConfig();\r\n        Dialog.close(dialogName);\r\n    }).find('[name=\"clear\"]').click(function () {\r\n        if (confirm('')) $blockThreadList.html('');\r\n    }).end().find('[name=\"add\"]').click(function () {\r\n        addBlockThread(\r\n            '', 0, [],\r\n            parseInt($dialog.find('[name=\"blockThreadDefForumType\"]').val()),\r\n            $.trim($dialog.find('[name=\"blockThreadDefFidList\"]').val()).split(',')\r\n        );\r\n    }).end().find('[name=\"blockThreadDefForumType\"]').change(function () {\r\n        $dialog.find('[name=\"blockThreadDefFidList\"]').prop('disabled', parseInt($(this).val()) === 0);\r\n    }).end().find('[name=\"openImOrExBlockThreadListDialog\"]').click(function (e) {\r\n        e.preventDefault();\r\n        Public.showCommonImportOrExportConfigDialog('', 'blockThreadList');\r\n    }).end().find('[name=\"selectAll\"]').click(() => Util.selectAll($blockThreadList.find('[type=\"checkbox\"]')))\r\n        .end().find('[name=\"selectInverse\"]').click(() => Util.selectInverse($blockThreadList.find('[type=\"checkbox\"]')));\r\n\r\n    $blockThreadList.on('change', 'select', function () {\r\n        let $this = $(this);\r\n        $this.closest('td').next('td').find('input').prop('disabled', parseInt($this.val()) === 0);\r\n    }).on('click', '[name=\"delete\"]', function () {\r\n        $(this).closest('tr').remove();\r\n    });\r\n\r\n    $dialog.find('[name=\"blockThreadDefForumType\"]').val(Config.blockThreadDefForumType).triggerHandler('change');\r\n    $dialog.find('[name=\"blockThreadDefFidList\"]').val(Config.blockThreadDefFidList.join(','));\r\n    for (let data of Config.blockThreadList) {\r\n        let {keyWord, includeUser, excludeUser, includeFid, excludeFid} = data;\r\n        let userType = 0;\r\n        let userList = [];\r\n        if (typeof includeUser !== 'undefined') {\r\n            userType = 1;\r\n            userList = includeUser;\r\n        }\r\n        else if (typeof excludeUser !== 'undefined') {\r\n            userType = 2;\r\n            userList = excludeUser;\r\n        }\r\n\r\n        let fidType = 0;\r\n        let fidList = [];\r\n        if (typeof includeFid !== 'undefined') {\r\n            fidType = 1;\r\n            fidList = includeFid;\r\n        }\r\n        else if (typeof excludeFid !== 'undefined') {\r\n            fidType = 2;\r\n            fidList = excludeFid;\r\n        }\r\n        addBlockThread(keyWord, userType, userList, fidType, fidList);\r\n    }\r\n    Dialog.show(dialogName);\r\n};\r\n","/*  */\r\n'use strict';\r\n\r\n// \r\nconst storagePrefix = 'kf_';\r\n\r\n/**\r\n * \r\n */\r\nconst Const = {\r\n    // \r\n    storagePrefix: storagePrefix,\r\n    // LocalStorage\r\n    multiQuoteStorageName: storagePrefix + 'multiQuote',\r\n    // atCookie\r\n    atTipsTimeCookieName: 'atTipsTime',\r\n    // atCookie\r\n    prevAtTipsTimeCookieName: 'prevAtTipsTime',\r\n    // Cookie\r\n    bgStyleCookieName: 'bgStyle',\r\n    // \r\n    commonForumList: [\r\n        {fid: 106, name: ''},\r\n        {fid: 41, name: ''},\r\n        {fid: 16, name: ''},\r\n        {fid: 52, name: ''},\r\n        {fid: 84, name: ''},\r\n        {fid: 67, name: 'CG'},\r\n        {fid: 5, name: ''},\r\n        {fid: 56, name: ''},\r\n        {fid: 57, name: ''},\r\n    ],\r\n    // \r\n    availableForumList: [\r\n        {fid: 106, name: ''},\r\n        {fid: 52, name: ''},\r\n        {fid: 16, name: ''},\r\n        {fid: 41, name: ''},\r\n        {fid: 67, name: 'CG'},\r\n        {fid: 102, name: ''},\r\n        {fid: 24, name: ''},\r\n        {fid: 57, name: ''},\r\n        {fid: 84, name: ''},\r\n        {fid: 92, name: ''},\r\n        {fid: 127, name: ''},\r\n        {fid: 68, name: ''},\r\n        {fid: 163, name: 'LIVE'},\r\n        {fid: 182, name: ''},\r\n        {fid: 94, name: ''},\r\n        {fid: 87, name: ''},\r\n        {fid: 86, name: ''},\r\n        {fid: 115, name: ''},\r\n        {fid: 96, name: ''},\r\n        {fid: 36, name: ''},\r\n        {fid: 5, name: ''},\r\n        {fid: 56, name: ''},\r\n        {fid: 9, name: ''},\r\n        {fid: 4, name: ''},\r\n        {fid: 93, name: ''},\r\n        {fid: 59, name: ''},\r\n        {fid: 125, name: ''},\r\n        {fid: 181, name: ''},\r\n        {fid: 42, name: ''},\r\n        {fid: 128, name: ''},\r\n        {fid: 98, name: ''},\r\n        {fid: 99, name: ''},\r\n        {fid: 112, name: ''},\r\n        {fid: 100, name: ''},\r\n    ],\r\n};\r\n\r\nexport default Const;\r\n","/*  */\r\n'use strict';\r\nimport * as Util from './util';\r\n\r\n/**\r\n * \r\n * @param {string} id ID\r\n * @param {string} title \r\n * @param {string} bodyContent \r\n * @param {string} footerContent \r\n * @returns {jQuery} jQuery\r\n */\r\nexport const create = function (id, title, bodyContent, footerContent = '') {\r\n    let html = `\r\n<form>\r\n<div class=\"dialog\" id=\"${id}\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\" aria-labelledby=\"${id}Title\">\r\n  <div class=\"container dialog-content\" role=\"document\">\r\n    <div class=\"dialog-header\">\r\n      <h5 class=\"dialog-title\" id=\"${id}Title\">${title}</h5>\r\n      <button class=\"close\" data-dismiss=\"dialog\" type=\"button\" aria-label=\"\">\r\n        <span aria-hidden=\"true\">&times;</span>\r\n      </button>\r\n    </div>\r\n    <div class=\"dialog-body\">${bodyContent}</div>\r\n    <div class=\"dialog-footer\" ${!footerContent ? 'hidden' : ''}>${footerContent}</div>\r\n  </div>\r\n</div>\r\n</form>`;\r\n    let $dialog = $(html).appendTo('body');\r\n    $dialog.on('click', '[data-dismiss=\"dialog\"]', () => close(id))\r\n        .on('click', '.tips', () => false)\r\n        .on('click', '.disabled-link', () => false)\r\n        .keydown(function (e) {\r\n            if (e.keyCode === 27) {\r\n                return close(id);\r\n            }\r\n        })\r\n        .find('legend [type=\"checkbox\"]')\r\n        .click(function () {\r\n            let $this = $(this);\r\n            let checked = $this.prop('checked');\r\n            if (Util.isOpera() || Util.isEdge())\r\n                $this.closest('fieldset').find('input, select, textarea, button').not('legend input').prop('disabled', !checked);\r\n            else $this.closest('fieldset').prop('disabled', !checked);\r\n        }).end()\r\n        .find('input[data-disabled]')\r\n        .click(function () {\r\n            let $this = $(this);\r\n            let checked = $this.prop('checked');\r\n            $($this.data('disabled')).each(function () {\r\n                let $this = $(this);\r\n                if ($this.is('a')) {\r\n                    if (checked) $this.removeClass('disabled-link');\r\n                    else $this.addClass('disabled-link');\r\n                }\r\n                else {\r\n                    $this.prop('disabled', !checked);\r\n                }\r\n            });\r\n        }).end().find('[data-toggle=\"tooltip\"]').tooltip({'container': 'body'});\r\n    $(window).on('resize.' + id, function () {\r\n        let $focus = $(':focus');\r\n        if ($focus.length > 0) {\r\n            if ($focus.is('input') && !['checkbox', 'radio'].includes($focus.attr('type')) || $focus.is('textarea')) return;\r\n        }\r\n        resize(id);\r\n    });\r\n    return $dialog;\r\n};\r\n\r\n/**\r\n * \r\n * @param {string} id ID\r\n */\r\nexport const show = function (id) {\r\n    let $dialog = $('#' + id);\r\n    if (!$dialog.length) return;\r\n    $dialog.find('legend [type=\"checkbox\"]')\r\n        .each(function () {\r\n            $(this).triggerHandler('click');\r\n        }).end().find('input[data-disabled]')\r\n        .each(function () {\r\n            $(this).triggerHandler('click');\r\n        });\r\n    $dialog.fadeIn('normal').find('.close:first').focus();\r\n    resize(id);\r\n};\r\n\r\n/**\r\n * \r\n * @param {string} id ID\r\n */\r\nexport const resize = function (id) {\r\n    let $dialog = $('#' + id);\r\n    $dialog.find('.dialog-body')\r\n        .css('max-height', $(window).height() - $dialog.find('.dialog-header').outerHeight() - $dialog.find('.dialog-footer').outerHeight());\r\n};\r\n\r\n/**\r\n * \r\n * @param {string} id ID\r\n * @returns {boolean} false\r\n */\r\nexport const close = function (id) {\r\n    $('#' + id).fadeOut('normal', function () {\r\n        $(this).parent().remove();\r\n    });\r\n    $(window).off('resize.' + id);\r\n    return false;\r\n};\r\n","/*  */\r\n'use strict';\r\nimport * as Util from './util';\r\nimport Const from './const';\r\nimport {read as readConfig, write as writeConfig} from './config';\r\n\r\n/**\r\n * @\r\n */\r\nexport const handleAtTipsBtn = function () {\r\n    let $atTips = $('#atTips');\r\n    if ($atTips.data('time') === Util.getCookie(Const.atTipsTimeCookieName)) {\r\n        $atTips.removeClass('btn-outline-danger').addClass('btn-outline-primary');\r\n    }\r\n\r\n    $atTips.click(function () {\r\n        let $this = $(this);\r\n        let time = $this.data('time');\r\n        let cookieValue = Util.getCookie(Const.atTipsTimeCookieName);\r\n        if (!time || time === cookieValue) return;\r\n        if (!cookieValue) {\r\n            let currentDate = (new Date()).getDate();\r\n            Util.setCookie(Const.prevAtTipsTimeCookieName, (currentDate < 10 ? '0' + currentDate : currentDate) + '0000');\r\n        }\r\n        else if (cookieValue !== time) {\r\n            Util.setCookie(Const.prevAtTipsTimeCookieName, cookieValue);\r\n        }\r\n        Util.setCookie(Const.atTipsTimeCookieName, time, Util.getDate('+3d'));\r\n        $this.removeClass('btn-outline-danger').addClass('btn-outline-primary');\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleIndexThreadPanel = function () {\r\n    if (Config.activeNewReplyPanel) {\r\n        $(`a[data-toggle=\"tab\"][href=\"${Config.activeNewReplyPanel}\"]`).tab('show');\r\n    }\r\n    if (Config.activeTopRecommendPanel) {\r\n        $(`a[data-toggle=\"tab\"][href=\"${Config.activeTopRecommendPanel}\"]`).tab('show');\r\n    }\r\n\r\n    $(document).on('shown.bs.tab', 'a[data-toggle=\"tab\"]', function (e) {\r\n        let $target = $(e.target);\r\n        let targetPanel = $target.attr('href');\r\n        let typeName = '';\r\n        if (targetPanel.includes('NewReplyPanel')) typeName = 'activeNewReplyPanel';\r\n        else if (targetPanel.includes('TopRecommendPanel')) typeName = 'activeTopRecommendPanel';\r\n        if (typeName && Config[typeName] !== targetPanel) {\r\n            readConfig();\r\n            Config[typeName] = targetPanel;\r\n            writeConfig();\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleSelectBgImage = function () {\r\n    $('#selectBgImage').on('click', '[data-id]', function () {\r\n        let $this = $(this);\r\n        let id = $this.data('id');\r\n        let fileName = $this.data('filename');\r\n        let path = $this.parent().data('path');\r\n        if (!id || !fileName || !path) return;\r\n        if (confirm('')) {\r\n            Util.setCookie(Const.bgStyleCookieName, id, Util.getDate('+1y'), Const.storagePrefix);\r\n            $('body, .modal-content').css('background-image', 'url(\"' + path + fileName + '\")');\r\n            alert('');\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleSelectBgColor = function () {\r\n    $('#selectBgImage').on('click', '[data-color]', function () {\r\n        let $this = $(this);\r\n        let color = $this.data('color');\r\n        if (!color) return;\r\n        if (confirm('')) {\r\n            Util.setCookie(Const.bgStyleCookieName, color, Util.getDate('+1y'), Const.storagePrefix);\r\n            $('body, .modal-content').css('background', color);\r\n            alert('');\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleCustomBgStyle = function () {\r\n    $('#customBgStyle').click(function () {\r\n        let value = Util.getCookie(Const.bgStyleCookieName, Const.storagePrefix);\r\n        if (!value || parseInt(value)) value = '';\r\n        value = prompt(\r\n            'URLCSS\\nhttp://xxx.com/abc.jpg  #fcfcfc\\n' +\r\n            '',\r\n            value\r\n        );\r\n        if (value === null) return;\r\n        let $bg = $('body, .modal-content, .dialog-content');\r\n        if ($.trim(value) === '') {\r\n            Util.deleteCookie(Const.bgStyleCookieName, Const.storagePrefix);\r\n            alert('');\r\n            location.reload();\r\n        }\r\n        else if (/^https?:\\/\\/[^\"']+/.test(value)) {\r\n            Util.setCookie(Const.bgStyleCookieName, value, Util.getDate('+1y'), Const.storagePrefix);\r\n            $bg.css('background-image', 'url(\"' + value + '\")');\r\n            alert('');\r\n        }\r\n        else if (/^#[0-9a-f]{6}$/i.test(value)) {\r\n            Util.setCookie(Const.bgStyleCookieName, value, Util.getDate('+1y'), Const.storagePrefix);\r\n            $bg.css('background', value.toLowerCase());\r\n            alert('');\r\n        }\r\n        else if (!/[<>{}]/.test(value)) {\r\n            value = value.replace(';', '');\r\n            Util.setCookie(Const.bgStyleCookieName, value, Util.getDate('+1y'), Const.storagePrefix);\r\n            $bg.css('background', value);\r\n            alert('');\r\n        }\r\n        else {\r\n            alert('');\r\n        }\r\n    });\r\n};\r\n","/*  */\r\n'use strict';\r\n\r\n/**\r\n * \r\n * @param {string|Object} options \r\n * @param {string} [options.msg] \r\n * @param {number} [options.duration={@link Config.defShowMsgDuration}] -1\r\n * @param {boolean} [options.clickable=true] \r\n * @param {boolean} [options.preventable=false] \r\n * @param {number} [duration] -1\r\n * @example\r\n * show('<span class=\"mr-3\"></span><span class=\"text-item\"><em class=\"text-warning\">+1</em></span>', -1);\r\n * show({\r\n *   msg: '<span class=\"mr-3\"></span><span class=\"text-item\">KFB<em class=\"text-warning\">+8</em></span>',\r\n *   duration: 20,\r\n *   clickable: false,\r\n * });\r\n * @returns {jQuery} \r\n */\r\nexport const show = function (options, duration) {\r\n    let settings = {\r\n        msg: '',\r\n        duration: Config.defShowMsgDuration,\r\n        clickable: true,\r\n        preventable: false,\r\n    };\r\n    if ($.type(options) === 'object') {\r\n        $.extend(settings, options);\r\n    }\r\n    else {\r\n        settings.msg = options;\r\n        settings.duration = typeof duration === 'undefined' ? Config.defShowMsgDuration : duration;\r\n    }\r\n\r\n    let $container = $('.msg-container');\r\n    let isFirst = $container.length === 0;\r\n    if (!isFirst && !$('.mask').length) {\r\n        if ($container.height() >= $(window).height() * 0.8) {\r\n            destroy();\r\n            isFirst = true;\r\n        }\r\n    }\r\n    if (settings.preventable && !$('.mask').length) {\r\n        $('<div class=\"mask\"></div>').appendTo('body');\r\n    }\r\n    if (isFirst) {\r\n        $container = $('<div class=\"container msg-container\"></div>').appendTo('body');\r\n    }\r\n\r\n    let $msg = $(`<div class=\"msg\">${settings.msg}</div>`).appendTo($container);\r\n    $msg.on('click', '.stop-action', function (e) {\r\n        e.preventDefault();\r\n        $(this).text('&hellip;').closest('.msg').data('stop', true);\r\n    });\r\n    if (settings.clickable) {\r\n        $msg.css('cursor', 'pointer').click(function () {\r\n            hide($(this));\r\n        }).find('a').click(function (e) {\r\n            e.stopPropagation();\r\n        });\r\n    }\r\n    if (settings.preventable) $msg.attr('preventable', true);\r\n    $msg.slideDown('normal');\r\n    if (settings.duration > -1) {\r\n        setTimeout(() => {\r\n            hide($msg);\r\n        }, settings.duration * 1000);\r\n    }\r\n    return $msg;\r\n};\r\n\r\n/**\r\n * \r\n * @param {string} msg \r\n * @param {boolean} preventable \r\n * @returns {jQuery} \r\n */\r\nexport const wait = function (msg, preventable = true) {\r\n    msg += '<i class=\"fa fa-spinner fa-spin fa-lg fa-fw ml-3\" aria-label=\"\" aria-hidden=\"true\"></i>';\r\n    return show({msg, duration: -1, clickable: false, preventable});\r\n};\r\n\r\n/**\r\n * \r\n * @param {jQuery} $msg \r\n */\r\nexport const hide = function ($msg) {\r\n    $msg.slideUp('normal', function () {\r\n        remove($(this));\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n * @param {jQuery} $msg \r\n */\r\nexport const remove = function ($msg) {\r\n    let $container = $msg.parent();\r\n    $msg.remove();\r\n    if (!$('.msg').length) {\r\n        $container.remove();\r\n        $('.mask').remove();\r\n    }\r\n    else if (!$('.msg[preventable]').length) {\r\n        $('.mask').remove();\r\n    }\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const destroy = function () {\r\n    $('.msg-container').remove();\r\n    $('.mask').remove();\r\n};\r\n","/*  */\r\n'use strict';\r\nimport * as Util from './util';\r\nimport Const from './const';\r\nimport {read as readConfig, write as writeConfig} from './config';\r\n\r\n/**\r\n * \r\n */\r\nexport const highlightUnReadAtTipsMsg = function () {\r\n    if (Info.gjc !== Info.userName) return;\r\n    let timeString = Util.getCookie(Const.prevAtTipsTimeCookieName);\r\n    if (!timeString || !/^\\d+\\d+\\d+$/.test(timeString)) return;\r\n    let prevString = '';\r\n    $('.thread-list-item time').each(function (index) {\r\n        let $this = $(this);\r\n        let curString = $.trim($this.text());\r\n        if (index === 0) prevString = curString;\r\n        if (timeString < curString && prevString >= curString) {\r\n            $this.addClass('text-danger');\r\n            prevString = curString;\r\n        }\r\n        else return false;\r\n    });\r\n\r\n    $(document).on('click', '.thread-list-item .thread-link-item a', function () {\r\n        Util.deleteCookie(Const.prevAtTipsTimeCookieName);\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleGameIntroSearchArea = function () {\r\n    $('#gameSearchKeyword').val(Info.keyword);\r\n    $('#gameSearchType').val(Info.searchType);\r\n};\r\n\r\n/**\r\n * \r\n * @param {string} type \r\n */\r\nexport const tuiGameIntro = function (type) {\r\n    let cookieName = '';\r\n    if (type === 'company') cookieName = 'g_intro_inc_tui_';\r\n    else if (type === 'type') cookieName = 'g_intro_adv_tui_';\r\n    else if (type === 'property') cookieName = 'g_intro_moe_tui_';\r\n    else cookieName = 'g_intro_tui_';\r\n    cookieName += Info.id;\r\n    let url = Util.makeUrl('game_intro/' + type, `id=${Info.id}&tui=1`);\r\n\r\n    $('.tui-btn').click(function (e) {\r\n        e.preventDefault();\r\n        let $this = $(this);\r\n        if ($this.data('wait')) return;\r\n        if (Util.getCookie(cookieName, '')) {\r\n            alert('48');\r\n            return;\r\n        }\r\n        $this.data('wait', true);\r\n        $.ajax({\r\n            type: 'GET',\r\n            url: url,\r\n            success: function () {\r\n                let $num = $this.find('span:first');\r\n                let num = parseInt($num.text());\r\n                $num.text('+1');\r\n                setTimeout(() => {\r\n                    $num.text(++num);\r\n                }, 1000);\r\n            },\r\n            error: function () {\r\n                alert('');\r\n            },\r\n            complete: function () {\r\n                $this.removeData('wait');\r\n            },\r\n            dataType: 'html'\r\n        });\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const bindFavorPageBtnsClick = function () {\r\n    let $form = $('form[name=\"favorForm\"]');\r\n\r\n    $(document).on('click', '.remove-catalog', () => confirm(''));\r\n\r\n    $('#addCatalog').click(function (e) {\r\n        e.preventDefault();\r\n        let type = $.trim(prompt(''));\r\n        if (!type) return;\r\n        $form.find('[name=\"job\"]').val('addtype');\r\n        $form.find('[name=\"type\"]').val(type);\r\n        $form.submit();\r\n    });\r\n\r\n    $('#favorActionBtns').on('click', 'button', function () {\r\n        let action = $(this).data('action');\r\n        if (action === 'selectAll') {\r\n            Util.selectAll($('[name=\"delid[]\"]'));\r\n        }\r\n        else if (action === 'selectInverse') {\r\n            Util.selectInverse($('[name=\"delid[]\"]'));\r\n        }\r\n        else if (action === 'delete') {\r\n            let $checked = $('[name=\"delid[]\"]:checked');\r\n            if ($checked.length > 0 && confirm(`${$checked.length}`)) {\r\n                $form.find('[name=\"job\"]').val('clear');\r\n                $form.submit();\r\n            }\r\n        }\r\n    });\r\n\r\n    $('#convertCatalogDropdownMenu').on('click', 'a', function (e) {\r\n        e.preventDefault();\r\n        let type = $(this).data('type');\r\n        let $checked = $('[name=\"delid[]\"]:checked');\r\n        if ($checked.length > 0 && confirm(`${$checked.length}`)) {\r\n            $form.find('[name=\"job\"]').val('change');\r\n            $form.find('[name=\"type\"]').val(type);\r\n            $form.submit();\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const bindFriendPageBtnsClick = function () {\r\n    $('#friendActionBtns').on('click', '[type=\"button\"]', function () {\r\n        let action = $(this).data('action');\r\n        if (action === 'selectAll') {\r\n            Util.selectAll($('[name=\"selid[]\"]'));\r\n        }\r\n        else if (action === 'selectInverse') {\r\n            Util.selectInverse($('[name=\"selid[]\"]'));\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const assignBirthdayField = function () {\r\n    $('#birthday').change(function () {\r\n        let value = $(this).val().trim();\r\n        let matches = /(\\d{4})-(\\d{1,2})-(\\d{1,2})/.exec(value);\r\n        let year = '', month = '', day = '';\r\n        if (matches) {\r\n            year = parseInt(matches[1]);\r\n            month = parseInt(matches[2]);\r\n            day = parseInt(matches[3]);\r\n        }\r\n        $('[name=\"proyear\"]').val(year);\r\n        $('[name=\"promonth\"]').val(month);\r\n        $('[name=\"proday\"]').val(day);\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const syncPerPageFloorNum = function () {\r\n    /**\r\n     * \r\n     */\r\n    const syncConfig = function () {\r\n        let perPageFloorNum = parseInt($('[name=\"p_num\"]').val());\r\n        if (perPageFloorNum === 0) perPageFloorNum = 10;\r\n        if (!isNaN(perPageFloorNum) && perPageFloorNum !== Config.perPageFloorNum) {\r\n            Config.perPageFloorNum = perPageFloorNum;\r\n            writeConfig();\r\n        }\r\n    };\r\n\r\n    syncConfig();\r\n    $('#creator').submit(function () {\r\n        readConfig();\r\n        syncConfig();\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleUploadAvatarFileBtn = function () {\r\n    $('#browseAvatar').change(function () {\r\n        let $this = $(this);\r\n        let matches = /\\.(\\w+)$/.exec($this.val());\r\n        if (!matches || !['jpg', 'gif', 'png'].includes(matches[1].toLowerCase())) {\r\n            alert('');\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const transferKfbAlert = function () {\r\n    $('#transferKfbForm').submit(function () {\r\n        let $this = $(this);\r\n        let transferKfb = parseInt($this.find('[name=\"to_money\"]').val());\r\n        let fixedDeposit = parseInt($('#fixedDeposit').text());\r\n        let currentDeposit = parseInt($('#currentDeposit').text());\r\n        if (transferKfb > 0 && fixedDeposit > 0 && transferKfb > currentDeposit) {\r\n            if (!confirm('')) {\r\n                return false;\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const bindMessageActionBtnsClick = function () {\r\n    $('#messageActionBtns').on('click', 'button', function () {\r\n        let $form = $('#messageListForm');\r\n        let name = $(this).attr('name');\r\n        if (name === 'selectAll') {\r\n            Util.selectAll($('[name=\"delid[]\"]'));\r\n        }\r\n        else if (name === 'selectInverse') {\r\n            Util.selectInverse($('[name=\"delid[]\"]'));\r\n        }\r\n        else if (name === 'selectCustom') {\r\n            let title = $.trim(\r\n                prompt('|', 'KFB|||')\r\n            );\r\n            if (!title) return;\r\n            $('[name=\"delid[]\"]').prop('checked', false);\r\n            $('a.thread-link').each(function () {\r\n                let $this = $(this);\r\n                for (let key of title.split('|')) {\r\n                    if ($this.text().toLowerCase().includes(key.toLowerCase())) {\r\n                        $this.parent().find('[name=\"delid[]\"]').prop('checked', true);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else if (name === 'download') {\r\n            let $checked = $('[name=\"delid[]\"]:checked');\r\n            if ($checked.length > 0 && confirm(`${$checked.length}`)) {\r\n                $form.attr('action', '/message.php').find('[name=\"action\"]').val('down');\r\n                $form.submit();\r\n            }\r\n        }\r\n        else if (name === 'delete') {\r\n            let $checked = $('[name=\"delid[]\"]:checked');\r\n            if ($checked.length > 0 && confirm(`${$checked.length}`)) {\r\n                $form.attr('action', Util.makeUrl('message/job')).find('[name=\"action\"]').val('del');\r\n                $form.submit();\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const validateRegisterField = function () {\r\n    $(document).on('change', 'input[name]', function () {\r\n        let $this = $(this);\r\n        let name = $this.attr('name');\r\n        let value = $this.val();\r\n        if (!value) {\r\n            Util.showValidationMsg($this, 'clear');\r\n            return;\r\n        }\r\n        if (name === 'regemail') {\r\n            Util.showValidationMsg($this, 'wait', '&hellip;');\r\n            $.post(Util.makeUrl('register/check'), 'username=' + value, ({type, msg, username}) => {\r\n                if ($this.val() === username) {\r\n                    Util.showValidationMsg($this, type, msg);\r\n                }\r\n            }).fail(() => {\r\n                Util.showValidationMsg($this, 'error', '');\r\n            });\r\n        }\r\n        else if (name === 'regpwd') {\r\n            if (value.length > 16 || value.length < 6) {\r\n                Util.showValidationMsg($this, 'error', '');\r\n            }\r\n            else {\r\n                Util.showValidationMsg($this, 'clear');\r\n                $('[name=\"regpwdrepeat\"]').trigger('change');\r\n            }\r\n        }\r\n        else if (name === 'regpwdrepeat') {\r\n            if (value !== $('[name=\"regpwd\"]').val()) Util.showValidationMsg($this, 'error', '');\r\n            else Util.showValidationMsg($this, 'clear');\r\n        }\r\n    });\r\n\r\n    $('#registerForm').submit(function () {\r\n        if ($(this).find('.has-danger').length > 0) {\r\n            alert('');\r\n            return false;\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleUserPageBtns = function () {\r\n    let $area = $('#profileBtns');\r\n    let userName = $area.data('username');\r\n    $area.on('click', '[name=\"followUser\"], [name=\"blockUser\"]', function () {\r\n        readConfig();\r\n        let $this = $(this);\r\n        let str = '';\r\n        let userList = Config.followUserList;\r\n        if ($this.attr('name') === 'blockUser') {\r\n            str = '';\r\n            userList = Config.blockUserList;\r\n            Config.blockUserEnabled = true;\r\n        }\r\n        else Config.followUserEnabled = true;\r\n        if ($this.text().includes('')) {\r\n            let index = Util.inFollowOrBlockUserList(userName, userList);\r\n            if (index > -1) {\r\n                userList.splice(index, 1);\r\n                writeConfig();\r\n            }\r\n            $this.removeClass('btn-outline-danger').addClass('btn-outline-primary').find('span').text(str + '');\r\n            alert('' + str);\r\n        }\r\n        else {\r\n            if (Util.inFollowOrBlockUserList(userName, userList) === -1) {\r\n                if (str === '') {\r\n                    let type = Config.blockUserDefaultType;\r\n                    type = prompt('012', type);\r\n                    if (type === null) return;\r\n                    type = parseInt(type);\r\n                    if (isNaN(type) || type < 0 || type > 2) type = Config.blockUserDefaultType;\r\n                    userList.push({name: userName, type: type});\r\n                }\r\n                else {\r\n                    userList.push({name: userName});\r\n                }\r\n                writeConfig();\r\n            }\r\n            $this.removeClass('btn-outline-primary').addClass('btn-outline-danger').find('span').text('' + str);\r\n            alert('' + str);\r\n        }\r\n    }).find('[name=\"followUser\"], [name=\"blockUser\"]').each(function () {\r\n        let $this = $(this);\r\n        let str = '';\r\n        let userList = Config.followUserList;\r\n        if ($this.attr('name') === 'blockUser') {\r\n            str = '';\r\n            userList = Config.blockUserList;\r\n        }\r\n        if (Util.inFollowOrBlockUserList(userName, userList) > -1) {\r\n            $this.removeClass('btn-outline-primary').addClass('btn-outline-danger').find('span').text('' + str);\r\n        }\r\n    });\r\n};\r\n","/*  */\r\n'use strict';\r\nimport * as Util from './util';\r\nimport Const from './const';\r\nimport * as Msg from './msg';\r\n\r\n/**\r\n * \r\n */\r\nexport const handleEditorBtns = function () {\r\n    let textArea = $('#postContent').get(0);\r\n\r\n    // \r\n    $(document).on('click', '.editor-btn-group button[data-action]', function () {\r\n        let action = $(this).data('action');\r\n        let value = '';\r\n        switch (action) {\r\n            case 'link':\r\n                value = prompt('URL', 'http://');\r\n                break;\r\n            case 'img':\r\n                value = prompt('URL', 'http://');\r\n                break;\r\n            case 'sell':\r\n                value = prompt('', 1);\r\n                break;\r\n            case 'hide':\r\n                value = prompt('', 1);\r\n                break;\r\n            case 'audio': {\r\n                value = prompt('HTML5\\n', 'http://');\r\n                let matches = /^https?:\\/\\/music\\.163\\.com\\/(?:#\\/)?song\\?id=(\\d+)/i.exec(value);\r\n                if (matches) value = `http://music.miaola.info/163/${matches[1]}.mp3`;\r\n                matches = /^https?:\\/\\/www\\.xiami\\.com\\/song\\/(\\d+)/i.exec(value);\r\n                if (matches) value = `http://music.miaola.info/xiami/${matches[1]}.mp3`;\r\n            }\r\n                break;\r\n            case 'video': {\r\n                value = prompt('HTML5\\nYouTube', 'http://');\r\n                let matches = /^https?:\\/\\/(?:www\\.)?youtube\\.com\\/watch\\?v=([\\w\\-]+)/i.exec(value);\r\n                if (matches) value = `http://video.miaola.info/youtube/${matches[1]}`;\r\n                matches = /^https?:\\/\\/youtu\\.be\\/([\\w\\-]+)$/i.exec(value);\r\n                if (matches) value = `http://video.miaola.info/youtube/${matches[1]}`;\r\n            }\r\n                break;\r\n        }\r\n        if (value === null) return;\r\n\r\n        let selText = '';\r\n        let code = '';\r\n        switch (action) {\r\n            case 'link':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[url=${value}]${selText}[/url]`;\r\n                break;\r\n            case 'img':\r\n                code = `[img]${value}[/img]`;\r\n                break;\r\n            case 'quote':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[quote]${selText}[/quote]`;\r\n                break;\r\n            case 'code':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[code]${selText}[/code]`;\r\n                break;\r\n            case 'sell':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[sell=${value}]${selText}[/sell]`;\r\n                break;\r\n            case 'hide':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[hide=${value}]${selText}[/hide]`;\r\n                break;\r\n            case 'bold':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[b]${selText}[/b]`;\r\n                break;\r\n            case 'italic':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[i]${selText}[/i]`;\r\n                break;\r\n            case 'underline':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[u]${selText}[/u]`;\r\n                break;\r\n            case 'strike':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[strike]${selText}[/strike]`;\r\n                break;\r\n            case 'super':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[sup]${selText}[/sup]`;\r\n                break;\r\n            case 'sub':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[sub]${selText}[/sub]`;\r\n                break;\r\n            case 'horizontal':\r\n                code = `[hr]`;\r\n                break;\r\n            case 'align-left':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[align=left]${selText}[/align]`;\r\n                break;\r\n            case 'align-center':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[align=center]${selText}[/align]`;\r\n                break;\r\n            case 'align-right':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[align=right]${selText}[/align]`;\r\n                break;\r\n            case 'fly':\r\n                selText = Util.getSelText(textArea);\r\n                code = `[fly]${selText}[/fly]`;\r\n                break;\r\n            case 'audio':\r\n                code = `[audio]${value}[/audio]`;\r\n                break;\r\n            case 'video':\r\n                code = `[video]${value}[/video]`;\r\n                break;\r\n        }\r\n        if (!code) return;\r\n        Util.addCode(textArea, code, selText);\r\n        textArea.focus();\r\n    });\r\n\r\n    // \r\n    $('#fontSizeDropdownMenu').on('click', 'a', function (e) {\r\n        e.preventDefault();\r\n        let size = $(this).data('size');\r\n        let selText = Util.getSelText(textArea);\r\n        let code = `[size=${size}]${selText}[/size]`;\r\n        Util.addCode(textArea, code, selText);\r\n        textArea.focus();\r\n    });\r\n\r\n    // \r\n    $('#colorDropdownMenu, #bgColorDropdownMenu').on('click', 'span', function () {\r\n        let $this = $(this);\r\n        let codeType = $this.parent().is('#bgColorDropdownMenu') ? 'backcolor' : 'color';\r\n        let color = $this.data('color');\r\n        let selText = Util.getSelText(textArea);\r\n        let code = `[${codeType}=${color}]${selText}[/${codeType}]`;\r\n        Util.addCode(textArea, code, selText);\r\n        textArea.focus();\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const checkPostForm = function () {\r\n    $('#postForm').submit(function () {\r\n        let $postType = $('#postType');\r\n        if ($postType.length > 0 && !$postType.val()) {\r\n            alert('');\r\n            $postType.focus();\r\n            return false;\r\n        }\r\n\r\n        let $postTitle = $('#postTitle');\r\n        if ($postTitle.length > 0) {\r\n            let length = Util.getStrByteLen($postTitle.val());\r\n            if (!length) {\r\n                alert('');\r\n                $postTitle.focus();\r\n                return false;\r\n            }\r\n            else if (length > 100) {\r\n                alert(' 100 ');\r\n                $postTitle.focus();\r\n                return false;\r\n            }\r\n        }\r\n\r\n        let $voteItemContent = $('#voteItemContent');\r\n        if ($voteItemContent.length > 0) {\r\n            if (!$voteItemContent.val().trim()) {\r\n                alert('');\r\n                $voteItemContent.focus();\r\n                return false;\r\n            }\r\n        }\r\n\r\n        let $postContent = $('#postContent');\r\n        if ($postContent.length > 0) {\r\n            let length = Util.getStrByteLen($postContent.val().trim());\r\n            if (length < 12) {\r\n                alert(' 12 ');\r\n                $postContent.focus();\r\n                return false;\r\n            }\r\n            else if (length > 50000) {\r\n                alert(' 50000 ');\r\n                $postContent.focus();\r\n                return false;\r\n            }\r\n        }\r\n\r\n        let $postGjc = $('#postGjc');\r\n        if ($postGjc.length > 0 && Info.action === 'new' && !$postGjc.val().trim()) {\r\n            alert('');\r\n            $postGjc.focus();\r\n            return false;\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleAttachBtns = function () {\r\n    $(document).on('click', '.attach-area a[data-action]', function (e) {\r\n        e.preventDefault();\r\n        let $this = $(this);\r\n        let $area = $this.closest('.attach-area');\r\n        let action = $this.data('action');\r\n        let id = $area.data('id');\r\n        if (!id) return;\r\n        if (action === 'insert') {\r\n            let type = $this.data('type');\r\n            let textArea = $('#postContent').get(0);\r\n            let code = `[${type === 'new' ? 'upload' : 'attachment'}=${id}]`;\r\n            Util.addCode(textArea, code);\r\n            textArea.focus();\r\n        }\r\n        else if (action === 'update') {\r\n            $area.find('.attach-info').prop('hidden', true).after(\r\n                `<label><input name=\"replace_${id}\" type=\"file\" aria-label=\"\"></label>`\r\n            );\r\n            $this.data('action', 'cancel').text('').blur();\r\n            if (!$(document).data('attachUpdateAlert')) {\r\n                alert('30');\r\n                $(document).data('attachUpdateAlert', true);\r\n            }\r\n        }\r\n        else if (action === 'cancel') {\r\n            $area.find('.attach-info').prop('hidden', false).next('label').remove();\r\n            $this.data('action', 'update').text('').blur();\r\n        }\r\n        else if (action === 'delete') {\r\n            $area.remove();\r\n        }\r\n    });\r\n\r\n    $(document).on('change', '[type=\"file\"]', function () {\r\n        let $this = $(this);\r\n        let matches = /\\.(\\w+)$/.exec($this.val());\r\n        if (!matches || !['jpg', 'gif', 'png', 'torrent'].includes(matches[1].toLowerCase())) {\r\n            alert('');\r\n            return;\r\n        }\r\n\r\n        let type = $this.data('type');\r\n        if (type === 'new') {\r\n            $this.removeData('type').parent().next().prop('hidden', false);\r\n\r\n            let $newAttachArea = $('#newAttachArea');\r\n            let totalNum = $newAttachArea.find('[type=\"file\"]').length;\r\n            if (totalNum >= 5) return;\r\n            let $lastAttachArea = $newAttachArea.find('[type=\"file\"]:last').closest('.attach-area');\r\n            let id = parseInt($lastAttachArea.data('id'));\r\n            if (!id) return;\r\n            id++;\r\n            $(`\r\n<div class=\"form-group row font-size-sm attach-area\" data-id=\"${id}\">\r\n  <div class=\"col-xs-12 col-form-label\">\r\n    <label>\r\n      <input name=\"attachment_${id}\" data-type=\"new\" type=\"file\" aria-label=\"\">\r\n    </label>\r\n    <span hidden>\r\n      <a data-action=\"insert\" data-type=\"new\" href=\"#\"></a>&nbsp;\r\n      <a data-action=\"delete\" href=\"#\"></a>\r\n    </span>\r\n  </div>\r\n  <div class=\"col-xs-4\">\r\n    <label class=\"sr-only\" for=\"atc_downrvrc${id}\"></label>\r\n    <input class=\"form-control form-control-sm\" id=\"atc_downrvrc${id}\" name=\"atc_downrvrc${id}\" data-toggle=\"tooltip\" \r\ntype=\"number\" value=\"0\" min=\"0\" title=\"\" placeholder=\"\">\r\n  </div>\r\n  <div class=\"col-xs-8\">\r\n    <label class=\"sr-only\" for=\"atc_desc${id}\"></label>\r\n    <input class=\"form-control form-control-sm\" id=\"atc_desc${id}\" name=\"atc_desc${id}\" data-toggle=\"tooltip\" type=\"text\" \r\ntitle=\"\" placeholder=\"\">\r\n  </div>\r\n</div>\r\n`).insertAfter($lastAttachArea).find('[data-toggle=\"tooltip\"]').tooltip({'container': 'body'});\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n * @param {jQuery} $node jQuery\r\n */\r\nexport const addSmileCode = function ($node) {\r\n    $('.smile-panel').on('click', 'img', function () {\r\n        $('.smile-panel').addClass('open');\r\n        let textArea = $node.get(0);\r\n        if (!textArea) return;\r\n        let code = `[s:${$(this).data('id')}]`;\r\n        Util.addCode(textArea, code, '');\r\n        textArea.blur();\r\n    }).parent().on('shown.bs.dropdown', function () {\r\n        $('.smile-panel img').each(function () {\r\n            let $this = $(this);\r\n            if (!$this.attr('src')) {\r\n                $this.attr('src', $this.data('src'));\r\n            }\r\n        });\r\n    }).on('hide.bs.dropdown', function (e) {\r\n        let $relatedTarget = $(e.relatedTarget);\r\n        if (!$relatedTarget.data('open')) $relatedTarget.removeData('open');\r\n        else return e.preventDefault();\r\n    });\r\n\r\n    $('#smileDropdownBtn').click(function () {\r\n        let $this = $(this);\r\n        $this.data('open', !$this.data('open'));\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n * @param {number} type 12\r\n */\r\nexport const handleMultiQuote = function (type = 1) {\r\n    let data = localStorage[Const.multiQuoteStorageName];\r\n    if (!data) return;\r\n    try {\r\n        data = JSON.parse(data);\r\n    }\r\n    catch (ex) {\r\n        return;\r\n    }\r\n    if (!data || $.type(data) !== 'object' || $.isEmptyObject(data)) return;\r\n    let {tid, quoteList} = data;\r\n    if (!Info.tid || tid !== Info.tid || $.type(quoteList) !== 'object') return;\r\n    if (type === 2 && !Info.fid) return;\r\n    let list = [];\r\n    for (let data of Object.values(quoteList)) {\r\n        if (!Array.isArray(data)) continue;\r\n        for (let quote of data) {\r\n            list.push(quote);\r\n        }\r\n    }\r\n    if (!list.length) {\r\n        localStorage.removeItem(Const.multiQuoteStorageName);\r\n        return;\r\n    }\r\n\r\n    let keywords = new Set();\r\n    let content = '';\r\n    if (type === 2) {\r\n        Msg.wait(`<span class=\"mr-3\">&hellip;</span><em class=\"text-warning countdown-num\">${list.length}</em>`);\r\n        $(document).clearQueue('MultiQuote');\r\n    }\r\n    $.each(list, function (index, data) {\r\n        if (typeof data.floor === 'undefined' || typeof data.pid === 'undefined') return;\r\n        keywords.add(data.userName);\r\n        if (type === 2) {\r\n            $(document).queue('MultiQuote', function () {\r\n                $.get(Util.makeUrl(\r\n                    'post/index',\r\n                    `action=quote&fid=${Info.fid}&tid=${tid}&pid=${data.pid}&article=${data.floor}&t=${new Date().getTime()}`\r\n                ), function ({postContent}) {\r\n                    content += postContent ? postContent + (index === list.length - 1 ? '' : '\\n') : '';\r\n                    let $countdownNum = $('.countdown-num:last');\r\n                    $countdownNum.text(parseInt($countdownNum.text()) - 1);\r\n                    if (index === list.length - 1) {\r\n                        Msg.destroy();\r\n                        $('#postContent').val(content).focus();\r\n                    }\r\n                    else {\r\n                        setTimeout(() => $(document).dequeue('MultiQuote'), 100);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            content += `[quote] ${data.floor}(${data.userName}) [/quote]\\n`;\r\n        }\r\n    });\r\n    for (let [index, quote] of list.entries()) {\r\n    }\r\n    $('[name=\"diy_guanjianci\"]').val([...keywords].join(','));\r\n    $('#postForm').submit(function () {\r\n        localStorage.removeItem(Const.multiQuoteStorageName);\r\n    });\r\n    if (type === 2) $(document).dequeue('MultiQuote');\r\n    else $('#postContent').val(content).focus();\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleClearMultiQuoteDataBtn = function () {\r\n    $('.clear-multi-quote-data-btn').click(function (e) {\r\n        e.preventDefault();\r\n        if (!confirm('')) return;\r\n        localStorage.removeItem(Const.multiQuoteStorageName);\r\n        $('[name=\"diy_guanjianci\"]').val('');\r\n        $('#postContent').val('');\r\n    });\r\n};\r\n","/*  */\r\n'use strict';\r\nimport * as Util from './util';\r\nimport Const from './const';\r\nimport * as Dialog from './dialog';\r\nimport {read as readConfig, write as writeConfig} from './config';\r\nimport * as ConfigDialog from './configDialog';\r\n\r\n/**\r\n * \r\n */\r\nexport const handleMainMenu = function () {\r\n    $('#mainMenuTogglerBtn').click(function () {\r\n        let maxHeight = document.documentElement.clientHeight - $(this).closest('.navbar').outerHeight();\r\n        if (maxHeight > 0) {\r\n            $('#mainMenu').css('max-height', maxHeight + 'px');\r\n        }\r\n    });\r\n    $('#sidebarMainMenuBtn').click(() => $('#mainMenuTogglerBtn').click());\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleMainMenuLink = function () {\r\n    $('#mainMenu').find('[data-name=\"openConfigDialog\"]').click(function (e) {\r\n        e.preventDefault();\r\n        $('#mainMenuTogglerBtn').click();\r\n        ConfigDialog.show();\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const showSidebarBtnGroup = function () {\r\n    $('.sidebar-btn-group').prop('hidden', false);\r\n    if (Config.showSidebarRollBtnEnabled) $('#sidebarRollBtn').prop('hidden', false);\r\n    if (Config.showSidebarMainMenuBtnEnabled) $('#sidebarMainMenuBtn').prop('hidden', false);\r\n    if (Config.showSidebarForumListBtnEnabled) $('#sidebarForumListBtn').prop('hidden', false);\r\n    if (Config.showSidebarSearchBtnEnabled) $('#sidebarSearchBtn').prop('hidden', false);\r\n    if (Config.showSidebarHomePageBtnEnabled) $('#sidebarHomePageBtn').prop('hidden', false);\r\n};\r\n\r\n/**\r\n * /\r\n */\r\nexport const handleSidebarRollBtn = function () {\r\n    $(window).scroll(function () {\r\n        let $btn = $('#sidebarRollBtn');\r\n        if ($(window).scrollTop() > 640) {\r\n            if ($btn.data('direction') === 'top') return;\r\n            $btn.data('direction', 'top').attr('aria-label', '')\r\n                .find('i').removeClass('fa-chevron-down').addClass('fa-chevron-up');\r\n        }\r\n        else {\r\n            if ($btn.data('direction') === 'bottom') return;\r\n            $btn.data('direction', 'bottom').attr('aria-label', '')\r\n                .find('i').removeClass('fa-chevron-up').addClass('fa-chevron-down');\r\n        }\r\n    });\r\n\r\n    $('#sidebarRollBtn').click(function () {\r\n        let scrollTop = $(this).data('direction') === 'bottom' ? $('body').height() : 0;\r\n        $('body, html').animate({scrollTop: scrollTop});\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleSearchDialog = function () {\r\n    let $searchDialog = $('#searchDialog');\r\n\r\n    $searchDialog.on('shown.bs.modal', function () {\r\n        $('#searchKeyword').select().focus();\r\n    }).find('form').submit(function () {\r\n        let $this = $(this);\r\n        let $searchKeyword = $this.find('#searchKeyword');\r\n        let searchType = $this.find('#searchType').val();\r\n        let keyword = $.trim($searchKeyword.val());\r\n        if (searchType === 'gjc') {\r\n            $this.attr('action', Util.makeUrl('gjc/' + keyword));\r\n        }\r\n        else if (searchType === 'username') {\r\n            $this.attr('action', Util.makeUrl('user/username/' + keyword));\r\n        }\r\n        else {\r\n            $this.attr('action', Util.makeUrl('search'));\r\n            $searchKeyword.attr('name', searchType === 'author' ? 'pwuser' : 'keyword');\r\n            if (searchType === 'title') {\r\n                if (keyword.length && Util.getStrByteLen(keyword) <= 2) {\r\n                    let $method = $this.find('[name=\"method\"]');\r\n                    $method.val('OR');\r\n                    $searchKeyword.val(keyword + ' ' + Math.floor(new Date().getTime() / 1000));\r\n                    setTimeout(() => {\r\n                        $searchKeyword.val(keyword);\r\n                        $method.val('AND');\r\n                    }, 200);\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    $searchDialog.find('[name=\"searchRange\"]').on('click', function () {\r\n        let value = 'all';\r\n        if ($(this).val() === 'current') value = Info.fid;\r\n        $searchDialog.find('[name=\"f_fid\"]').val(value);\r\n    });\r\n\r\n    let $current = $searchDialog.find('[name=\"searchRange\"][value=\"current\"]');\r\n    let $currentBox = $current.closest('.form-check-inline');\r\n    $searchDialog.find('#searchType').change(function () {\r\n        let searchType = $(this).val();\r\n        if (!$current.data('enabled')) return;\r\n        let disabled = searchType === 'gjc' || searchType === 'username';\r\n        $current.prop('disabled', disabled);\r\n        if (disabled) $currentBox.addClass('disabled');\r\n        else $currentBox.removeClass('disabled');\r\n    });\r\n\r\n    if (pageId === 'threadPage' || pageId === 'readPage') {\r\n        $current.prop('disabled', false).data('enabled', true).click();\r\n        $currentBox.removeClass('disabled');\r\n    }\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handlePageInput = function () {\r\n    $(document).on('click', '.page-input', function (e) {\r\n        e.preventDefault();\r\n        if (Info.maxPageNum && Info.maxPageNum <= 1) return;\r\n        let action = $(this).data('url');\r\n        if (!action) return;\r\n        let excludeParams = $(this).data('exclude');\r\n        if (excludeParams) excludeParams = excludeParams.split(',');\r\n        else excludeParams = [];\r\n        let num = parseInt(\r\n            prompt(`${Info.maxPageNum ? `${Info.maxPageNum}` : ''}`, Info.currentPageNum)\r\n        );\r\n        if (num && num > 0) {\r\n            location.href = Util.makeUrl(action, 'page=' + num, true, excludeParams);\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n * @param {jQuery} $node jQuery\r\n */\r\nexport const bindFastSubmitShortcutKey = function ($node) {\r\n    $node.keydown(function (e) {\r\n        if (e.keyCode === 13 && e.ctrlKey) {\r\n            $(this).closest('form').submit();\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const showEditCommonForumDialog = function () {\r\n    $(document).on('click', '.edit-common-forum-btn', function (e) {\r\n        e.preventDefault();\r\n        const dialogName = 'editCommonForumDialog';\r\n        if ($('#' + dialogName).length > 0) return;\r\n        readConfig();\r\n\r\n        let commonForumList = Config.commonForumList.length > 0 ? Config.commonForumList : Const.commonForumList;\r\n        let commonForumListHtml = '';\r\n        for (let {fid, name} of commonForumList) {\r\n            commonForumListHtml += `<span class=\"btn btn-outline-primary\" data-fid=\"${fid}\">${name}</span>`;\r\n        }\r\n        let availableForumListHtml = '';\r\n        for (let {fid, name} of Const.availableForumList) {\r\n            if (commonForumList.find(elem => elem.fid === fid)) continue;\r\n            availableForumListHtml += `<span class=\"btn btn-outline-primary\" data-fid=\"${fid}\">${name}</span>`;\r\n        }\r\n\r\n        let bodyContent = `\r\n<p class=\"font-size-sm text-muted\">\r\n  \r\n</p>\r\n<fieldset class=\"fieldset mb-3 py-2\">\r\n  <legend></legend>\r\n  <div class=\"edit-forum-list d-flex flex-wrap\" id=\"editCommonForumList\">${commonForumListHtml}</div>\r\n</fieldset>\r\n<fieldset class=\"fieldset mb-3 py-2\">\r\n  <legend></legend>\r\n  <div class=\"edit-forum-list d-flex flex-wrap\" id=\"editAvailableForumList\">${availableForumListHtml}</div>\r\n</fieldset>`;\r\n        let footerContent = `\r\n<button class=\"btn btn-primary\" type=\"submit\"></button>\r\n<button class=\"btn btn-secondary\" data-dismiss=\"dialog\" type=\"button\"></button>\r\n<button class=\"btn btn-danger\" name=\"reset\" type=\"button\"></button>`;\r\n        let $dialog = Dialog.create(dialogName, '', bodyContent, footerContent);\r\n\r\n        let $dragulaScriptPath = $('[name=\"dragulaScriptPath\"]');\r\n        let dragulaScriptPath = $dragulaScriptPath.val();\r\n        if (dragulaScriptPath) {\r\n            $.getScript(dragulaScriptPath, () => dragula($dialog.find('.edit-forum-list').get(), {revertOnSpill: true}));\r\n            $dragulaScriptPath.val('');\r\n        }\r\n        else dragula($dialog.find('.edit-forum-list').get(), {revertOnSpill: true});\r\n\r\n        $dialog.submit(function (e) {\r\n            e.preventDefault();\r\n            Config.commonForumList = [];\r\n            $('#editCommonForumList').children('.btn').each(function () {\r\n                let $this = $(this);\r\n                let fid = parseInt($this.data('fid'));\r\n                let name = $this.text().trim();\r\n                if (!fid || !name) return;\r\n                Config.commonForumList.push({fid: fid, name: name});\r\n            });\r\n            writeConfig();\r\n            alert('');\r\n            Dialog.close(dialogName);\r\n            location.reload();\r\n        }).find('[name=\"reset\"]').click(function () {\r\n            if (!confirm('')) return;\r\n            Config.commonForumList = [];\r\n            writeConfig();\r\n            alert('');\r\n            Dialog.close(dialogName);\r\n            location.reload();\r\n        });\r\n\r\n        Dialog.show(dialogName);\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const fillCommonForumPanel = function () {\r\n    let commonForumList = Config.commonForumList.length > 0 ? Config.commonForumList : Const.commonForumList;\r\n    let html = '';\r\n    for (let [index, {fid, name}] of commonForumList.entries()) {\r\n        if (index === 0 || index % 3 === 0) html += '<div class=\"row mb-3\">';\r\n        html += `\r\n<div class=\"col-4\">\r\n  <a class=\"btn btn-outline-primary btn-block\" href=\"${Util.makeUrl('thread')}/${fid}\">${name}</a>\r\n</div>`;\r\n        if (index === commonForumList.length - 1 || index % 3 === 2) html += '</div>';\r\n    }\r\n    $('.common-forum-panel').html(html);\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const preventCloseWindow = function () {\r\n    window.addEventListener(\"beforeunload\", function (e) {\r\n        if ($('.mask').length > 0) {\r\n            let msg = '';\r\n            e.returnValue = msg;\r\n            return msg;\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * /\r\n * @param {string} title \r\n * @param {string} configName \r\n * @param {?function} [callback] \r\n * @param {?function} [callbackAfterSubmit] \r\n */\r\nexport const showCommonImportOrExportConfigDialog = function (title, configName, callback, callbackAfterSubmit) {\r\n    const dialogName = 'pdCommonImOrExConfigDialog';\r\n    if ($('#' + dialogName).length > 0) return;\r\n    readConfig();\r\n    let bodyContent = `\r\n<p class=\"font-size-sm\">\r\n  <b></b><br>\r\n  <b></b>\r\n</p>\r\n<div class=\"form-group\">\r\n  <textarea class=\"form-control\" name=\"commonConfig\" rows=\"10\" aria-label=\"\" style=\"word-break: break-all;\"></textarea>\r\n</div>`;\r\n    let footerContent = `\r\n<button class=\"btn btn-primary\" type=\"submit\"></button>\r\n<button class=\"btn btn-secondary\" data-dismiss=\"dialog\" type=\"button\"></button>`;\r\n    let $dialog = Dialog.create(dialogName, `${title}`, bodyContent, footerContent);\r\n\r\n    $dialog.submit(function (e) {\r\n        e.preventDefault();\r\n        if (!confirm('')) return;\r\n        let options = $.trim($dialog.find('[name=\"commonConfig\"]').val());\r\n        if (!options) return;\r\n        try {\r\n            options = JSON.parse(options);\r\n        }\r\n        catch (ex) {\r\n            alert('');\r\n            return;\r\n        }\r\n        if (!options || $.type(options) !== $.type(Config[configName])) {\r\n            alert('');\r\n            return;\r\n        }\r\n        Config[configName] = options;\r\n        writeConfig();\r\n        alert('');\r\n        Dialog.close(dialogName);\r\n        if (typeof callbackAfterSubmit === 'function') callbackAfterSubmit();\r\n        else location.reload();\r\n    });\r\n    Dialog.show(dialogName);\r\n    $dialog.find('[name=\"commonConfig\"]').val(JSON.stringify(Config[configName])).select().focus();\r\n    if (typeof callback === 'function') callback($dialog);\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const followUsers = function () {\r\n    if (!Config.followUserList.length) return;\r\n    if (pageId === 'indexPage' && Config.highlightFollowUserThreadInHPEnabled) {\r\n        $('.thread-link').each(function () {\r\n            let $this = $(this);\r\n            if (Util.inFollowOrBlockUserList($this.data('author'), Config.followUserList) > -1) {\r\n                $this.addClass('text-danger');\r\n            }\r\n        });\r\n    }\r\n    else if (pageId === 'threadPage') {\r\n        $('.thread-link').each(function () {\r\n            let $this = $(this);\r\n            if (Util.inFollowOrBlockUserList($this.data('author'), Config.followUserList) > -1) {\r\n                $this.closest('.thread-list-item').find('.thread-item-footer a:first').addClass('text-danger');\r\n                if (Config.highlightFollowUserThreadLinkEnabled) $this.addClass('text-danger');\r\n            }\r\n        });\r\n    }\r\n    else if (pageId === 'readPage') {\r\n        $('.read-floor').each(function () {\r\n            let $this = $(this);\r\n            if (Util.inFollowOrBlockUserList($this.data('username'), Config.followUserList) > -1) {\r\n                $this.find('.floor-num').addClass('text-danger');\r\n            }\r\n        });\r\n    }\r\n    else if (pageId === 'gjcPage' || pageId === 'sharePage' || pageId === 'searchPage') {\r\n        $('.thread-list-group').find('a[data-author]').each(function () {\r\n            let $this = $(this);\r\n            if (Util.inFollowOrBlockUserList($this.data('author'), Config.followUserList) > -1) {\r\n                $this.addClass('text-danger');\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const blockUsers = function () {\r\n    if (!Config.blockUserList.length) return;\r\n    let num = 0;\r\n    if (pageId === 'indexPage') {\r\n        $('.thread-link').each(function () {\r\n            let $this = $(this);\r\n            let index = Util.inFollowOrBlockUserList($this.data('author'), Config.blockUserList);\r\n            if (index > -1 && Config.blockUserList[index].type <= 1) {\r\n                num++;\r\n                $this.closest('.thread-link-group').remove();\r\n            }\r\n        });\r\n    }\r\n    else if (pageId === 'threadPage') {\r\n        if (Config.blockUserForumType === 1 && !Config.blockUserFidList.includes(Info.fid)) return;\r\n        else if (Config.blockUserForumType === 2 && Config.blockUserFidList.includes(Info.fid)) return;\r\n        $('.thread-link').each(function () {\r\n            let $this = $(this);\r\n            let index = Util.inFollowOrBlockUserList($this.data('author'), Config.blockUserList);\r\n            if (index > -1 && Config.blockUserList[index].type <= 1) {\r\n                num++;\r\n                $this.closest('.thread-list-item').remove();\r\n            }\r\n        });\r\n    }\r\n    else if (pageId === 'readPage') {\r\n        if (Config.blockUserForumType === 1 && !Config.blockUserFidList.includes(Info.fid)) return;\r\n        else if (Config.blockUserForumType === 2 && Config.blockUserFidList.includes(Info.fid)) return;\r\n        $('.read-floor').each(function () {\r\n            let $this = $(this);\r\n            let index = Util.inFollowOrBlockUserList($this.data('username'), Config.blockUserList);\r\n            if (index > -1) {\r\n                let floor = parseInt($this.data('floor'));\r\n                if (Config.blockUserList[index].type === 2 && floor === 0) return;\r\n                else if (Config.blockUserList[index].type === 1 && floor > 0) return;\r\n                num++;\r\n                $this.closest('.read-floor').remove();\r\n            }\r\n        });\r\n        $('.read-content').find('.blockquote > p').each(function () {\r\n            let $this = $(this);\r\n            let content = $this.text().trim();\r\n            for (let data of Config.blockUserList) {\r\n                if (data.type === 1) continue;\r\n                try {\r\n                    let regex1 = new RegExp(`^(\\\\d+|)${data.name}`, 'i');\r\n                    let regex2 = new RegExp(`^\\\\s*\\\\d+\\\\(${data.name}\\\\)\\\\s*`, 'i');\r\n                    if (regex1.test(content) || regex2.test(content)) {\r\n                        $this.html(`<mark class=\"help\" data-toggle=\"tooltip\" title=\"${data.name}\"></mark>`);\r\n                    }\r\n                }\r\n                catch (ex) {\r\n                }\r\n            }\r\n        });\r\n    }\r\n    else if (pageId === 'gjcPage' && Config.blockUserAtTipsEnabled) {\r\n        $('.thread-list-group').find('a[data-author]').each(function () {\r\n            let $this = $(this);\r\n            if (Util.inFollowOrBlockUserList($this.data('author'), Config.blockUserList) > -1) {\r\n                num++;\r\n                $this.closest('.thread-list-item').remove();\r\n            }\r\n        });\r\n    }\r\n    if (num > 0) console.log(`${num}`);\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const blockThread = function () {\r\n    if (!Config.blockThreadList.length) return;\r\n\r\n    /**\r\n     * \r\n     * @param {string} title \r\n     * @param {string} userName \r\n     * @param {number} fid ID\r\n     * @returns {boolean} \r\n     */\r\n    const isBlock = function (title, userName, fid = 0) {\r\n        for (let {keyWord, includeUser, excludeUser, includeFid, excludeFid} of Config.blockThreadList) {\r\n            let regex = null;\r\n            if (/^\\/.+\\/[gimuy]*$/.test(keyWord)) {\r\n                try {\r\n                    regex = eval(keyWord);\r\n                }\r\n                catch (ex) {\r\n                    console.log(ex);\r\n                    continue;\r\n                }\r\n            }\r\n            if (userName) {\r\n                if (includeUser) {\r\n                    if (!includeUser.includes(userName)) continue;\r\n                }\r\n                else if (excludeUser) {\r\n                    if (excludeUser.includes(userName)) continue;\r\n                }\r\n            }\r\n            if (fid) {\r\n                if (includeFid) {\r\n                    if (!includeFid.includes(fid)) continue;\r\n                }\r\n                else if (excludeFid) {\r\n                    if (excludeFid.includes(fid)) continue;\r\n                }\r\n            }\r\n            if (regex) {\r\n                if (regex.test(title)) return true;\r\n            }\r\n            else {\r\n                if (title.toLowerCase().includes(keyWord.toLowerCase())) return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    let num = 0;\r\n    if (pageId === 'indexPage') {\r\n        $('.thread-link').each(function () {\r\n            let $this = $(this);\r\n            if (isBlock($this.text().trim(), $this.data('author'))) {\r\n                num++;\r\n                $this.closest('.thread-link-group').remove();\r\n            }\r\n        });\r\n    }\r\n    else if (pageId === 'threadPage') {\r\n        $('.thread-link').each(function () {\r\n            let $this = $(this);\r\n            if (isBlock($this.text().trim(), $this.data('author'), Info.fid)) {\r\n                num++;\r\n                $this.closest('.thread-list-item').remove();\r\n            }\r\n        });\r\n    }\r\n    else if (pageId === 'readPage') {\r\n        if (Info.currentPageNum !== 1) return;\r\n        let $topFloor = $('.read-floor[data-floor=\"0\"]');\r\n        if (!$topFloor.length) return;\r\n        if (isBlock($('.thread-title').text().trim(), $topFloor.data('username'), Info.fid)) {\r\n            num++;\r\n            $topFloor.remove();\r\n        }\r\n    }\r\n    if (num > 0) console.log(`${num}`);\r\n};\r\n","/*  */\r\n'use strict';\r\nimport * as Util from './util';\r\nimport Const from './const';\r\nimport {write as writeConfig} from './config';\r\nimport * as Msg from './msg';\r\n\r\n/**\r\n * \r\n */\r\nexport const handleCopyFloorLinkBtn = function () {\r\n    $(document).on('click', '.floor-num', function (e) {\r\n        e.preventDefault();\r\n        let $this = $(this);\r\n        let link = Util.getHostNameUrl() + $this.attr('href');\r\n        $this.data('copy-text', link);\r\n        if (!Util.copyText($this, $this)) {\r\n            prompt('', link);\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleFastReplyBtn = function () {\r\n    $(document).on('click', '.fast-reply-btn', function () {\r\n        let $article = $(this).closest('article');\r\n        let floor = $article.data('floor');\r\n        let userName = $article.data('username');\r\n        $('#postGjc').val(userName);\r\n        let postContent = $('#postContent').get(0);\r\n        postContent.value = `[quote] ${floor}(${userName}) [/quote]\\n`;\r\n        postContent.selectionStart = postContent.value.length;\r\n        postContent.selectionEnd = postContent.value.length;\r\n        postContent.focus();\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleBlockFloorBtn = function () {\r\n    $(document).on('click', '.block-floor', () => confirm(''));\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleBuyThreadBtn = function () {\r\n    $(document).on('click', '.buy-thread-btn', function (e) {\r\n        e.preventDefault();\r\n        let $this = $(this);\r\n        let pid = $this.data('pid');\r\n        let price = $this.data('price');\r\n        if (price > 5 && !confirm(`${price}KFB`)) return;\r\n        let $wait = Msg.wait('&hellip;');\r\n        $.get(Util.makeUrl('job/buytopic', `tid=${Info.tid}&pid=${pid}&verify=${Info.verify}`),\r\n            function ({msg}) {\r\n                Msg.remove($wait);\r\n                if (msg === '') {\r\n                    location.reload();\r\n                }\r\n                else if (msg.includes('')) {\r\n                    alert('');\r\n                    location.reload();\r\n                }\r\n                else {\r\n                    alert('');\r\n                }\r\n            });\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const copyBuyThreadList = function () {\r\n    $(document).on('change', '.buy-thread-list', function () {\r\n        let $this = $(this);\r\n        if ($this.val() !== 'copyList') return;\r\n        let list = $this.find('option').map(function (index) {\r\n            let name = $(this).text();\r\n            if (index === 0 || index === 1 || name.includes('-'.repeat(11))) return null;\r\n            else return name;\r\n        }).get().join('\\n');\r\n        $this.get(0).selectedIndex = 0;\r\n        if (!list) {\r\n            alert('');\r\n            return;\r\n        }\r\n\r\n        let $dialog = $(`\r\n<div class=\"modal fade\" id=\"buyThreadListDialog\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"buyThreadListDialogTitle\"\r\n     aria-hidden=\"true\">\r\n  <div class=\"modal-dialog modal-sm\" role=\"document\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\" id=\"buyThreadListDialogTitle\"></h5>\r\n        <button class=\"close\" data-dismiss=\"modal\" type=\"button\" aria-label=\"\">\r\n          <span aria-hidden=\"true\">&times;</span>\r\n        </button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <div class=\"form-group\">\r\n          <textarea class=\"form-control\" name=\"buyThreadListContent\" rows=\"14\" aria-label=\"\">${list}</textarea>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n`).appendTo('body');\r\n        $dialog.on('shown.bs.modal', function () {\r\n            $dialog.find('[name=\"buyThreadListContent\"]').select().focus();\r\n        }).on('hidden.bs.modal', function () {\r\n            $dialog.remove();\r\n        }).modal('show');\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleFloorImage = function () {\r\n    $(document).on('click', '.img', function () {\r\n        let $this = $(this);\r\n        if ($this.parent().is('a') || this.naturalWidth <= $this.closest('.read-content').width()) return;\r\n        location.href = $this.attr('src');\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const gotoFloor = function () {\r\n    if (Info.floor && Info.floor > 0) {\r\n        let hashName = $(`article[data-floor=\"${Info.floor}\"]`).prev('a').attr('name');\r\n        if (hashName) location.hash = '#' + hashName;\r\n    }\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleFastGotoFloorBtn = function () {\r\n    $('.fast-goto-floor').click(function (e) {\r\n        e.preventDefault();\r\n        let action = $(this).data('url');\r\n        if (!action) return;\r\n        let floor = parseInt(prompt(''));\r\n        if (!floor || floor <= 0) return;\r\n        location.href = Util.makeUrl(action, `page=${Math.floor(floor / Config.perPageFloorNum) + 1}&floor=${floor}`);\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleTuiThreadBtn = function () {\r\n    $('.tui-btn').click(function (e) {\r\n        e.preventDefault();\r\n        let $this = $(this);\r\n        if ($this.data('wait')) return;\r\n        $this.data('wait', true);\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: '/diy_read_tui.php',\r\n            data: `tid=${Info.tid}&safeid=${Info.safeId}`,\r\n            success: function (msg) {\r\n                let matches = /<span.+?\\+\\d+!<\\/span>\\s*(\\d+)/i.exec(msg);\r\n                if (matches) {\r\n                    let $num = $this.find('span:first');\r\n                    $num.text('+1');\r\n                    setTimeout(() => {\r\n                        $num.text(matches[1]);\r\n                    }, 1000);\r\n                }\r\n                else if (//.test(msg)) {\r\n                    alert('');\r\n                }\r\n                else {\r\n                    alert('');\r\n                }\r\n            },\r\n            error: function () {\r\n                alert('');\r\n            },\r\n            complete: function () {\r\n                $this.removeData('wait');\r\n            }\r\n        });\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const handleCopyCodeBtn = function () {\r\n    $(document).on('click', '.copy-code', function (e) {\r\n        e.preventDefault();\r\n        let $this = $(this);\r\n        if (Util.copyText($this.next('pre'), $this)) return;\r\n\r\n        let code = $this.data('code');\r\n        if (code) {\r\n            $this.text('').removeData('code');\r\n            $this.next('textarea').remove();\r\n            $this.after(`<pre class=\"pre-scrollable\">${code}</pre>`);\r\n        }\r\n        else {\r\n            let $pre = $this.next('pre');\r\n            let html = $pre.html();\r\n            $this.text('').data('code', html);\r\n            html = Util.decodeHtmlSpecialChar(html);\r\n            let height = $pre.height();\r\n            if (height < 50) height = 50;\r\n            if (height > 340) height = 340;\r\n            $pre.remove();\r\n            $(`<textarea class=\"form-control code-textarea\" style=\"height: ${height}px\" wrap=\"off\">${html}</textarea>`)\r\n                .insertAfter($this).select().focus();\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n * @returns {{}[]} \r\n */\r\nconst getCheckedMultiQuoteData = function () {\r\n    let quoteList = [];\r\n    $('.multi-quote-check:checked').each(function () {\r\n        let $article = $(this).closest('article');\r\n        quoteList.push({floor: $article.data('floor'), pid: $article.data('pid'), userName: $article.data('username')});\r\n    });\r\n    return quoteList;\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const bindMultiQuoteCheckClick = function () {\r\n    $(document).on('click', '.multi-quote-check', function () {\r\n        let data = localStorage[Const.multiQuoteStorageName];\r\n        if (data) {\r\n            try {\r\n                data = JSON.parse(data);\r\n                if (!data || $.type(data) !== 'object' || $.isEmptyObject(data)) data = null;\r\n                else if (!('tid' in data) || data.tid !== Info.tid || $.type(data.quoteList) !== 'object') data = null;\r\n            }\r\n            catch (ex) {\r\n                data = null;\r\n            }\r\n        }\r\n        else {\r\n            data = null;\r\n        }\r\n        let quoteList = getCheckedMultiQuoteData();\r\n        if (!data) {\r\n            localStorage.removeItem(Const.multiQuoteStorageName);\r\n            data = {tid: Info.tid, quoteList: {}};\r\n        }\r\n        if (quoteList.length > 0) data.quoteList[Info.currentPageNum] = quoteList;\r\n        else delete data.quoteList[Info.currentPageNum];\r\n        localStorage[Const.multiQuoteStorageName] = JSON.stringify(data);\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n */\r\nexport const addUserMemo = function () {\r\n    if ($.isEmptyObject(Config.userMemoList)) return;\r\n    $('.read-floor').each(function () {\r\n        let $this = $(this);\r\n        let userName = $this.data('username');\r\n        let key = Object.keys(Config.userMemoList).find(name => name === userName);\r\n        if (!key) return;\r\n        $this.find('.floor-user').after(\r\n            `<span class=\"tips font-size-sm\" data-toggle=\"tooltip\" title=\"${Config.userMemoList[key]}\">[?]</span>`\r\n        );\r\n    });\r\n};\r\n","/*  */\r\n'use strict';\r\n\r\n/**\r\n * \r\n * @param {string} cmd \r\n * @param {boolean} isOutput \r\n * @returns {{isError: boolean, response: string}} isErrorresponse\r\n */\r\nexport const runCmd = function (cmd, isOutput = false) {\r\n    let isError = false;\r\n    let response = '';\r\n    try {\r\n        response = eval(cmd);\r\n        if (isOutput) console.log(response);\r\n    }\r\n    catch (ex) {\r\n        isError = true;\r\n        response = ex;\r\n        console.log(ex);\r\n    }\r\n    return {isError, response: String(response)};\r\n};\r\n","/*  */\r\n'use strict';\r\n\r\n/**\r\n * Cookie\r\n * @param {string} name Cookie\r\n * @param {*} value Cookie\r\n * @param {?Date} date Cookie\r\n * @param {string} prefix Cookie\r\n */\r\nexport const setCookie = function (name, value, date = null, prefix = Info.uid + '_' + Const.storagePrefix) {\r\n    document.cookie = `${prefix}${name}=${encodeURI(value)}${!date ? '' : ';expires=' + date.toUTCString()};path=/;`;\r\n};\r\n\r\n/**\r\n * Cookie\r\n * @param {string} name Cookie\r\n * @param {string} prefix Cookie\r\n * @returns {?string} Cookie\r\n */\r\nexport const getCookie = function (name, prefix = Info.uid + '_' + Const.storagePrefix) {\r\n    let regex = new RegExp(`(^| )${prefix}${name}=([^;]*)(;|$)`);\r\n    let matches = document.cookie.match(regex);\r\n    if (!matches) return null;\r\n    else return decodeURI(matches[2]);\r\n};\r\n\r\n/**\r\n * Cookie\r\n * @param {string} name Cookie\r\n * @param {string} prefix Cookie\r\n */\r\nexport const deleteCookie = function (name, prefix = Info.uid + '_' + Const.storagePrefix) {\r\n    document.cookie = `${prefix}${name}=;expires=${getDate('-1d').toUTCString()};path=/;`;\r\n};\r\n\r\n/**\r\n * Date\r\n * @param {string} value +-YyMdhmsms\r\n * @returns {?Date} Date\r\n * @example\r\n * Tools.getDate('+2y') 2Date\r\n * Tools.getDate('+3M') 3Date\r\n * Tools.getDate('-4d') 4Date\r\n * Tools.getDate('5h') 5Date\r\n * Tools.getDate('2015Y') 2015Date\r\n */\r\nexport const getDate = function (value) {\r\n    let date = new Date();\r\n    let matches = /^(-|\\+)?(\\d+)([a-zA-Z]{1,2})$/.exec(value);\r\n    if (!matches) return null;\r\n    let flag = typeof matches[1] === 'undefined' ? 0 : (matches[1] === '+' ? 1 : -1);\r\n    let increment = flag === -1 ? -parseInt(matches[2]) : parseInt(matches[2]);\r\n    let unit = matches[3];\r\n    switch (unit) {\r\n        case 'Y':\r\n            date.setFullYear(increment);\r\n            break;\r\n        case 'y':\r\n            date.setFullYear(flag === 0 ? increment : date.getFullYear() + increment);\r\n            break;\r\n        case 'M':\r\n            date.setMonth(flag === 0 ? increment : date.getMonth() + increment);\r\n            break;\r\n        case 'd':\r\n            date.setDate(flag === 0 ? increment : date.getDate() + increment);\r\n            break;\r\n        case 'h':\r\n            date.setHours(flag === 0 ? increment : date.getHours() + increment);\r\n            break;\r\n        case 'm':\r\n            date.setMinutes(flag === 0 ? increment : date.getMinutes() + increment);\r\n            break;\r\n        case 's':\r\n            date.setSeconds(flag === 0 ? increment : date.getSeconds() + increment);\r\n            break;\r\n        case 'ms':\r\n            date.setMilliseconds(flag === 0 ? increment : date.getMilliseconds() + increment);\r\n            break;\r\n        default:\r\n            return null;\r\n    }\r\n    return date;\r\n};\r\n\r\n/**\r\n * 1GBK2\r\n * @param {string} str \r\n * @returns {number} \r\n */\r\nexport const getStrByteLen = function (str) {\r\n    let len = 0;\r\n    let cLen = 2;\r\n    for (let i = 0; i < str.length; i++) {\r\n        len += str.charCodeAt(i) < 0 || str.charCodeAt(i) > 255 ? cLen : 1;\r\n    }\r\n    return len;\r\n};\r\n\r\n/**\r\n * URL\r\n * @returns {string} URL\r\n */\r\nexport const getHostNameUrl = function () {\r\n    return location.protocol + '//' + location.host;\r\n};\r\n\r\n/**\r\n * BBCode\r\n * @param textArea \r\n * @param {string} code BBCode\r\n * @param {string} selText \r\n */\r\nexport const addCode = function (textArea, code, selText = '') {\r\n    let startPos = selText === '' ? code.indexOf(']') + 1 : code.indexOf(selText);\r\n    if (typeof textArea.selectionStart !== 'undefined') {\r\n        let prePos = textArea.selectionStart;\r\n        textArea.value = textArea.value.substring(0, prePos) + code + textArea.value.substring(textArea.selectionEnd);\r\n        textArea.selectionStart = prePos + startPos;\r\n        textArea.selectionEnd = prePos + startPos + selText.length;\r\n    }\r\n    else {\r\n        textArea.value += code;\r\n    }\r\n};\r\n\r\n/**\r\n * \r\n * @param textArea \r\n * @returns {string} \r\n */\r\nexport const getSelText = function (textArea) {\r\n    return textArea.value.substring(textArea.selectionStart, textArea.selectionEnd);\r\n};\r\n\r\n/**\r\n * URL\r\n * @param {string} str URL\r\n * @returns {Map} \r\n */\r\nexport const extractQueryStr = function (str) {\r\n    let params = new Map();\r\n    for (let param of str.split('&')) {\r\n        if (!param) continue;\r\n        let [key, value] = param.split('=');\r\n        params.set(key, typeof value !== 'undefined' ? value : '');\r\n    }\r\n    return params;\r\n};\r\n\r\n/**\r\n * URL\r\n * @param {Map} map \r\n * @returns {string} URL\r\n */\r\nexport const buildQueryStr = function (map) {\r\n    let queryStr = '';\r\n    for (let [key, value] of map) {\r\n        if (Info.urlType === 2) {\r\n            queryStr += (queryStr ? '&' : '') + key + '=' + value;\r\n        }\r\n        else {\r\n            queryStr += (queryStr ? '/' : '') + key + '/' + value;\r\n        }\r\n    }\r\n    return queryStr;\r\n};\r\n\r\n/**\r\n * URL\r\n * @param {string} action \r\n * @param {string} param \r\n * @param {boolean} includeOtherParam \r\n * @param {[]} excludeParams \r\n * @returns {string} URL URL\r\n */\r\nexport const makeUrl = function (action, param = '', includeOtherParam = false, excludeParams = []) {\r\n    let url = '';\r\n    let paramList = extractQueryStr(param);\r\n    if (includeOtherParam) {\r\n        paramList = new Map([...extractQueryStr(Info.urlParam).entries(), ...paramList.entries()]);\r\n        for (let i in excludeParams) {\r\n            paramList.delete(excludeParams[i]);\r\n        }\r\n    }\r\n    if (!action.startsWith('/')) {\r\n        if (location.pathname.startsWith(Info.baseFile)) url = Info.baseFile + '/';\r\n        else url = Info.rootPath;\r\n    }\r\n    url += action;\r\n    if (paramList.size > 0) {\r\n        let queryStr = buildQueryStr(paramList);\r\n        if (queryStr) {\r\n            url += (Info.urlType === 2 ? '?' : '/') + queryStr;\r\n        }\r\n    }\r\n    return url;\r\n};\r\n\r\n/**\r\n * URL\r\n * @param {string} name \r\n * @returns {?string} \r\n */\r\nexport const getQueryParam = function (name) {\r\n    return extractQueryStr(Info.urlParam).get(name);\r\n};\r\n\r\n/**\r\n * HTML\r\n * @param {string} str \r\n * @returns {string} \r\n */\r\nexport const decodeHtmlSpecialChar = function (str) {\r\n    if (!str.length) return '';\r\n    return str.replace(/<br\\s*\\/?>/gi, '\\n')\r\n        .replace(/&quot;/gi, '\\\"')\r\n        .replace(/&#39;/gi, '\\'')\r\n        .replace(/&nbsp;/gi, ' ')\r\n        .replace(/&gt;/gi, '>')\r\n        .replace(/&lt;/gi, '<')\r\n        .replace(/&amp;/gi, '&');\r\n};\r\n\r\n/**\r\n * \r\n * @param {jQuery} $nodes jQuery\r\n */\r\nexport const selectAll = function ($nodes) {\r\n    $nodes.prop('checked', true);\r\n};\r\n\r\n/**\r\n * \r\n * @param {jQuery} $nodes jQuery\r\n */\r\nexport const selectInverse = function ($nodes) {\r\n    $nodes.each(function () {\r\n        let $this = $(this);\r\n        $this.prop('checked', !$this.prop('checked'));\r\n    });\r\n};\r\n\r\n/**\r\n * \r\n * @param {jQuery} $node jQuery\r\n * @param {string} type \r\n * @param {string} msg \r\n */\r\nexport const showValidationMsg = function ($node, type, msg = '') {\r\n    if (type === 'error') type = 'danger';\r\n    $node.removeClass('form-control-success form-control-warning form-control-danger');\r\n    let $parent = $node.parent();\r\n    $parent.removeClass('has-success has-warning has-danger');\r\n    if ($.inArray(type, ['success', 'warning', 'danger'] > -1)) {\r\n        $node.addClass('form-control-' + type).parent().addClass('has-' + type);\r\n    }\r\n    let $feedback = $parent.find('.form-control-feedback');\r\n    if (type === 'wait') {\r\n        $feedback.html(`<span class=\"text-muted\"><i class=\"fa fa-spinner fa-spin\" aria-hidden=\"true\"></i> ${msg}</span>`);\r\n    }\r\n    else {\r\n        $feedback.text(msg);\r\n    }\r\n};\r\n\r\n/**\r\n * AB\r\n * @param {Object} a A\r\n * @param {Object} b B\r\n * @returns {Object} \r\n */\r\nexport const getDifferenceSetOfObject = function (a, b) {\r\n    let c = {};\r\n    if ($.type(a) !== 'object' || $.type(b) !== 'object') return c;\r\n    $.each(b, (key, data) => {\r\n        if (key in a) {\r\n            if (!deepEqual(a[key], data)) c[key] = data;\r\n        }\r\n    });\r\n    return c;\r\n};\r\n\r\n/**\r\n * \r\n * @param {*} a\r\n * @param {*} b\r\n * @returns {boolean} \r\n */\r\nexport const deepEqual = function (a, b) {\r\n    if (a === b) return true;\r\n    if ($.type(a) !== $.type(b)) return false;\r\n    if (typeof a === 'number' && typeof b === 'number' && isNaN(a) && isNaN(b)) return true;\r\n    if ($.isArray(a) && $.isArray(b) || $.type(a) === 'object' && $.type(b) === 'object') {\r\n        if (a.length !== b.length) return false;\r\n        for (var i in $.extend($.isArray(a) ? [] : {}, a, b)) {\r\n            if (typeof a[i] === 'undefined' || typeof b[i] === 'undefined') return false;\r\n            if (!deepEqual(a[i], b[i])) return false;\r\n        }\r\n        return true;\r\n    }\r\n    return false;\r\n};\r\n\r\n/**\r\n * \r\n * @param {jQuery} $target \r\n * @param {?jQuery} $source \r\n * @returns {boolean} \r\n */\r\nexport const copyText = function ($target, $source = null) {\r\n    if (!('execCommand' in document) || !$target.length) return false;\r\n    let copyText = $target.data('copy-text');\r\n    if (copyText) {\r\n        $target = $(`<span class=\"text-hide\">${copyText}</span>`).insertAfter($target);\r\n    }\r\n    let s = window.getSelection();\r\n    s.selectAllChildren($target.get(0));\r\n    let result = document.execCommand('copy');\r\n    s.removeAllRanges();\r\n    if (copyText) $target.remove();\r\n    if (result && $source) {\r\n        let msg = $source.data('copy-msg');\r\n        $source.attr('title', msg ? msg : '').on('hidden.bs.tooltip', function () {\r\n            $(this).tooltip('dispose');\r\n        }).tooltip('show');\r\n    }\r\n    return result;\r\n};\r\n\r\n/**\r\n * \r\n * @param {string} name \r\n * @param {Array} list \r\n * @returns {number} -1\r\n */\r\nexport const inFollowOrBlockUserList = (name, list) => list.findIndex(data => data.name && data.name === name);\r\n\r\n/**\r\n * Opera\r\n * @returns {boolean} Opera\r\n */\r\nexport const isOpera = () => typeof window.opera !== 'undefined';\r\n\r\n/**\r\n * Edge\r\n * @returns {boolean} Edge\r\n */\r\nexport const isEdge = () => navigator.appVersion && navigator.appVersion.includes('Edge');\r\n"]}
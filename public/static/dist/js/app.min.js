!function e(t,n,a){function o(r,l){if(!n[r]){if(!t[r]){var d="function"==typeof require&&require;if(!l&&d)return d(r,!0);if(i)return i(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){var n=t[r][1][e];return o(n?n:e)},u,u.exports,e,t,n,a)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<a.length;r++)o(a[r]);return o}({1:[function(e,t,n){"use strict";var a=e("./module/config"),o=e("./module/public"),i=e("./module/index"),r=e("./module/read"),l=e("./module/post"),d=e("./module/other");window.pageId=$("body").attr("id"),$(function(){if("loginPage"!==pageId){if("registerPage"===pageId)return void(0,d.validateRegisterField)();(0,a.init)(),(0,o.preventCloseWindow)(),(0,o.handleMainMenu)(),(0,o.handleRollToTopOrBottomBtn)(),(0,o.handleSearchDialog)(),(0,o.fillCommonForumPanel)(),(0,o.showEditCommonForumDialog)(),$(".page-input").length>0&&(0,o.handlePageInput)(),"indexPage"===pageId?((0,i.handleAtTipsBtn)(),(0,i.handleIndexThreadPanel)(),(0,i.handleSelectBgImage)(),(0,i.handleSelectBgColor)(),(0,i.handleCustomBgStyle)()):"readPage"===pageId?((0,r.gotoFloor)(),(0,r.handleFastGotoFloorBtn)(),(0,r.handleTuiThreadBtn)(),(0,r.handleCopyFloorLinkBtn)(),(0,r.handleFastReplyBtn)(),(0,r.handleBlockFloorBtn)(),(0,r.handleBuyThreadBtn)(),(0,r.copyBuyThreadList)(),(0,r.handleFloorImage)(),(0,l.checkPostForm)(),(0,o.bindFastSubmitShortcutKey)($("#postContent")),(0,r.handleCopyCodeBtn)(),(0,l.addSmileCode)($("#postContent")),(0,r.bindMultiQuoteCheckClick)(),(0,l.handleClearMultiQuoteDataBtn)(),$(".multi-reply-btn").click(function(){(0,l.handleMultiQuote)(1)})):"postPage"===pageId?((0,l.checkPostForm)(),(0,o.bindFastSubmitShortcutKey)($("#postContent")),(0,l.handleEditorBtns)(),(0,l.addSmileCode)($("#postContent")),(0,l.handleAttachBtns)(),(0,l.handleClearMultiQuoteDataBtn)(),pageInfo.multiQuote&&(0,l.handleMultiQuote)(2)):"gjcPage"===pageId?(0,d.highlightUnReadAtTipsMsg)():"gameIntroSearchPage"===pageId?(0,d.handleGameIntroSearchArea)():"gameIntroPage"===pageId?(0,d.tuiGameIntro)("game"):"gameIntroCompanyPage"===pageId?(0,d.tuiGameIntro)("company"):"gameIntroTypePage"===pageId?(0,d.tuiGameIntro)("type"):"gameIntroPropertyPage"===pageId?(0,d.tuiGameIntro)("property"):"favorPage"===pageId?(0,d.bindFavorPageBtnsClick)():"friendPage"===pageId?(0,d.bindFriendPageBtnsClick)():"modifyPage"===pageId?((0,d.syncPerPageFloorNum)(),(0,d.assignBirthdayField)(),(0,d.handleUploadAvatarFileBtn)()):"bankPage"===pageId?(0,d.transferKfbAlert)():"messagePage"===pageId?(0,d.bindMessageActionBtnsClick)():"readMessagePage"===pageId?((0,r.handleFloorImage)(),(0,r.handleCopyCodeBtn)()):"writeMessagePage"===pageId?((0,o.bindFastSubmitShortcutKey)($("#msgContent")),(0,l.addSmileCode)($("#msgContent"))):"messageBannedPage"===pageId&&(0,o.bindFastSubmitShortcutKey)($('[name="banidinfo"]')),$('[data-toggle="tooltip"]').tooltip({container:"body"})}})},{"./module/config":2,"./module/index":4,"./module/other":6,"./module/post":7,"./module/public":8,"./module/read":9}],2:[function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(n,"__esModule",{value:!0}),n.clear=n.write=n.read=n.init=n.Config=void 0;var o=e("./util"),i=a(o),r="kf_config",l=n.Config={perPageFloorNum:0,activeNewReplyPanel:"#galgameNewReplyPanel",activeTopRecommendPanel:"#galgameTopRecommendPanel",activeForumPanel1:"",activeForumPanel2:"",commonForumList:[],defShowMsgDuration:-1},d=(n.init=function(){window.Config=$.extend(!0,{},l),d()},n.read=function(){var e=localStorage[r];if(e){try{e=JSON.parse(e)}catch(e){return}e&&"object"===$.type(e)&&!$.isEmptyObject(e)&&(e=c(e),window.Config=$.extend(!0,{},l,e))}}),c=(n.write=function(){var e=i.getDifferenceSetOfObject(l,window.Config);localStorage[r]=JSON.stringify(e)},n.clear=function(){localStorage.removeItem(r)},function(e){var t={};return"object"!==$.type(e)?t:($.each(e,function(e,n){e in l&&$.type(n)===$.type(l[e])&&(t[e]=n)}),t)})},{"./util":10}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={multiQuoteStorageName:"kf_multi_quote",atTipsTimeCookieName:"at_tips_time",prevAtTipsTimeCookieName:"prev_at_tips_time",bgStyleCookieName:"bg_style",commonForumList:[{fid:106,name:"新作动态"},{fid:41,name:"网盘下载"},{fid:16,name:"种子下载"},{fid:52,name:"游戏讨论"},{fid:84,name:"动漫讨论"},{fid:67,name:"CG下载"},{fid:5,name:"自由讨论"},{fid:56,name:"个人日记"},{fid:57,name:"同人漫本"}],availableForumList:[{fid:106,name:"新作动态"},{fid:52,name:"游戏讨论"},{fid:16,name:"种子下载"},{fid:41,name:"网盘下载"},{fid:67,name:"CG下载"},{fid:102,name:"游戏推荐"},{fid:24,name:"疑难互助"},{fid:57,name:"同人漫本"},{fid:84,name:"动漫讨论"},{fid:92,name:"动画共享"},{fid:127,name:"漫画小说"},{fid:68,name:"音乐共享"},{fid:163,name:"LIVE共享"},{fid:182,name:"转载资源"},{fid:94,name:"原创绘画"},{fid:87,name:"宅物交流"},{fid:86,name:"电子产品"},{fid:115,name:"文字作品"},{fid:96,name:"图片来源"},{fid:36,name:"寻求资源"},{fid:5,name:"自由讨论"},{fid:56,name:"个人日记"},{fid:9,name:"我的关注"},{fid:4,name:"意见投诉"},{fid:93,name:"管理组区"},{fid:59,name:"原创组区"},{fid:125,name:"水楼林立"},{fid:181,name:"私人日记"},{fid:42,name:"旧期资料"},{fid:128,name:"作品判定"},{fid:98,name:"日本语版"},{fid:99,name:"意見箱"},{fid:112,name:"掲示板"},{fid:100,name:"創作感想"}]};n.default=a},{}],4:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(n,"__esModule",{value:!0}),n.handleCustomBgStyle=n.handleSelectBgColor=n.handleSelectBgImage=n.handleIndexThreadPanel=n.handleAtTipsBtn=void 0;var i=e("./util"),r=o(i),l=e("./const"),d=a(l),c=e("./config");n.handleAtTipsBtn=function(){$("#atTips").click(function(){var e=$(this),t=e.data("time"),n=r.getCookie(d.default.atTipsTimeCookieName);if(t&&t!==n){if(n)n!==t&&r.setCookie(d.default.prevAtTipsTimeCookieName,n);else{var a=(new Date).getDate();r.setCookie(d.default.prevAtTipsTimeCookieName,(a<10?"0"+a:a)+"日00时00分")}r.setCookie(d.default.atTipsTimeCookieName,t,r.getDate("+3d")),e.removeClass("btn-outline-danger").addClass("btn-outline-primary")}})},n.handleIndexThreadPanel=function(){Config.activeNewReplyPanel&&$('a[data-toggle="tab"][href="'+Config.activeNewReplyPanel+'"]').tab("show"),Config.activeTopRecommendPanel&&$('a[data-toggle="tab"][href="'+Config.activeTopRecommendPanel+'"]').tab("show"),$(document).on("shown.bs.tab",'a[data-toggle="tab"]',function(e){var t=$(e.target),n=t.attr("href"),a="";n.includes("NewReplyPanel")?a="activeNewReplyPanel":n.includes("TopRecommendPanel")&&(a="activeTopRecommendPanel"),a&&Config[a]!==n&&((0,c.read)(),Config[a]=n,(0,c.write)())})},n.handleSelectBgImage=function(){$("#selectBgImage").on("click","[data-id]",function(){var e=$(this),t=e.data("id"),n=e.data("filename"),a=e.parent().data("path");t&&n&&a&&confirm("是否选择此背景图片？")&&(r.setCookie(d.default.bgStyleCookieName,t,r.getDate("+1y")),$("body, .modal-content").css("background-image",'url("'+a+n+'")'),alert("背景已更换（图片可能需要一定时间加载）"))})},n.handleSelectBgColor=function(){$("#selectBgImage").on("click","[data-color]",function(){var e=$(this),t=e.data("color");t&&confirm("是否选择此背景颜色？")&&(r.setCookie(d.default.bgStyleCookieName,t,r.getDate("+1y")),$("body, .modal-content").css("background",t),alert("背景已更换"))})},n.handleCustomBgStyle=function(){$("#customBgStyle").click(function(){var e=r.getCookie(d.default.bgStyleCookieName);e&&!parseInt(e)||(e=""),e=prompt("请输入背景图片URL、颜色代码或CSS样式：\n（例：http://xxx.com/abc.jpg 或 #fcfcfc，留空表示恢复默认背景）\n（注：建议选择简洁、不花哨、偏浅色系的背景图片或颜色）",e),null!==e&&(""===$.trim(e)?(r.setCookie(d.default.bgStyleCookieName,"",r.getDate("-1d")),alert("背景已恢复默认"),location.reload()):/^https?:\/\/[^"']+/.test(e)?(r.setCookie(d.default.bgStyleCookieName,e,r.getDate("+1y")),$("body, .modal-content").css("background-image",'url("'+e+'")'),alert("背景已更换（图片可能需要一定时间加载）")):/^#[0-9a-f]{6}$/i.test(e)?(r.setCookie(d.default.bgStyleCookieName,e,r.getDate("+1y")),$("body, .modal-content").css("background",e.toLowerCase()),alert("背景已更换")):/[<>{}]/.test(e)?alert("格式不正确"):(e=e.replace(";",""),r.setCookie(d.default.bgStyleCookieName,e,r.getDate("+1y")),$("body, .modal-content").css("background",e),alert("背景已更换（图片可能需要一定时间加载）")))})}},{"./config":2,"./const":3,"./util":10}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=n.show=function(e){var t=e.msg,n=void 0===t?"":t,a=e.duration,i=void 0===a?Config.defShowMsgDuration:a,l=e.clickable,d=void 0===l||l,c=e.preventable,u=void 0!==c&&c;arguments.length>0&&("string"===$.type(arguments[0])&&(n=arguments[0]),"number"===$.type(arguments[1])&&(i=arguments[1]));var s=$(".msg-container"),f=0===s.length;f||$(".mask").length||s.height()>=.8*$(window).height()&&(r(),f=!0),u&&!$(".mask").length&&$('<div class="mask"></div>').appendTo("body"),f&&(s=$('<div class="container msg-container"></div>').appendTo("body"));var m=$('<div class="msg">'+n+"</div>").appendTo(s);return m.on("click",".stop-action",function(e){e.preventDefault(),$(this).text("正在停止&hellip;").closest(".msg").data("stop",!0)}),d&&m.css("cursor","pointer").click(function(){o($(this))}).find("a").click(function(e){e.stopPropagation()}),u&&m.attr("preventable",!0),m.slideDown("normal"),i>-1&&setTimeout(function(){o(m)},1e3*i),m},o=(n.wait=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return a({msg:e,duration:-1,clickable:!1,preventable:t})},n.hide=function(e){e.slideUp("normal",function(){i($(this))})}),i=n.remove=function(e){var t=e.parent();e.remove(),$(".msg").length?$(".msg[preventable]").length||$(".mask").remove():(t.remove(),$(".mask").remove())},r=n.destroy=function(){$(".msg-container").remove(),$(".mask").remove()}},{}],6:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(n,"__esModule",{value:!0}),n.validateRegisterField=n.bindMessageActionBtnsClick=n.transferKfbAlert=n.handleUploadAvatarFileBtn=n.syncPerPageFloorNum=n.assignBirthdayField=n.bindFriendPageBtnsClick=n.bindFavorPageBtnsClick=n.tuiGameIntro=n.handleGameIntroSearchArea=n.highlightUnReadAtTipsMsg=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("./util"),l=o(r),d=e("./const"),c=a(d),u=e("./config");n.highlightUnReadAtTipsMsg=function(){if(pageInfo.gjc===pageInfo.userName){var e=l.getCookie(c.default.prevAtTipsTimeCookieName);if(e&&/^\d+日\d+时\d+分$/.test(e)){var t="";$(".thread-list-item time").each(function(n){var a=$(this),o=$.trim(a.text());return 0===n&&(t=o),e<o&&t>=o&&(a.addClass("text-danger"),void(t=o))}),$(document).on("click",".thread-list-item .thread-link-item a",function(){l.deleteCookie(c.default.prevAtTipsTimeCookieName)})}}},n.handleGameIntroSearchArea=function(){$("#gameSearchKeyword").val(pageInfo.keyword),$("#gameSearchType").val(pageInfo.searchType)},n.tuiGameIntro=function(e){var t="";t="company"===e?"g_intro_inc_tui_":"type"===e?"g_intro_adv_tui_":"property"===e?"g_intro_moe_tui_":"g_intro_tui_",t+=pageInfo.id;var n=l.makeUrl("game_intro/"+e,"id="+pageInfo.id+"&tui=1");$(".tui-btn").click(function(e){e.preventDefault();var a=$(this);if(!a.data("wait")){if(l.getCookie(t,""))return void alert("你在48小时内已经推过");a.data("wait",!0),$.ajax({type:"GET",url:n,success:function(){var e=a.find("span:first"),t=parseInt(e.text());e.text("+1"),setTimeout(function(){e.text(++t)},1e3)},error:function(){alert("操作失败")},complete:function(){a.removeData("wait")},dataType:"html"})}})},n.bindFavorPageBtnsClick=function(){var e=$('form[name="favorForm"]');$(document).on("click",".remove-catalog",function(){return confirm("是否删除该目录？")}),$("#addCatalog").click(function(t){t.preventDefault();var n=$.trim(prompt("请输入收藏夹目录名称："));n&&(e.find('[name="job"]').val("addtype"),e.find('[name="type"]').val(n),e.submit())}),$("#favorActionBtns").on("click","button",function(){var t=$(this).data("action");if("selectAll"===t)l.selectAll($('[name="delid[]"]'));else if("selectReverse"===t)l.selectReverse($('[name="delid[]"]'));else if("delete"===t){var n=$('[name="delid[]"]:checked');n.length>0&&confirm("是否删除这"+n.length+"项？")&&(e.find('[name="job"]').val("clear"),e.submit())}}),$("#convertCatalogDropdownMenu").on("click","a",function(t){t.preventDefault();var n=$(this).data("type"),a=$('[name="delid[]"]:checked');a.length>0&&confirm("是否将这"+a.length+"项转换到指定目录？")&&(e.find('[name="job"]').val("change"),e.find('[name="type"]').val(n),e.submit())})},n.bindFriendPageBtnsClick=function(){$("#friendActionBtns").on("click",'[type="button"]',function(){var e=$(this).data("action");"selectAll"===e?l.selectAll($('[name="selid[]"]')):"selectReverse"===e&&l.selectReverse($('[name="selid[]"]'))})},n.assignBirthdayField=function(){$("#birthday").change(function(){var e=$(this).val().trim(),t=/(\d{4})-(\d{1,2})-(\d{1,2})/.exec(e),n="",a="",o="";t&&(n=parseInt(t[1]),a=parseInt(t[2]),o=parseInt(t[3])),$('[name="proyear"]').val(n),$('[name="promonth"]').val(a),$('[name="proday"]').val(o)})},n.syncPerPageFloorNum=function(){var e=function(){var e=parseInt($('[name="p_num"]').val());0===e&&(e=10),isNaN(e)||e===Config.perPageFloorNum||(Config.perPageFloorNum=e,(0,u.write)())};e(),$("#creator").submit(function(){(0,u.read)(),e()})},n.handleUploadAvatarFileBtn=function(){$("#browseAvatar").change(function(){var e=$(this),t=/\.(\w+)$/.exec(e.val());t&&["jpg","gif","png"].includes(t[1].toLowerCase())||alert("头像图片类型不匹配")})},n.transferKfbAlert=function(){$("#transferKfbForm").submit(function(){var e=$(this),t=parseInt(e.find('[name="to_money"]').val()),n=parseInt($("#fixedDeposit").text()),a=parseInt($("#currentDeposit").text());if(t>0&&n>0&&t>a&&!confirm("你的活期存款不足，转账金额将从定期存款里扣除，是否继续？"))return!1})},n.bindMessageActionBtnsClick=function(){$("#messageActionBtns").on("click","button",function(){var e=$("#messageListForm"),t=$(this).data("action");if("selectAll"===t)l.selectAll($('[name="delid[]"]'));else if("selectReverse"===t)l.selectReverse($('[name="delid[]"]'));else if("selectCustom"===t){var n=function(){var e=$.trim(prompt("请填写所要选择的包含指定字符串的短消息标题（可用|符号分隔多个标题）","收到了他人转账的KFB|银行汇款通知|您的文章被评分|您的文章被删除"));return e?($('[name="delid[]"]').prop("checked",!1),void $("a.thread-link").each(function(){var t=$(this),n=!0,a=!1,o=void 0;try{for(var i,r=e.split("|")[Symbol.iterator]();!(n=(i=r.next()).done);n=!0){var l=i.value;t.text().toLowerCase().includes(l.toLowerCase())&&t.parent().find('[name="delid[]"]').prop("checked",!0)}}catch(e){a=!0,o=e}finally{try{!n&&r.return&&r.return()}finally{if(a)throw o}}})):{v:void 0}}();if("object"===("undefined"==typeof n?"undefined":i(n)))return n.v}else if("download"===t){var a=$('[name="delid[]"]:checked');a.length>0&&confirm("是否下载这"+a.length+"项？")&&(e.attr("action","/message.php").find('[name="action"]').val("down"),e.submit())}else if("delete"===t){var o=$('[name="delid[]"]:checked');o.length>0&&confirm("是否删除这"+o.length+"项？")&&(e.attr("action",l.makeUrl("message/job")).find('[name="action"]').val("del"),e.submit())}})},n.validateRegisterField=function(){$(document).on("change","input[name]",function(){var e=$(this),t=e.attr("name"),n=e.val();return n?void("regemail"===t?(l.showValidationMsg(e,"wait","检查中，请稍等&hellip;"),$.post(l.makeUrl("register/check"),"username="+n,function(t){var n=t.type,a=t.msg,o=t.username;e.val()===o&&l.showValidationMsg(e,n,a)}).fail(function(){l.showValidationMsg(e,"error","响应失败")})):"regpwd"===t?n.length>16||n.length<6?l.showValidationMsg(e,"error","密码长度不正确"):(l.showValidationMsg(e,"clear"),$('[name="regpwdrepeat"]').trigger("change")):"regpwdrepeat"===t&&(n!==$('[name="regpwd"]').val()?l.showValidationMsg(e,"error","两次输入的密码不相符"):l.showValidationMsg(e,"clear"))):void l.showValidationMsg(e,"clear")}),$("#registerForm").submit(function(){if($(this).find(".has-danger").length>0)return alert("请正确填写表单"),!1})}},{"./config":2,"./const":3,"./util":10}],7:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.handleClearMultiQuoteDataBtn=n.handleMultiQuote=n.addSmileCode=n.handleAttachBtns=n.checkPostForm=n.handleEditorBtns=void 0;var r=function(){function e(e,t){var n=[],a=!0,o=!1,i=void 0;try{for(var r,l=e[Symbol.iterator]();!(a=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){o=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=e("./util"),d=o(l),c=e("./const"),u=a(c),s=e("./msg"),f=o(s);n.handleEditorBtns=function(){var e=$("#postContent").get(0);$(document).on("click",".editor-btn-group button[data-action]",function(){var t=$(this).data("action"),n="",a=null;switch(t){case"link":n=prompt("请输入链接URL：","http://");break;case"img":n=prompt("请输入图片URL：","http://");break;case"sell":n=prompt("请输入出售金额：",1);break;case"hide":n=prompt("请输入神秘等级：",1);break;case"audio":n=prompt("请输入HTML5音频实际地址：\n（可直接输入网易云音乐或虾米的单曲地址，将自动转换为外链地址）","http://"),a=/^https?:\/\/music\.163\.com\/(?:#\/)?song\?id=(\d+)/i.exec(n),a&&(n="http://music.miaola.info/163/"+a[1]+".mp3"),a=/^https?:\/\/www\.xiami\.com\/song\/(\d+)/i.exec(n),a&&(n="http://music.miaola.info/xiami/"+a[1]+".mp3");break;case"video":n=prompt("请输入HTML5视频实际地址：\n（可直接输入YouTube视频页面的地址，将自动转换为外链地址）","http://"),a=/^https?:\/\/(?:www\.)?youtube\.com\/watch\?v=([\w\-]+)/i.exec(n),a&&(n="http://video.miaola.info/youtube/"+a[1]),a=/^https?:\/\/youtu\.be\/([\w\-]+)$/i.exec(n),a&&(n="http://video.miaola.info/youtube/"+a[1])}if(null!==n){var o="",i="";switch(t){case"link":o=d.getSelText(e),i="[url="+n+"]"+o+"[/url]";break;case"img":i="[img]"+n+"[/img]";break;case"quote":o=d.getSelText(e),i="[quote]"+o+"[/quote]";break;case"code":o=d.getSelText(e),i="[code]"+o+"[/code]";break;case"sell":o=d.getSelText(e),i="[sell="+n+"]"+o+"[/sell]";break;case"hide":o=d.getSelText(e),i="[hide="+n+"]"+o+"[/hide]";break;case"bold":o=d.getSelText(e),i="[b]"+o+"[/b]";break;case"italic":o=d.getSelText(e),i="[i]"+o+"[/i]";break;case"underline":o=d.getSelText(e),i="[u]"+o+"[/u]";break;case"strike":o=d.getSelText(e),i="[strike]"+o+"[/strike]";break;case"super":o=d.getSelText(e),i="[sup]"+o+"[/sup]";break;case"sub":o=d.getSelText(e),i="[sub]"+o+"[/sub]";break;case"horizontal":i="[hr]";break;case"align-left":o=d.getSelText(e),i="[align=left]"+o+"[/align]";break;case"align-center":o=d.getSelText(e),i="[align=center]"+o+"[/align]";break;case"align-right":o=d.getSelText(e),i="[align=right]"+o+"[/align]";break;case"fly":o=d.getSelText(e),i="[fly]"+o+"[/fly]";break;case"audio":i="[audio]"+n+"[/audio]";break;case"video":i="[video]"+n+"[/video]"}i&&(d.addCode(e,i,o),e.focus())}}),$("#fontSizeDropdownMenu").on("click","a",function(t){t.preventDefault();var n=$(this).data("size"),a=d.getSelText(e),o="[size="+n+"]"+a+"[/size]";d.addCode(e,o,a),e.focus()}),$("#colorDropdownMenu, #bgColorDropdownMenu").on("click","span",function(){var t=$(this),n=t.parent().is("#bgColorDropdownMenu")?"backcolor":"color",a=t.data("color"),o=d.getSelText(e),i="["+n+"="+a+"]"+o+"[/"+n+"]";d.addCode(e,i,o),e.focus()})},n.checkPostForm=function(){$("#postForm").submit(function(){var e=$("#postType");if(e.length>0&&!e.val())return alert("没有选择主题分类"),e.focus(),!1;var t=$("#postTitle");if(t.length>0){var n=d.getStrByteLen(t.val());if(!n)return alert("标题不能为空"),t.focus(),!1;if(n>100)return alert("标题超过最大长度 100 个字节"),t.focus(),!1}var a=$("#voteItemContent");if(a.length>0&&!a.val().trim())return alert("投票选项不能为空"),a.focus(),!1;var o=$("#postContent");if(o.length>0){var i=d.getStrByteLen(o.val().trim());if(i<12)return alert("文章内容少于 12 个字节"),o.focus(),!1;if(i>5e4)return alert("文章内容大于 50000 个字节"),o.focus(),!1}var r=$("#postGjc");return r.length>0&&"new"===pageInfo.action&&!r.val().trim()?(alert("请在内容文本框的下方填写关键词，以方便搜索，也可以在标题中选择任意一个词填入"),r.focus(),!1):void 0})},n.handleAttachBtns=function(){$(document).on("click",".attach-area a[data-action]",function(e){e.preventDefault();var t=$(this),n=t.closest(".attach-area"),a=t.data("action"),o=n.data("id");if(o)if("insert"===a){var i=t.data("type"),r=$("#postContent").get(0),l="["+("new"===i?"upload":"attachment")+"="+o+"]";d.addCode(r,l),r.focus()}else"update"===a?(n.find(".attach-info").prop("hidden",!0).after('<label><input name="replace_'+o+'" type="file" aria-label="选择附件"></label>'),t.data("action","cancel").text("取消").blur(),$(document).data("attachUpdateAlert")||(alert("本反向代理服务器为了提高性能对图片设置了缓存，更新附件图片后可能需等待最多30分钟才能看到效果"),$(document).data("attachUpdateAlert",!0))):"cancel"===a?(n.find(".attach-info").prop("hidden",!1).next("label").remove(),t.data("action","update").text("更新").blur()):"delete"===a&&n.remove()}),$(document).on("change",'[type="file"]',function(){var e=$(this),t=/\.(\w+)$/.exec(e.val());if(!t||!["jpg","gif","png","torrent"].includes(t[1].toLowerCase()))return void alert("附件类型不匹配");var n=e.data("type");if("new"===n){e.removeData("type").parent().next().prop("hidden",!1);var a=$("#newAttachArea"),o=a.find('[type="file"]').length;if(o>=5)return;var i=a.find('[type="file"]:last').closest(".attach-area"),r=parseInt(i.data("id"));if(!r)return;r++,$('\n<div class="form-group row font-size-sm attach-area" data-id="'+r+'">\n  <div class="col-xs-12 col-form-label">\n    <label>\n      <input name="attachment_'+r+'" data-type="new" type="file" aria-label="选择附件">\n    </label>\n    <span hidden>\n      <a data-action="insert" data-type="new" href="#">插入</a>&nbsp;\n      <a data-action="delete" href="#">删除</a>\n    </span>\n  </div>\n  <div class="col-xs-4">\n    <label class="sr-only" for="atc_downrvrc'+r+'">神秘系数</label>\n    <input class="form-control form-control-sm" id="atc_downrvrc'+r+'" name="atc_downrvrc'+r+'" data-toggle="tooltip" \ntype="number" value="0" min="0" title="神秘系数" placeholder="神秘系数">\n  </div>\n  <div class="col-xs-8">\n    <label class="sr-only" for="atc_desc'+r+'">描述</label>\n    <input class="form-control form-control-sm" id="atc_desc'+r+'" name="atc_desc'+r+'" data-toggle="tooltip" type="text" \ntitle="描述" placeholder="描述">\n  </div>\n</div>\n').insertAfter(i).find('[data-toggle="tooltip"]').tooltip({container:"body"})}})},n.addSmileCode=function(e){$(".smile-panel").on("click","img",function(){$(".smile-panel").addClass("open");var t=e.get(0);if(t){var n="[s:"+$(this).data("id")+"]";d.addCode(t,n,""),t.blur()}}).parent().on("shown.bs.dropdown",function(){$(".smile-panel img").each(function(){var e=$(this);e.attr("src")||e.attr("src",e.data("src"))})}).on("hide.bs.dropdown",function(e){var t=$(e.relatedTarget);return t.data("open")?e.preventDefault():void t.removeData("open")}),$("#smileDropdownBtn").click(function(){var e=$(this);e.data("open",!e.data("open"))})},n.handleMultiQuote=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=localStorage[u.default.multiQuoteStorageName];if(t){try{t=JSON.parse(t)}catch(e){return}if(t&&"object"===$.type(t)&&!$.isEmptyObject(t)){var n=t,a=n.tid,o=n.quoteList;if(pageInfo.tid&&a===pageInfo.tid&&"object"===$.type(o)&&(2!==e||pageInfo.fid)){var l=[],c=!0,s=!1,m=void 0;try{for(var p,g=Object.values(o)[Symbol.iterator]();!(c=(p=g.next()).done);c=!0){var h=p.value;if("array"===$.type(h)){var v=!0,y=!1,b=void 0;try{for(var k,C=h[Symbol.iterator]();!(v=(k=C.next()).done);v=!0){var w=k.value;l.push(w)}}catch(e){y=!0,b=e}finally{try{!v&&C.return&&C.return()}finally{if(y)throw b}}}}}catch(e){s=!0,m=e}finally{try{!c&&g.return&&g.return()}finally{if(s)throw m}}if(!l.length)return void localStorage.removeItem(u.default.multiQuoteStorageName);var S=new Set,x="";2===e&&(f.wait('<span class="mr-1">正在获取引用内容中&hellip;</span>剩余：<em class="text-warning countdown-num">'+l.length+"</em>"),$(document).clearQueue("MultiQuote"));var I=!0,T=!1,P=void 0;try{for(var F,B=(function(){var t=r(F.value,2),n=t[0],o=t[1];return"floor"in o&&"pid"in o?(S.add(o.userName),void(2===e?$(document).queue("MultiQuote",function(){$.get(d.makeUrl("post/index","action=quote&fid="+pageInfo.fid+"&tid="+a+"&pid="+o.pid+"&article="+o.floor+"&t="+(new Date).getTime()),function(e){var t=e.threadContent;x+=t?t+(n===l.length-1?"":"\n"):"";var a=$(".countdown-num:last");a.text(parseInt(a.text())-1),n===l.length-1?(f.destroy(),$("#postContent").val(x).focus()):setTimeout(function(){$(document).dequeue("MultiQuote")},100)})}):x+="[quote]回 "+o.floor+"楼("+o.userName+") 的帖子[/quote]\n")):"continue"}),_=l.entries()[Symbol.iterator]();!(I=(F=_.next()).done);I=!0){B()}}catch(e){T=!0,P=e}finally{try{!I&&_.return&&_.return()}finally{if(T)throw P}}$('input[name="diy_guanjianci"]').val([].concat(i(S)).join(",")),$("#postForm").submit(function(){localStorage.removeItem(u.default.multiQuoteStorageName)}),2===e?$(document).dequeue("MultiQuote"):$("#postContent").val(x).focus()}}}},n.handleClearMultiQuoteDataBtn=function(){$(".clear-multi-quote-data-btn").click(function(e){e.preventDefault(),confirm("是否清除多重引用数据？")&&(localStorage.removeItem(u.default.multiQuoteStorageName),$('[name="diy_guanjianci"]').val(""),$("#postContent").val(""))})}},{"./const":3,"./msg":5,"./util":10}],8:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(n,"__esModule",{value:!0}),n.preventCloseWindow=n.fillCommonForumPanel=n.showEditCommonForumDialog=n.bindFastSubmitShortcutKey=n.handlePageInput=n.handleSearchDialog=n.handleRollToTopOrBottomBtn=n.handleMainMenu=void 0;var i=function(){function e(e,t){var n=[],a=!0,o=!1,i=void 0;try{for(var r,l=e[Symbol.iterator]();!(a=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){o=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=e("./util"),l=o(r),d=e("./const"),c=a(d),u=e("./config");n.handleMainMenu=function(){$("#mainMenuTogglerBtn").click(function(){var e=document.documentElement.clientHeight-$(this).closest(".navbar").outerHeight();e>0&&$("#mainMenu").css("max-height",e+"px")})},n.handleRollToTopOrBottomBtn=function(){$(window).scroll(function(){var e=$("#rollToTopOrBottom");if($(window).scrollTop()>640){if("top"===e.data("direction"))return;e.data("direction","top").attr("aria-label","滚动到页顶").find("i").removeClass("fa-chevron-down").addClass("fa-chevron-up")}else{if("bottom"===e.data("direction"))return;e.data("direction","bottom").attr("aria-label","滚动到页底").find("i").removeClass("fa-chevron-up").addClass("fa-chevron-down")}}),$("#rollToTopOrBottom").click(function(){var e="bottom"===$(this).data("direction")?$("body").height():0;$("body, html").animate({scrollTop:e})})},n.handleSearchDialog=function(){var e=$("#searchDialog");e.on("shown.bs.modal",function(){$("#searchKeyword").select().focus()}).find("form").submit(function(){var e=$(this),t=e.find("#searchKeyword"),n=e.find("#searchType").val(),a=$.trim(t.val());"gjc"===n?e.attr("action",l.makeUrl("gjc/"+a)):"username"===n?e.attr("action",l.makeUrl("user/username/"+a)):(e.attr("action",l.makeUrl("search")),t.attr("name","author"===n?"pwuser":"keyword"),"title"===n&&a.length&&l.getStrByteLen(a)<=2&&!function(){var n=e.find('[name="method"]');n.val("OR"),t.val(a+" "+Math.floor((new Date).getTime()/1e3)),setTimeout(function(){t.val(a),n.val("AND")},200)}())}),e.find('[name="searchRange"]').on("click",function(){var t="all";"current"===$(this).val()&&(t=pageInfo.fid),e.find('[name="f_fid"]').val(t)});var t=e.find('[name="searchRange"][value="current"]');e.find("#searchType").change(function(){var e=$(this).val();t.data("enabled")&&t.prop("disabled","gjc"===e||"username"===e)}),"threadPage"!==pageId&&"readPage"!==pageId||t.prop("disabled",!1).data("enabled",!0).click()},n.handlePageInput=function(){$(document).on("click",".page-input",function(e){if(e.preventDefault(),!(pageInfo.maxPageNum&&pageInfo.maxPageNum<=1)){var t=$(this).data("url");if(t){var n=$(this).data("exclude");n=n?n.split(","):[];var a=parseInt(prompt("要跳转到第几页？"+(pageInfo.maxPageNum?"（共"+pageInfo.maxPageNum+"页）":""),pageInfo.currentPageNum));a&&a>0&&(location.href=l.makeUrl(t,"page="+a,!0,n))}}})},n.bindFastSubmitShortcutKey=function(e){e.keydown(function(e){13===e.keyCode&&e.ctrlKey&&$(this).closest("form").submit()})},n.showEditCommonForumDialog=function(){$(document).on("click",".edit-common-forum-btn",function(e){e.preventDefault(),(0,u.read)();var t=Config.commonForumList.length>0?Config.commonForumList:c.default.commonForumList,n="",a=!0,o=!1,i=void 0;try{for(var r,l=t[Symbol.iterator]();!(a=(r=l.next()).done);a=!0){var d=r.value,s=d.fid,f=d.name;n+='<span class="btn btn-outline-primary" data-fid="'+s+'">'+f+"</span>"}}catch(e){o=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw i}}var m="",p=!0,g=!1,h=void 0;try{for(var v,y=function(){var e=v.value,n=e.fid,a=e.name;return t.find(function(e){return e.fid===n})?"continue":void(m+='<span class="btn btn-outline-primary" data-fid="'+n+'">'+a+"</span>")},b=c.default.availableForumList[Symbol.iterator]();!(p=(v=b.next()).done);p=!0){y()}}catch(e){g=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(g)throw h}}var k=$('\n<div class="modal fade" id="editCommonForumDialog" tabindex="-1" role="dialog" aria-labelledby="editCommonForumDialogTitle" aria-hidden="true">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button class="close" data-dismiss="modal" type="button" aria-label="关闭">\n          <span aria-hidden="true">&times;</span>\n        </button>\n        <h4 class="modal-title" id="editCommonForumDialogTitle">常用版块</h4>\n      </div>\n      <div class="modal-body">\n        <fieldset class="fieldset mb-1 p-sm">\n          <legend>常用版块</legend>\n          <div class="edit-forum-list" id="editCommonForumList">'+n+'</div>\n        </fieldset>\n        <fieldset class="fieldset mb-1 p-sm">\n          <legend>可用版块</legend>\n          <div class="edit-forum-list" id="editAvailableForumList">'+m+'</div>\n        </fieldset>\n      </div>\n      <div class="modal-footer">\n        <button class="btn btn-primary" data-action="save" type="button">保存</button>\n        <button class="btn btn-secondary" data-dismiss="modal" type="button">取消</button>\n        <button class="btn btn-danger" data-action="reset" type="button">重置</button>\n      </div>\n    </div>\n  </div>\n</div>\n').appendTo("body").modal("show");dragula(k.find(".edit-forum-list").get(),{revertOnSpill:!0}),k.on("hidden.bs.modal",function(){$(this).remove()}).find('[data-action="save"]').click(function(){Config.commonForumList=[],$("#editCommonForumList").children(".btn").each(function(){var e=$(this),t=parseInt(e.data("fid")),n=e.text().trim();t&&n&&Config.commonForumList.push({fid:t,name:n})}),(0,u.write)(),alert("设置已保存"),k.modal("hide"),location.reload()}).end().find('[data-action="reset"]').click(function(){confirm("是否重置？")&&(Config.commonForumList=[],(0,u.write)(),alert("设置已重置"),k.modal("hide"),location.reload())})})},n.fillCommonForumPanel=function(){var e=Config.commonForumList.length>0?Config.commonForumList:c.default.commonForumList,t="",n=!0,a=!1,o=void 0;try{for(var r,d=e.entries()[Symbol.iterator]();!(n=(r=d.next()).done);n=!0){
var u=i(r.value,2),s=u[0],f=u[1],m=f.fid,p=f.name;0!==s&&s%3!==0||(t+='<div class="row mb-1">'),t+='\n<div class="col-xs-4">\n  <a class="btn btn-outline-primary btn-block" href="'+l.makeUrl("thread")+"/"+m+'">'+p+"</a>\n</div>\n",s!==e.length-1&&s%3!==2||(t+="</div>")}}catch(e){a=!0,o=e}finally{try{!n&&d.return&&d.return()}finally{if(a)throw o}}$(".common-forum-panel").html(t)},n.preventCloseWindow=function(){window.addEventListener("beforeunload",function(e){if($(".mask").length>0){var t="正在进行操作中，确定要关闭页面吗？";return e.returnValue=t,t}})}},{"./config":2,"./const":3,"./util":10}],9:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(n,"__esModule",{value:!0}),n.bindMultiQuoteCheckClick=n.handleCopyCodeBtn=n.handleTuiThreadBtn=n.handleFastGotoFloorBtn=n.gotoFloor=n.handleFloorImage=n.copyBuyThreadList=n.handleBuyThreadBtn=n.handleBlockFloorBtn=n.handleFastReplyBtn=n.handleCopyFloorLinkBtn=void 0;var i=e("./util"),r=o(i),l=e("./const"),d=a(l),c=e("./config"),u=e("./msg"),s=o(u),f=(n.handleCopyFloorLinkBtn=function(){$(document).on("click",".floor-num",function(e){e.preventDefault();var t=$(this),n=r.getHostNameUrl()+t.attr("href");t.data("copy-text",n),r.copyText(t,t)||prompt("本楼的跳转链接：",n)})},n.handleFastReplyBtn=function(){$(document).on("click",".fast-reply-btn",function(e){e.preventDefault();var t=$(this).closest("article"),n=t.data("floor"),a=t.data("username");$("#postGjc").val(a);var o=$("#postContent").get(0);o.value="[quote]回 "+n+"楼("+a+") 的帖子[/quote]\n",o.selectionStart=o.value.length,o.selectionEnd=o.value.length,o.focus()})},n.handleBlockFloorBtn=function(){$(document).on("click",".block-floor",function(){return confirm("确认要屏蔽该回帖？本操作不可恢复！（屏蔽后该回帖将对大家不可见）")})},n.handleBuyThreadBtn=function(){$(document).on("click",".buy-thread-btn",function(e){e.preventDefault();var t=$(this),n=t.data("pid"),a=t.data("price");if(!(a>5)||confirm("此贴售价"+a+"KFB，是否购买？")){var o=s.wait("正在购买帖子&hellip;");$.get(r.makeUrl("job/buytopic","tid="+pageInfo.tid+"&pid="+n+"&verify="+pageInfo.verify),function(e){var t=e.msg;s.remove(o),"操作完成"===t?location.reload():t.includes("您已经购买此帖")?(alert("你已经购买过此帖"),location.reload()):alert("帖子购买失败")})}})},n.copyBuyThreadList=function(){$(document).on("change",".buy-thread-list",function(){var e=$(this);if("copyList"===e.val()){var t=e.find("option").map(function(e){var t=$(this).text();return 0===e||1===e||t==="-".repeat(11)?null:t}).get().join("\n");if(!t)return alert("暂时无人购买"),void(e.get(0).selectedIndex=0);$("#buyThreadListContent").val(t),$("#buyThreadListDialog").modal("show"),e.get(0).selectedIndex=0}}),$("#buyThreadListDialog").on("shown.bs.modal",function(){$("#buyThreadListContent").select().focus()})},n.handleFloorImage=function(){$(document).on("click",".img",function(){var e=$(this);e.parent().is("a")||this.naturalWidth<=e.closest(".read-content").width()||(location.href=e.attr("src"))})},n.gotoFloor=function(){if(pageInfo.floor&&pageInfo.floor>0){var e=$('article[data-floor="'+pageInfo.floor+'"]').prev("a").attr("name");e&&(location.hash="#"+e)}},n.handleFastGotoFloorBtn=function(){$(".fast-goto-floor").click(function(e){if(e.preventDefault(),!Config.perPageFloorNum){var t=parseInt(prompt("你的论坛设置里“文章列表每页个数”为多少（10、20、30）？\n注：如修改了论坛中的此项设置，请访问账号设置页面即可自动同步本地设置",10));if(![10,20,30].includes(t))return;Config.perPageFloorNum=t,(0,c.write)()}var n=$(this).data("url");if(n){var a=parseInt(prompt("你要跳转到哪一层楼？"));!a||a<=0||(location.href=r.makeUrl(n,"page="+(Math.floor(a/Config.perPageFloorNum)+1)+"&floor="+a))}})},n.handleTuiThreadBtn=function(){$(".tui-btn").click(function(e){e.preventDefault();var t=$(this);t.data("wait")||(t.data("wait",!0),$.ajax({type:"POST",url:"/diy_read_tui.php",data:"tid="+pageInfo.tid+"&safeid="+pageInfo.safeId,success:function(e){var n=/<span.+?\+\d+!<\/span>\s*(\d+)/i.exec(e);n?!function(){var e=t.find("span:first");e.text("+1"),setTimeout(function(){e.text(n[1])},1e3)}():/已推过/.test(e)?alert("已推过"):alert("操作失败")},error:function(){alert("操作失败")},complete:function(){t.removeData("wait")}}))})},n.handleCopyCodeBtn=function(){$(document).on("click",".copy-code",function(e){e.preventDefault();var t=$(this);if(!r.copyText(t.next("pre"),t)){var n=t.data("code");if(n)t.text("复制代码").removeData("code"),t.next("textarea").remove(),t.after('<pre class="pre-scrollable">'+n+"</pre>");else{var a=t.next("pre"),o=a.html();t.text("还原代码").data("code",o),o=r.decodeHtmlSpecialChar(o);var i=a.height();i<50&&(i=50),i>340&&(i=340),a.remove(),$('<textarea class="form-control code-textarea" style="height: '+i+'px" wrap="off">'+o+"</textarea>").insertAfter(t).select().focus()}}})},function(){var e=[];return $(".multi-quote-check:checked").each(function(){var t=$(this).closest("article");e.push({floor:t.data("floor"),pid:t.data("pid"),userName:t.data("username")})}),e});n.bindMultiQuoteCheckClick=function(){$(document).on("click",".multi-quote-check",function(){var e=localStorage[d.default.multiQuoteStorageName];if(e)try{e=JSON.parse(e),!e||"object"!==$.type(e)||$.isEmptyObject(e)?e=null:"tid"in e&&e.tid===pageInfo.tid&&"object"===$.type(e.quoteList)||(e=null)}catch(t){e=null}else e=null;var t=f();e||(localStorage.removeItem(d.default.multiQuoteStorageName),e={tid:pageInfo.tid,quoteList:{}}),t.length>0?e.quoteList[pageInfo.currentPageNum]=t:delete e.quoteList[pageInfo.currentPageNum],localStorage[d.default.multiQuoteStorageName]=JSON.stringify(e)})}},{"./config":2,"./const":3,"./msg":5,"./util":10}],10:[function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],a=!0,o=!1,i=void 0;try{for(var r,l=e[Symbol.iterator]();!(a=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){o=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=(n.setCookie=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pageInfo.cookiePrefix;document.cookie=""+a+e+"="+encodeURI(t)+(n?";expires="+n.toUTCString():"")+";path=/;"},n.getCookie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pageInfo.cookiePrefix,n=new RegExp("(^| )"+t+e+"=([^;]*)(;|$)"),a=document.cookie.match(n);return a?decodeURI(a[2]):null},n.deleteCookie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pageInfo.cookiePrefix;document.cookie=""+t+e+"=;expires="+i("-1d").toUTCString()+";path=/;"},n.getDate=function(e){var t=new Date,n=/^(-|\+)?(\d+)([a-zA-Z]{1,2})$/.exec(e);if(!n)return null;var a="undefined"==typeof n[1]?0:"+"===n[1]?1:-1,o=a===-1?-parseInt(n[2]):parseInt(n[2]),i=n[3];switch(i){case"Y":t.setFullYear(o);break;case"y":t.setFullYear(0===a?o:t.getFullYear()+o);break;case"M":t.setMonth(0===a?o:t.getMonth()+o);break;case"d":t.setDate(0===a?o:t.getDate()+o);break;case"h":t.setHours(0===a?o:t.getHours()+o);break;case"m":t.setMinutes(0===a?o:t.getMinutes()+o);break;case"s":t.setSeconds(0===a?o:t.getSeconds()+o);break;case"ms":t.setMilliseconds(0===a?o:t.getMilliseconds()+o);break;default:return null}return t}),r=(n.getStrByteLen=function(e){for(var t=0,n=2,a=0;a<e.length;a++)t+=e.charCodeAt(a)<0||e.charCodeAt(a)>255?n:1;return t},n.getHostNameUrl=function(){return location.protocol+"//"+location.host},n.addCode=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=""===n?t.indexOf("]")+1:t.indexOf(n);if("undefined"!=typeof e.selectionStart){var o=e.selectionStart;e.value=e.value.substring(0,o)+t+e.value.substring(e.selectionEnd),e.selectionStart=o+a,e.selectionEnd=o+a+n.length}else e.value+=t},n.getSelText=function(e){return e.value.substring(e.selectionStart,e.selectionEnd)},n.extractQueryStr=function(e){var t=new Map,n=!0,a=!1,i=void 0;try{for(var r,l=e.split("&")[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var d=r.value;if(d){var c=d.split("="),u=o(c,2),s=u[0],f=u[1];t.set(s,"undefined"!=typeof f?f:"")}}}catch(e){a=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}return t}),l=n.buildQueryStr=function(e){var t="",n=!0,a=!1,i=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var d=o(r.value,2),c=d[0],u=d[1];t+=2===pageInfo.urlType?(t?"&":"")+c+"="+u:(t?"/":"")+c+"/"+u}}catch(e){a=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}return t},d=(n.makeUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i="",d=r(t);if(n){d=new Map([].concat(a(r(pageInfo.urlParam).entries()),a(d.entries())));for(var c in o)d.delete(o[c])}if(e.startsWith("/")||(i=location.pathname.startsWith(pageInfo.baseFile)?pageInfo.baseFile+"/":pageInfo.rootPath),i+=e,d.size>0){var u=l(d);u&&(i+=(2===pageInfo.urlType?"?":"/")+u)}return i},n.getQueryParam=function(e){return r(pageInfo.urlParam).get(e)},n.decodeHtmlSpecialChar=function(e){return e.length?e.replace(/<br\s*\/?>/gi,"\n").replace(/&quot;/gi,'"').replace(/&#39;/gi,"'").replace(/&nbsp;/gi," ").replace(/&gt;/gi,">").replace(/&lt;/gi,"<").replace(/&amp;/gi,"&"):""},n.selectAll=function(e){e.prop("checked",!0)},n.selectReverse=function(e){e.each(function(){var e=$(this);e.prop("checked",!e.prop("checked"))})},n.showValidationMsg=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"error"===t&&(t="danger"),e.removeClass("form-control-success form-control-warning form-control-danger");var a=e.parent();a.removeClass("has-success has-warning has-danger"),$.inArray(t,["success","warning","danger"]>-1)&&e.addClass("form-control-"+t).parent().addClass("has-"+t);var o=a.find(".form-control-feedback");"wait"===t?o.html('<span class="text-muted"><i class="fa fa-spinner fa-spin" aria-hidden="true"></i> '+n+"</span>"):o.text(n)},n.getDifferenceSetOfObject=function(e,t){var n={};return"object"!==$.type(e)||"object"!==$.type(t)?n:($.each(t,function(t,a){t in e&&(d(e[t],a)||(n[t]=a))}),n)},n.deepEqual=function e(t,n){if(t===n)return!0;if($.type(t)!==$.type(n))return!1;if("number"==typeof t&&"number"==typeof n&&isNaN(t)&&isNaN(n))return!0;if($.isArray(t)&&$.isArray(n)||"object"===$.type(t)&&"object"===$.type(n)){if(t.length!==n.length)return!1;for(var a in $.extend($.isArray(t)?[]:{},t,n)){if("undefined"==typeof t[a]||"undefined"==typeof n[a])return!1;if(!e(t[a],n[a]))return!1}return!0}return!1});n.copyText=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!("execCommand"in document&&t.length))return!1;var e=t.data("copy-text");e&&(t=$('<span class="text-hide">'+e+"</span>").insertAfter(t));var a=window.getSelection();a.selectAllChildren(t.get(0));var o=document.execCommand("copy");if(a.removeAllRanges(),e&&t.remove(),o&&n){var i=n.data("copy-msg");n.attr("title",i?i:"已复制").on("hidden.bs.tooltip",function(){$(this).tooltip("dispose")}).tooltip("show")}return o}},{}]},{},[1]);
//# sourceMappingURL=app.min.js.map
